/*! For license information please see main.d606c848.js.LICENSE.txt */
(()=>{var e={703:function(e){e.exports=function(){"use strict";const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object;let{freeze:s,seal:o,create:a}=Object,{apply:l,construct:c}="undefined"!==typeof Reflect&&Reflect;s||(s=function(e){return e}),o||(o=function(e){return e}),l||(l=function(e,t,n){return e.apply(t,n)}),c||(c=function(e,t){return new e(...t)});const u=_(Array.prototype.forEach),h=_(Array.prototype.pop),d=_(Array.prototype.push),f=_(String.prototype.toLowerCase),p=_(String.prototype.toString),m=_(String.prototype.match),g=_(String.prototype.replace),y=_(String.prototype.indexOf),v=_(String.prototype.trim),w=_(RegExp.prototype.test),b=E(TypeError);function _(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return l(e,t,r)}}function E(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return c(e,n)}}function I(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;t&&t(e,null);let s=r.length;for(;s--;){let t=r[s];if("string"===typeof t){const e=i(t);e!==t&&(n(r)||(r[s]=e),t=e)}e[t]=!0}return e}function T(e){for(let t=0;t<e.length;t++)void 0===i(e,t)&&(e[t]=null);return e}function S(t){const n=a(null);for(const[r,s]of e(t))void 0!==i(t,r)&&(Array.isArray(s)?n[r]=T(s):s&&"object"===typeof s&&s.constructor===Object?n[r]=S(s):n[r]=s);return n}function k(e,t){for(;null!==e;){const n=i(e,t);if(n){if(n.get)return _(n.get);if("function"===typeof n.value)return _(n.value)}e=r(e)}function n(e){return console.warn("fallback value for",e),null}return n}const C=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),x=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),N=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),A=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),R=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),D=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),P=s(["#text"]),O=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),L=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),M=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),F=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),U=o(/\{\{[\w\W]*|[\w\W]*\}\}/gm),V=o(/<%[\w\W]*|[\w\W]*%>/gm),B=o(/\${[\w\W]*}/gm),z=o(/^data-[\-\w.\u00B7-\uFFFF]/),j=o(/^aria-[\-\w]+$/),q=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H=o(/^(?:\w+script|data):/i),W=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),G=o(/^html$/i);var K=Object.freeze({__proto__:null,MUSTACHE_EXPR:U,ERB_EXPR:V,TMPLIT_EXPR:B,DATA_ATTR:z,ARIA_ATTR:j,IS_ALLOWED_URI:q,IS_SCRIPT_OR_DATA:H,ATTR_WHITESPACE:W,DOCTYPE_NAME:G});const Q=function(){return"undefined"===typeof window?null:window},Y=function(e,t){if("object"!==typeof e||"function"!==typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(s){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function X(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();const n=e=>X(e);if(n.version="3.0.8",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;let{document:r}=t;const i=r,o=i.currentScript,{DocumentFragment:l,HTMLTemplateElement:c,Node:_,Element:E,NodeFilter:T,NamedNodeMap:U=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:V,DOMParser:B,trustedTypes:z}=t,j=E.prototype,H=k(j,"cloneNode"),W=k(j,"nextSibling"),$=k(j,"childNodes"),J=k(j,"parentNode");if("function"===typeof c){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let Z,ee="";const{implementation:te,createNodeIterator:ne,createDocumentFragment:re,getElementsByTagName:ie}=r,{importNode:se}=i;let oe={};n.isSupported="function"===typeof e&&"function"===typeof J&&te&&void 0!==te.createHTMLDocument;const{MUSTACHE_EXPR:ae,ERB_EXPR:le,TMPLIT_EXPR:ce,DATA_ATTR:ue,ARIA_ATTR:he,IS_SCRIPT_OR_DATA:de,ATTR_WHITESPACE:fe}=K;let{IS_ALLOWED_URI:pe}=K,me=null;const ge=I({},[...C,...x,...N,...R,...P]);let ye=null;const ve=I({},[...O,...L,...M,...F]);let we=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),be=null,_e=null,Ee=!0,Ie=!0,Te=!1,Se=!0,ke=!1,Ce=!1,xe=!1,Ne=!1,Ae=!1,Re=!1,De=!1,Pe=!0,Oe=!1;const Le="user-content-";let Me=!0,Fe=!1,Ue={},Ve=null;const Be=I({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ze=null;const je=I({},["audio","video","img","source","image","track"]);let qe=null;const He=I({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),We="http://www.w3.org/1998/Math/MathML",Ge="http://www.w3.org/2000/svg",Ke="http://www.w3.org/1999/xhtml";let Qe=Ke,Ye=!1,Xe=null;const $e=I({},[We,Ge,Ke],p);let Je=null;const Ze=["application/xhtml+xml","text/html"],et="text/html";let tt=null,nt=null;const rt=r.createElement("form"),it=function(e){return e instanceof RegExp||e instanceof Function},st=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!nt||nt!==e){if(e&&"object"===typeof e||(e={}),e=S(e),Je=-1===Ze.indexOf(e.PARSER_MEDIA_TYPE)?et:e.PARSER_MEDIA_TYPE,tt="application/xhtml+xml"===Je?p:f,me="ALLOWED_TAGS"in e?I({},e.ALLOWED_TAGS,tt):ge,ye="ALLOWED_ATTR"in e?I({},e.ALLOWED_ATTR,tt):ve,Xe="ALLOWED_NAMESPACES"in e?I({},e.ALLOWED_NAMESPACES,p):$e,qe="ADD_URI_SAFE_ATTR"in e?I(S(He),e.ADD_URI_SAFE_ATTR,tt):He,ze="ADD_DATA_URI_TAGS"in e?I(S(je),e.ADD_DATA_URI_TAGS,tt):je,Ve="FORBID_CONTENTS"in e?I({},e.FORBID_CONTENTS,tt):Be,be="FORBID_TAGS"in e?I({},e.FORBID_TAGS,tt):{},_e="FORBID_ATTR"in e?I({},e.FORBID_ATTR,tt):{},Ue="USE_PROFILES"in e&&e.USE_PROFILES,Ee=!1!==e.ALLOW_ARIA_ATTR,Ie=!1!==e.ALLOW_DATA_ATTR,Te=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Se=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,ke=e.SAFE_FOR_TEMPLATES||!1,Ce=e.WHOLE_DOCUMENT||!1,Ae=e.RETURN_DOM||!1,Re=e.RETURN_DOM_FRAGMENT||!1,De=e.RETURN_TRUSTED_TYPE||!1,Ne=e.FORCE_BODY||!1,Pe=!1!==e.SANITIZE_DOM,Oe=e.SANITIZE_NAMED_PROPS||!1,Me=!1!==e.KEEP_CONTENT,Fe=e.IN_PLACE||!1,pe=e.ALLOWED_URI_REGEXP||q,Qe=e.NAMESPACE||Ke,we=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&it(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(we.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&it(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(we.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(we.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ke&&(Ie=!1),Re&&(Ae=!0),Ue&&(me=I({},P),ye=[],!0===Ue.html&&(I(me,C),I(ye,O)),!0===Ue.svg&&(I(me,x),I(ye,L),I(ye,F)),!0===Ue.svgFilters&&(I(me,N),I(ye,L),I(ye,F)),!0===Ue.mathMl&&(I(me,R),I(ye,M),I(ye,F))),e.ADD_TAGS&&(me===ge&&(me=S(me)),I(me,e.ADD_TAGS,tt)),e.ADD_ATTR&&(ye===ve&&(ye=S(ye)),I(ye,e.ADD_ATTR,tt)),e.ADD_URI_SAFE_ATTR&&I(qe,e.ADD_URI_SAFE_ATTR,tt),e.FORBID_CONTENTS&&(Ve===Be&&(Ve=S(Ve)),I(Ve,e.FORBID_CONTENTS,tt)),Me&&(me["#text"]=!0),Ce&&I(me,["html","head","body"]),me.table&&(I(me,["tbody"]),delete be.tbody),e.TRUSTED_TYPES_POLICY){if("function"!==typeof e.TRUSTED_TYPES_POLICY.createHTML)throw b('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!==typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw b('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Z=e.TRUSTED_TYPES_POLICY,ee=Z.createHTML("")}else void 0===Z&&(Z=Y(z,o)),null!==Z&&"string"===typeof ee&&(ee=Z.createHTML(""));s&&s(e),nt=e}},ot=I({},["mi","mo","mn","ms","mtext"]),at=I({},["foreignobject","desc","title","annotation-xml"]),lt=I({},["title","style","font","a","script"]),ct=I({},[...x,...N,...A]),ut=I({},[...R,...D]),ht=function(e){let t=J(e);t&&t.tagName||(t={namespaceURI:Qe,tagName:"template"});const n=f(e.tagName),r=f(t.tagName);return!!Xe[e.namespaceURI]&&(e.namespaceURI===Ge?t.namespaceURI===Ke?"svg"===n:t.namespaceURI===We?"svg"===n&&("annotation-xml"===r||ot[r]):Boolean(ct[n]):e.namespaceURI===We?t.namespaceURI===Ke?"math"===n:t.namespaceURI===Ge?"math"===n&&at[r]:Boolean(ut[n]):e.namespaceURI===Ke?!(t.namespaceURI===Ge&&!at[r])&&!(t.namespaceURI===We&&!ot[r])&&!ut[n]&&(lt[n]||!ct[n]):!("application/xhtml+xml"!==Je||!Xe[e.namespaceURI]))},dt=function(e){d(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},ft=function(e,t){try{d(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(r){d(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!ye[e])if(Ae||Re)try{dt(t)}catch(r){}else try{t.setAttribute(e,"")}catch(r){}},pt=function(e){let t=null,n=null;if(Ne)e="<remove></remove>"+e;else{const t=m(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===Je&&Qe===Ke&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=Z?Z.createHTML(e):e;if(Qe===Ke)try{t=(new B).parseFromString(i,Je)}catch(o){}if(!t||!t.documentElement){t=te.createDocument(Qe,"template",null);try{t.documentElement.innerHTML=Ye?ee:i}catch(o){}}const s=t.body||t.documentElement;return e&&n&&s.insertBefore(r.createTextNode(n),s.childNodes[0]||null),Qe===Ke?ie.call(t,Ce?"html":"body")[0]:Ce?t.documentElement:s},mt=function(e){return ne.call(e.ownerDocument||e,e,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT,null)},gt=function(e){return e instanceof V&&("string"!==typeof e.nodeName||"string"!==typeof e.textContent||"function"!==typeof e.removeChild||!(e.attributes instanceof U)||"function"!==typeof e.removeAttribute||"function"!==typeof e.setAttribute||"string"!==typeof e.namespaceURI||"function"!==typeof e.insertBefore||"function"!==typeof e.hasChildNodes)},yt=function(e){return"function"===typeof _&&e instanceof _},vt=function(e,t,r){oe[e]&&u(oe[e],(e=>{e.call(n,t,r,nt)}))},wt=function(e){let t=null;if(vt("beforeSanitizeElements",e,null),gt(e))return dt(e),!0;const r=tt(e.nodeName);if(vt("uponSanitizeElement",e,{tagName:r,allowedTags:me}),e.hasChildNodes()&&!yt(e.firstElementChild)&&w(/<[/\w]/g,e.innerHTML)&&w(/<[/\w]/g,e.textContent))return dt(e),!0;if(!me[r]||be[r]){if(!be[r]&&_t(r)){if(we.tagNameCheck instanceof RegExp&&w(we.tagNameCheck,r))return!1;if(we.tagNameCheck instanceof Function&&we.tagNameCheck(r))return!1}if(Me&&!Ve[r]){const t=J(e)||e.parentNode,n=$(e)||e.childNodes;if(n&&t)for(let r=n.length-1;r>=0;--r)t.insertBefore(H(n[r],!0),W(e))}return dt(e),!0}return e instanceof E&&!ht(e)?(dt(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!w(/<\/no(script|embed|frames)/i,e.innerHTML)?(ke&&3===e.nodeType&&(t=e.textContent,u([ae,le,ce],(e=>{t=g(t,e," ")})),e.textContent!==t&&(d(n.removed,{element:e.cloneNode()}),e.textContent=t)),vt("afterSanitizeElements",e,null),!1):(dt(e),!0)},bt=function(e,t,n){if(Pe&&("id"===t||"name"===t)&&(n in r||n in rt))return!1;if(Ie&&!_e[t]&&w(ue,t));else if(Ee&&w(he,t));else if(!ye[t]||_e[t]){if(!(_t(e)&&(we.tagNameCheck instanceof RegExp&&w(we.tagNameCheck,e)||we.tagNameCheck instanceof Function&&we.tagNameCheck(e))&&(we.attributeNameCheck instanceof RegExp&&w(we.attributeNameCheck,t)||we.attributeNameCheck instanceof Function&&we.attributeNameCheck(t))||"is"===t&&we.allowCustomizedBuiltInElements&&(we.tagNameCheck instanceof RegExp&&w(we.tagNameCheck,n)||we.tagNameCheck instanceof Function&&we.tagNameCheck(n))))return!1}else if(qe[t]);else if(w(pe,g(n,fe,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==y(n,"data:")||!ze[e])if(Te&&!w(de,g(n,fe,"")));else if(n)return!1;return!0},_t=function(e){return e.indexOf("-")>0},Et=function(e){vt("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ye};let i=t.length;for(;i--;){const o=t[i],{name:a,namespaceURI:l,value:c}=o,d=tt(a);let f="value"===a?c:v(c);if(r.attrName=d,r.attrValue=f,r.keepAttr=!0,r.forceKeepAttr=void 0,vt("uponSanitizeAttribute",e,r),f=r.attrValue,r.forceKeepAttr)continue;if(ft(a,e),!r.keepAttr)continue;if(!Se&&w(/\/>/i,f)){ft(a,e);continue}ke&&u([ae,le,ce],(e=>{f=g(f,e," ")}));const p=tt(e.nodeName);if(bt(p,d,f)){if(!Oe||"id"!==d&&"name"!==d||(ft(a,e),f=Le+f),Z&&"object"===typeof z&&"function"===typeof z.getAttributeType)if(l);else switch(z.getAttributeType(p,d)){case"TrustedHTML":f=Z.createHTML(f);break;case"TrustedScriptURL":f=Z.createScriptURL(f)}try{l?e.setAttributeNS(l,a,f):e.setAttribute(a,f),h(n.removed)}catch(s){}}}vt("afterSanitizeAttributes",e,null)},It=function e(t){let n=null;const r=mt(t);for(vt("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)vt("uponSanitizeShadowNode",n,null),wt(n)||(n.content instanceof l&&e(n.content),Et(n));vt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,s=null,o=null,a=null;if(Ye=!e,Ye&&(e="\x3c!--\x3e"),"string"!==typeof e&&!yt(e)){if("function"!==typeof e.toString)throw b("toString is not a function");if("string"!==typeof(e=e.toString()))throw b("dirty is not a string, aborting")}if(!n.isSupported)return e;if(xe||st(t),n.removed=[],"string"===typeof e&&(Fe=!1),Fe){if(e.nodeName){const t=tt(e.nodeName);if(!me[t]||be[t])throw b("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof _)r=pt("\x3c!----\x3e"),s=r.ownerDocument.importNode(e,!0),1===s.nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?r=s:r.appendChild(s);else{if(!Ae&&!ke&&!Ce&&-1===e.indexOf("<"))return Z&&De?Z.createHTML(e):e;if(r=pt(e),!r)return Ae?null:De?ee:""}r&&Ne&&dt(r.firstChild);const c=mt(Fe?e:r);for(;o=c.nextNode();)wt(o)||(o.content instanceof l&&It(o.content),Et(o));if(Fe)return e;if(Ae){if(Re)for(a=re.call(r.ownerDocument);r.firstChild;)a.appendChild(r.firstChild);else a=r;return(ye.shadowroot||ye.shadowrootmode)&&(a=se.call(i,a,!0)),a}let h=Ce?r.outerHTML:r.innerHTML;return Ce&&me["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&w(G,r.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+h),ke&&u([ae,le,ce],(e=>{h=g(h,e," ")})),Z&&De?Z.createHTML(h):h},n.setConfig=function(){st(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),xe=!0},n.clearConfig=function(){nt=null,xe=!1},n.isValidAttribute=function(e,t,n){nt||st({});const r=tt(e),i=tt(t);return bt(r,i,n)},n.addHook=function(e,t){"function"===typeof t&&(oe[e]=oe[e]||[],d(oe[e],t))},n.removeHook=function(e){if(oe[e])return h(oe[e])},n.removeHooks=function(e){oe[e]&&(oe[e]=[])},n.removeAllHooks=function(){oe={}},n}return X()}()},888:(e,t,n)=>{"use strict";var r=n(47);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},7:(e,t,n)=>{e.exports=n(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:(e,t,n)=>{"use strict";var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function B(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case E:return"Portal";case S:return"Profiler";case T:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function J(e,t){$(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ie=null,Te=null;function Se(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function ke(e){Ie?Te?Te.push(e):Te=[e]:Ie=e}function Ce(){if(Ie){var e=Ie,t=Te;if(Te=Ie=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return xe(e,t,n)}finally{Ae=!1,(null!==Ie||null!==Te)&&(Ne(),Ce())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Pe=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,Ve=null,Be={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Be,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(je(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,It,Tt,St,kt=!1,Ct=[],xt=null,Nt=null,At=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function Bt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(Vt),Dt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function jt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Kt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Kt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Kt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Mt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Sn(){return Tn}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Rn),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){ke(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Qn(e){Ur(e,0)}function Yn(e){if(K(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Wn(t,Kn,e,_e(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Ir={},Tr={};function Sr(e){if(Ir[e])return Ir[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Ir[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Sr("animationend"),Cr=Sr("animationiteration"),xr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),l(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(kr,"onAnimationEnd"),Dr(Cr,"onAnimationIteration"),Dr(xr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case kr:case Cr:case xr:l=yn;break;case Nr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=De(p,d))&&u.push(Wr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=d;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(Hn(a))if($n)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else jn?Bn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==w?"onCompositionEnd"===w&&jn&&(v=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,jn=!0)),0<(y=Gr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=zn(n))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!On&&Bn(e,t)?(e=en(),Zt=Jt=$t=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=De(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=De(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=De(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Ii=-1;function Ti(e){return{current:e}}function Si(e){0>Ii||(e.current=Ei[Ii],Ei[Ii]=null,Ii--)}function ki(e,t){Ii++,Ei[Ii]=e.current,e.current=t}var Ci={},xi=Ti(Ci),Ni=Ti(!1),Ai=Ci;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Si(Ni),Si(xi)}function Oi(e,t,n){if(xi.current!==Ci)throw Error(s(168));ki(xi,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=xi.current,ki(xi,e),ki(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(xi),ki(xi,e)):Si(Ni),ki(Ni,n)}var Ui=null,Vi=!1,Bi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function ji(){if(!Bi&&null!==Ui){Bi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke(Ze,ji),i}finally{wt=t,Bi=!1}}return null}var qi=[],Hi=0,Wi=null,Gi=0,Ki=[],Qi=0,Yi=null,Xi=1,$i="";function Ji(e,t){qi[Hi++]=Gi,qi[Hi++]=Wi,Wi=e,Gi=t}function Zi(e,t,n){Ki[Qi++]=Xi,Ki[Qi++]=$i,Ki[Qi++]=Yi,Yi=e;var r=Xi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,$i=s+e}else Xi=1<<s|n<<i|r,$i=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=qi[--Hi],qi[Hi]=null,Gi=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Ki[--Qi],Ki[Qi]=null,$i=Ki[--Qi],Ki[Qi]=null,Xi=Ki[--Qi],Ki[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ti(null),vs=null,ws=null,bs=null;function _s(){bs=ws=vs=null}function Es(e){var t=ys.current;Si(ys),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ts(e,t){vs=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ss(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===vs)throw Error(s(308));ws=e,vs.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var ks=null;function Cs(e){null===ks?ks=[e]:ks.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Cs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ds(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ps(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Cs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Vs=(new r.Component).refs;function Bs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zs={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ps(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ps(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ps(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rc(t,e,r,n),Ls(t,e,r))}};function js(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ss(s):(i=Di(t)?Ai:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Hs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Vs,Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ss(s):(s=Di(t)?Ai:xi.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Bs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Vs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ks(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Gs(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Gs(e,null,t),n.return=e,n;case E:return(t=Vc(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ks(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ks(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ks(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Ji(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Ji(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Ji(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&Ji(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Ji(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Ji(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===I){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===I?((s=Mc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lc(o.type,o.key,o.props,null,r.mode,l)).ref=Gs(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vc(o,r.mode,l)).return=r,r=s}return a(r);case D:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);Ks(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Xs=Ys(!0),$s=Ys(!1),Js={},Zs=Ti(Js),eo=Ti(Js),to=Ti(Js);function no(e){if(e===Js)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,Js),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Zs),ki(Zs,t)}function io(){Si(Zs),Si(eo),Si(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Si(Zs),Si(eo))}var ao=Ti(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,wo=!1,bo=0,_o=0;function Eo(){throw Error(s(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function To(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function So(){var e=0!==bo;return bo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function xo(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,mo.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Do(e,t){var n=mo,r=Co(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ho(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=Ns(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Co().memoizedState}function zo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Io(r,o.deps))return void(i.memoizedState=Vo(t,n,s,r))}mo.flags|=e,i.memoizedState=Vo(1|t,n,s,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ho(e,t){return jo(2048,8,e,t)}function Wo(e,t){return jo(4,2,e,t)}function Go(e,t){return jo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Ko.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return Co().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=xs(e,t,n,r))){rc(n,e,r,tc()),sa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Cs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=xs(e,t,i,r))&&(rc(n,e,r,i=tc()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:Ss,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},aa={readContext:Ss,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ss,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Al.identifierPrefix;if(is){var n=$i;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ss,useCallback:Xo,useContext:Ss,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:$o,useReducer:No,useRef:Bo,useState:function(){return No(xo)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(Co(),go.memoizedState,e)},useTransition:function(){return[No(xo)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Ss,useCallback:Xo,useContext:Ss,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:$o,useReducer:Ao,useRef:Bo,useState:function(){return Ao(xo)},useDebugValue:Yo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:Jo(t,go.memoizedState,e)},useTransition:function(){return[Ao(xo)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ps(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Gl=r),da(0,t)},n}function ma(e,t,n){(n=Ps(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ps(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?$s(t,null,n,r):Xs(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return Ts(t,i),r=To(e,t,n,r,s,i),n=So(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ta(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ta(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ca(e,t,n,r,i)}function Sa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Ol,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Ol,Pl),Pl|=r;return _a(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Di(n)?Ai:xi.current;return s=Ri(t,s),Ts(t,i),n=To(e,t,n,r,s,i),r=So(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function xa(e,t,n,r,i){if(Di(n)){var s=!0;Mi(t)}else s=!1;if(Ts(t,i),null===t.stateNode)Ha(e,t),qs(t,n,r),Ws(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ss(c):c=Ri(t,c=Di(n)?Ai:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Hs(t,o,r,c),As=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ni.current||As?("function"===typeof u&&(Bs(t,n,u,r),l=t.memoizedState),(a=As||js(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ds(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:gs(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ss(l):l=Ri(t,l=Di(n)?Ai:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Hs(t,o,r,l),As=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||As?("function"===typeof f&&(Bs(t,n,f,r),p=t.memoizedState),(c=As||js(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wa(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xs(t,e.child,null,s),t.child=Xs(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ra(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Da,Pa,Oa,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):Va(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xs(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ba(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),rc(r,e,i,-1))}return gc(),Ba(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Qi++]=Xi,Ki[Qi++]=$i,Ki[Qi++]=Yi,Xi=e.id,$i=e.overflow,Yi=t),t=Va(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Va(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&ps(r),Xs(t,e.child,null,n),(e=Va(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function ja(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ja(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ja(t,!0,n,null,s);break;case"together":ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Di(t.type)&&Pi(),Ka(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(xi),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Pa(e,t),Ka(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Da(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Vr("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ka(t),null;case 13:if(Si(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return io(),Pa(e,t),null===e&&jr(t.stateNode.containerInfo),Ka(t),null;case 10:return Es(t.type._context),Ka(t),null;case 19:if(Si(ao),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ga(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ga(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>ql&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ka(t),null}else 2*$e()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(xi),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(ao),null;case 4:return io(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Da=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xa=!1,$a=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:$a||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),jt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!$a&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Sc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?($a=(r=$a)||null!==n.memoizedState,fl(e,t,n),$a=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Sc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Sc(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Sc(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(jl=$e())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||h,gl(t,e),$a=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){El(d);continue}}null!==p?(p.return=f,Za=p):El(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Sc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Sc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Xa;var c=$a;if(Xa=o,($a=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Il(i):null!==l?(l.return=o,Za=l):Il(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,Xa=a,$a=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_l(e)}}function _l(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$a)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&jt(d)}}}break;default:throw Error(s(163))}$a||512&t.flags&&sl(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function El(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Il(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Sc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Sc(t,o,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Tl,Sl=Math.ceil,kl=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,xl=b.ReactCurrentBatchConfig,Nl=0,Al=null,Rl=null,Dl=0,Pl=0,Ol=Ti(0),Ll=0,Ml=null,Fl=0,Ul=0,Vl=0,Bl=null,zl=null,jl=0,ql=1/0,Hl=null,Wl=!1,Gl=null,Kl=null,Ql=!1,Yl=null,Xl=0,$l=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Nl)?$e():-1!==Zl?Zl:Zl=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Dl?Dl&-Dl:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<$l)throw $l=0,Jl=null,Error(s(185));yt(e,n,r),0!==(2&Nl)&&e===Al||(e===Al&&(0===(2&Nl)&&(Ul|=n),4===Ll&&lc(e,Dl)),ic(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(ql=$e()+500,Vi&&ji()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Al?Dl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Nl)&&ji()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Nl;Nl|=2;var o=mc();for(Al===e&&Dl===t||(Hl=null,ql=$e()+500,fc(e,t));;)try{wc();break}catch(l){pc(e,l)}_s(),kl.current=o,Nl=i,null!==Rl?t=0:(Al=null,Dl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ml,fc(e,0),lc(e,r),ic(e,$e()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ml,fc(e,0),lc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Ec(e,zl,Hl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=jl+500-$e())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ec.bind(null,e,zl,Hl),t);break}Ec(e,zl,Hl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(Ec.bind(null,e,zl,Hl),r);break}Ec(e,zl,Hl);break;default:throw Error(s(329))}}}return ic(e,$e()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function lc(e,t){for(t&=~Vl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nl))throw Error(s(327));Ic();var t=dt(e,0);if(0===(1&t))return ic(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,fc(e,0),lc(e,t),ic(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,zl,Hl),ic(e,$e()),null}function uc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(ql=$e()+500,Vi&&ji())}}function hc(e){null!==Yl&&0===Yl.tag&&0===(6&Nl)&&Ic();var t=Nl;Nl|=1;var n=xl.transition,r=wt;try{if(xl.transition=null,wt=1,e)return e()}finally{wt=r,xl.transition=n,0===(6&(Nl=t))&&ji()}}function dc(){Pl=Ol.current,Si(Ol)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Si(Ni),Si(xi),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(ao);break;case 10:Es(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Al=e,Rl=e=Oc(e.current,null),Dl=Pl=t,Ll=0,Ml=null,Vl=Ul=Fl=0,zl=Bl=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(_s(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,wo=!1,bo=0,Cl.current=null,null===n||null===n.return){Ll=1,Ml=t,Rl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ll&&(Ll=2),null===Bl?Bl=[o]:Bl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,c,t));break e;case 1:l=c;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Kl||!Kl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(b){t=b,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function mc(){var e=kl.current;return kl.current=oa,null===e?oa:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Al||0===(268435455&Fl)&&0===(268435455&Ul)||lc(Al,Dl)}function yc(e,t){var n=Nl;Nl|=2;var r=mc();for(Al===e&&Dl===t||(Hl=null,fc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(_s(),Nl=n,kl.current=r,null!==Rl)throw Error(s(261));return Al=null,Dl=0,Ll}function vc(){for(;null!==Rl;)bc(Rl)}function wc(){for(;null!==Rl&&!Ye();)bc(Rl)}function bc(e){var t=Tl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?_c(e):Rl=t,Cl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Pl)))return void(Rl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ll=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Ec(e,t,n){var r=wt,i=xl.transition;try{xl.transition=null,wt=1,function(e,t,n,r){do{Ic()}while(null!==Yl);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Al&&(Rl=Al=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Ac(tt,(function(){return Ic(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=xl.transition,xl.transition=null;var a=wt;wt=1;var l=Nl;Nl|=4,Cl.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Sc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nl,nl=!1}(e,n),yl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,wl(n,e,i),Xe(),Nl=l,wt=a,xl.transition=o}else e.current=n;if(Ql&&(Ql=!1,Yl=e,Xl=i),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Gl,Gl=null,e;0!==(1&Xl)&&0!==e.tag&&Ic(),o=e.pendingLanes,0!==(1&o)?e===Jl?$l++:($l=0,Jl=e):$l=0,ji()}(e,t,n,r)}finally{xl.transition=i,wt=r}return null}function Ic(){if(null!==Yl){var e=bt(Xl),t=xl.transition,n=wt;try{if(xl.transition=null,wt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(E){Sc(l,l.return,E)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(Nl=i,ji(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,xl.transition=t}}return!1}function Tc(e,t,n){e=Os(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Tc(e,e,n);else for(;null!==t;){if(3===t.tag){Tc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Os(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Dl&n)===n&&(4===Ll||3===Ll&&(130023424&Dl)===Dl&&500>$e()-jl?fc(e,0):Vl|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ns(e,t))&&(yt(e,t,n),ic(e,n))}function xc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cc(e,n)}function Ac(e,t){return Ke(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Rc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Pc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Mc(n.children,i,o,t);case T:a=8,i|=8;break;case S:return(e=Dc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Dc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Dc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case R:a=14;break e;case D:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Dc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,o,a,l){return e=new Bc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Dc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function jc(e){if(!e)return Ci;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,s,o,a,l){return(e=zc(n,r,!0,e,0,s,0,a,l)).context=jc(null),n=e.current,(s=Ps(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Hc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ps(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rc(e,i,o,s),Ls(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Tl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:so(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(ki(ao,1&ao.current),null!==(e=Wa(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Ri(t,xi.current);Ts(t,n),i=To(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Rs(t),i.updater=zs,t.stateNode=i,i._reactInternals=t,Ws(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===R)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ds(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=$s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wa(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xs(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ps(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Is(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ts(t,n),r=r(i=Ss(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ia(e,t,r,i=gs(r.type,i),n);case 15:return Ta(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ha(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ts(t,n),qs(t,r,i),Ws(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Sa(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wc(o);a.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wc(o);s.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,jr(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,jr(8===e.nodeType?e.parentNode:e),hc((function(){Hc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Hc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,$e()),0===(6&Nl)&&(ql=$e()+500,ji()))}break;case 13:hc((function(){var t=Ns(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},Et=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},It=function(e){if(13===e.tag){var t=nc(e),n=Ns(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},Tt=function(){return wt},St=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));K(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=uc,Ne=hc;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Ce,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,I={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!T.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:I.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+x(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+x(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+x(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:I};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,P(E);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,T=!1,S=null,k=-1,C=5,x=-1;function N(){return!(t.unstable_now()-x<C)}function A(){if(null!==S){var e=t.unstable_now();x=e;var n=!0;try{n=S(!0,e)}finally{n?I():(T=!1,S=null)}}else T=!1}if("function"===typeof w)I=function(){w(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,I=function(){D.postMessage(null)}}else I=function(){y(A,0)};function P(e){S=e,T||(T=!0,I())}function O(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(k),k=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,P(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>Ge,SDK_VERSION:()=>Yt,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>zt,_addOrOverwriteComponent:()=>jt,_apps:()=>Vt,_clearComponents:()=>Gt,_components:()=>Bt,_getProvider:()=>Ht,_registerComponent:()=>qt,_removeServiceInstance:()=>Wt,deleteApp:()=>Zt,getApp:()=>$t,getApps:()=>Jt,initializeApp:()=>Xt,onLog:()=>tn,registerVersion:()=>en,setLogLevel:()=>nn});var t,r=n(791),i=n.t(r,2),s=n(250),o=n(164),a=n.t(o,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,h=t.Pop,m=null,g=y();function y(){return(a.state||{idx:null}).idx}function v(){h=t.Pop;let e=y(),n=null==e?null:e-g;g=e,m&&m({action:h,location:b.location,delta:n})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let b={get action(){return h},get location(){return e(s,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(c,v),m=e,()=>{s.removeEventListener(c,v),m=null}},createHref:e=>n(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;let i=f(b.location,e,n);r&&r(i,e),g=y()+1;let l=d(i,g),c=b.createHref(i);try{a.pushState(l,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(c)}o&&m&&m({action:h,location:b.location,delta:1})},replace:function(e,n){h=t.Replace;let i=f(b.location,e,n);r&&r(i,e),g=y();let s=d(i,g),l=b.createHref(i);a.replaceState(s,"",l),o&&m&&m({action:h,location:b.location,delta:0})},go:e=>a.go(e)};return b}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){void 0===n&&(n="/");let r=D(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=N(i[o],R(r));return s}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=F([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:x(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=b(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:\w+$/,E=3,I=2,T=1,S=10,k=-2,C=e=>"*"===e;function x(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=k),t&&(r+=I),n.filter((e=>!C(e))).reduce(((e,t)=>e+(_.test(t)?E:""===t?T:S)),r)}function N(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:F([i,c.pathname]),pathnameBase:U(F([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=F([i,c.pathnameBase]))}return s}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return h(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l||"",r),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function R(e){try{return decodeURI(e)}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function P(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e,t){let n=O(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),P("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),P("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),P("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:V(r),hash:B(i)}}(i,s),h=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const j=["post","put","patch","delete"],q=(new Set(j),["get",...j]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const W=r.createContext(null);const G=r.createContext(null);const K=r.createContext(null);const Q=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const X=r.createContext(null);function $(){return null!=r.useContext(Q)}function J(){return $()||u(!1),r.useContext(Q).location}function Z(e){r.useContext(K).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=he(ce.UseNavigateStable),t=fe(ue.UseNavigateStable),n=r.useRef(!1);Z((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},i)))}),[e,t]);return i}():function(){$()||u(!1);let e=r.useContext(W),{basename:t,future:n,navigator:i}=r.useContext(K),{matches:s}=r.useContext(Y),{pathname:o}=J(),a=JSON.stringify(L(s,n.v7_relativeSplatPath)),l=r.useRef(!1);return Z((()=>{l.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=M(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e])}()}function te(){let{matches:e}=r.useContext(Y),t=e[e.length-1];return t?t.params:{}}function ne(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(K),{matches:s}=r.useContext(Y),{pathname:o}=J(),a=JSON.stringify(L(s,i.v7_relativeSplatPath));return r.useMemo((()=>M(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function re(e,n,i,s){$()||u(!1);let{navigator:o}=r.useContext(K),{matches:a}=r.useContext(Y),l=a[a.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=J();if(n){var p;let e="string"===typeof n?m(n):n;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||u(!1),d=e}else d=f;let g=d.pathname||"/",y=v(e,{pathname:"/"===h?g:g.slice(h.length)||"/"});let w=le(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:F([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return n&&w?r.createElement(Q.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},w):w}function ie(){let e=function(){var e;let t=r.useContext(X),n=de(ue.UseRouteError),i=fe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const se=r.createElement(ie,null);class oe extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(W);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Y.Provider,{value:t},i)}function le(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,u=!1,d=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||se,c&&(h<0&&0===s?(p="route-fallback",!1||pe[p]||(pe[p]=!0),u=!0,f=null):h===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ae,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(oe,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function he(e){let t=r.useContext(W);return t||u(!1),t}function de(e){let t=r.useContext(G);return t||u(!1),t}function fe(e){let t=function(e){let t=r.useContext(Y);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const pe={};i.startTransition;function me(e){u(!1)}function ge(e){let{basename:n="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:l=!1,future:c}=e;$()&&u(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:a,static:l,future:H({v7_relativeSplatPath:!1},c)})),[h,c,a,l]);"string"===typeof s&&(s=m(s));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:v="default"}=s,w=r.useMemo((()=>{let e=D(f,h);return null==e?null:{location:{pathname:e,search:p,hash:g,state:y,key:v},navigationType:o}}),[h,f,p,g,y,v,o]);return null==w?null:r.createElement(K.Provider,{value:d},r.createElement(Q.Provider,{children:i,value:w}))}function ye(e){let{children:t,location:n}=e;return re(ve(t),n)}new Promise((()=>{}));r.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ve(e.props.children,s));e.type!==me&&u(!1),e.props.index&&e.props.children&&u(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ve(e.props.children,s)),n.push(o)})),n}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}function be(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;const Ee=i.startTransition;a.flushSync;function Ie(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let l=o.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},d=r.useCallback((e=>{h&&Ee?Ee((()=>u(e))):u(e)}),[u,h]);return r.useLayoutEffect((()=>l.listen(d)),[l,d]),r.createElement(ge,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const Te="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Se=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ke=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:h,preventScrollReset:d,unstable_viewTransition:f}=e,m=be(e,_e),{basename:g}=r.useContext(K),y=!1;if("string"===typeof h&&Se.test(h)&&(n=h,Te))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=D(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:y=!0}catch(b){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;$()||u(!1);let{basename:i,navigator:s}=r.useContext(K),{hash:o,pathname:a,search:l}=ne(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:F([i,a])),s.createHref({pathname:c,search:l,hash:o})}(h,{relative:s}),w=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=ee(),u=J(),h=ne(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:p(u)===p(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[u,c,h,i,s,n,e,o,a,l])}(h,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,unstable_viewTransition:f});return r.createElement("a",we({},m,{href:n||v,onClick:y||o?i:function(e){i&&i(e),e.defaultPrevented||w(e)},ref:t,target:c}))}));var Ce,xe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ce||(Ce={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(xe||(xe={}));const Ne=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ne(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Re;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Re extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const De=function(e){return function(e){const t=Ne(e);return Ae.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Pe=function(e){try{return Ae.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Oe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Oe(e[n],t[n]));return e}const Le=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Me=()=>{try{return Le()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Pe(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Fe=()=>{var e;return null===(e=Me())||void 0===e?void 0:e.config};class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ve(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(s)),""].join(".")}function Be(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ze(){var e;const t=null===(e=Me())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function je(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function qe(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function He(){const e=Be();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function We(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Ge extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ke.prototype.create)}}class Ke{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Qe,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ge(n,s,t)}}const Qe=/\{\$([^}]+)}/g;function Ye(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xe(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if($e(n)&&$e(s)){if(!Xe(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $e(e){return null!==e&&"object"===typeof e}function Je(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Ze(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function et(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function tt(e,t){const n=new nt(e,t);return n.subscribe.bind(n)}class nt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=rt),void 0===r.error&&(r.error=rt),void 0===r.complete&&(r.complete=rt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function rt(){}function it(e){return e&&e._delegate?e._delegate:e}class st{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ot="[DEFAULT]";class at{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ue;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ot})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===ot?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.component?this.component.multipleInstances?e:ot:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class lt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new at(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ct=[];var ut;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ut||(ut={}));const ht={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},dt=ut.INFO,ft={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},pt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ft[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class mt{constructor(e){this.name=e,this._logLevel=dt,this._logHandler=pt,this._userLogHandler=null,ct.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ht[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...t),this._logHandler(this,ut.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...t),this._logHandler(this,ut.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ut.INFO,...t),this._logHandler(this,ut.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ut.WARN,...t),this._logHandler(this,ut.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...t),this._logHandler(this,ut.ERROR,...t)}}const gt=(e,t)=>t.some((t=>e instanceof t));let yt,vt;const wt=new WeakMap,bt=new WeakMap,_t=new WeakMap,Et=new WeakMap,It=new WeakMap;let Tt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return bt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||_t.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ct(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function St(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(vt||(vt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(xt(this),n),Ct(wt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ct(e.apply(xt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(xt(this),t,...r);return _t.set(s,t.sort?t.sort():[t]),Ct(s)}}function kt(e){return"function"===typeof e?St(e):(e instanceof IDBTransaction&&function(e){if(bt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));bt.set(e,t)}(e),gt(e,yt||(yt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Tt):e)}function Ct(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Ct(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&wt.set(t,e)})).catch((()=>{})),It.set(t,e),t}(e);if(Et.has(e))return Et.get(e);const t=kt(e);return t!==e&&(Et.set(e,t),It.set(t,e)),t}const xt=e=>It.get(e);const Nt=["get","getKey","getAll","getAllKeys","count"],At=["put","add","delete","clear"],Rt=new Map;function Dt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Rt.get(t))return Rt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=At.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Nt.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Rt.set(t,s),s}Tt=(e=>({...e,get:(t,n,r)=>Dt(t,n)||e.get(t,n,r),has:(t,n)=>!!Dt(t,n)||e.has(t,n)}))(Tt);class Pt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Ot="@firebase/app",Lt="0.9.25",Mt=new mt("@firebase/app"),Ft="[DEFAULT]",Ut={[Ot]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Vt=new Map,Bt=new Map;function zt(e,t){try{e.container.addComponent(t)}catch(n){Mt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function jt(e,t){e.container.addOrOverwriteComponent(t)}function qt(e){const t=e.name;if(Bt.has(t))return Mt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Bt.set(t,e);for(const n of Vt.values())zt(n,e);return!0}function Ht(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Wt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ft;Ht(e,t).clearInstance(n)}function Gt(){Bt.clear()}const Kt=new Ke("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Qt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new st("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kt.create("app-deleted",{appName:this._name})}}const Yt="10.7.1";function Xt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Kt.create("bad-app-name",{appName:String(i)});if(n||(n=Fe()),!n)throw Kt.create("no-options");const s=Vt.get(i);if(s){if(Xe(n,s.options)&&Xe(r,s.config))return s;throw Kt.create("duplicate-app",{appName:i})}const o=new lt(i);for(const l of Bt.values())o.addComponent(l);const a=new Qt(n,r,o);return Vt.set(i,a),a}function $t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft;const t=Vt.get(e);if(!t&&e===Ft&&Fe())return Xt();if(!t)throw Kt.create("no-app",{appName:e});return t}function Jt(){return Array.from(Vt.values())}async function Zt(e){const t=e.name;Vt.has(t)&&(Vt.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function en(e,t,n){var r;let i=null!==(r=Ut[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Mt.warn(e.join(" "))}qt(new st("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function tn(e,t){if(null!==e&&"function"!==typeof e)throw Kt.create("invalid-log-argument");!function(e,t){for(const n of ct){let r=null;t&&t.level&&(r=ht[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:ut[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function nn(e){var t;t=e,ct.forEach((e=>{e.setLogLevel(t)}))}const rn="firebase-heartbeat-database",sn=1,on="firebase-heartbeat-store";let an=null;function ln(){return an||(an=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Ct(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Ct(o.result),e.oldVersion,e.newVersion,Ct(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(rn,sn,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(on)}}).catch((e=>{throw Kt.create("idb-open",{originalErrorMessage:e.message})}))),an}async function cn(e,t){try{const n=(await ln()).transaction(on,"readwrite"),r=n.objectStore(on);await r.put(t,un(e)),await n.done}catch(n){if(n instanceof Ge)Mt.warn(n.message);else{const e=Kt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Mt.warn(e.message)}}}function un(e){return"".concat(e.name,"!").concat(e.options.appId)}class hn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=dn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=dn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),pn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=De(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function dn(){return(new Date).toISOString().substring(0,10)}class fn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!We()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await ln();return await t.transaction(on).objectStore(on).get(un(e))}catch(t){if(t instanceof Ge)Mt.warn(t.message);else{const e=Kt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Mt.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return cn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return cn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function pn(e){return De(JSON.stringify({version:2,heartbeats:e})).length}var mn;mn="",qt(new st("platform-logger",(e=>new Pt(e)),"PRIVATE")),qt(new st("heartbeat",(e=>new hn(e)),"PRIVATE")),en(Ot,Lt,mn),en(Ot,Lt,"esm2017"),en("fire-js","");class gn{constructor(e,t){this._delegate=e,this.firebase=t,zt(e,new st("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Zt(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){zt(this._delegate,e)}_addOrOverwriteComponent(e){jt(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const yn=new Ke("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const vn=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Xt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ye(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:en,setLogLevel:nn,onLog:tn,apps:null,SDK_VERSION:Yt,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(qt(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw yn.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Oe(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ye(n,e=e||Ft))throw yn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(gn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Oe(n,e)},createSubscribe:tt,ErrorFactory:Ke,deepExtend:Oe}),n}(),wn=new mt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){wn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&wn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const bn=vn;!function(e){en("@firebase/app-compat","0.2.25",e)}();bn.registerVersion("firebase","10.7.1","app-compat");function _n(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const En={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},In="EMAIL_SIGNIN",Tn="PASSWORD_RESET",Sn="RECOVER_EMAIL",kn="REVERT_SECOND_FACTOR_ADDITION",Cn="VERIFY_AND_CHANGE_EMAIL",xn="VERIFY_EMAIL";function Nn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const An=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Rn=Nn,Dn=new Ke("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pn=new mt("@firebase/auth");function On(e){if(Pn.logLevel<=ut.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Pn.error("Auth (".concat(Yt,"): ").concat(e),...n)}}function Ln(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Vn(e,...n)}function Mn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vn(e,...n)}function Fn(e,t,n){const r=Object.assign(Object.assign({},Rn()),{[t]:n});return new Ke("auth","Firebase",r).create(t,{appName:e.name})}function Un(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ln(e,"argument-error"),Fn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Vn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Dn.create(e,...n)}function Bn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Vn(t,...r)}}function zn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw On(t),new Error(t)}function jn(e,t){e||zn(t)}function qn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Hn(){return"http:"===Wn()||"https:"===Wn()}function Wn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Gn{constructor(e,t){this.shortDelay=e,this.longDelay=t,jn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())||qe()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Hn()||je()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Kn(e,t){jn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Qn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Xn=new Gn(3e4,6e4);function $n(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Jn(e,t,n,r){return Zn(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Je(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Qn.fetch()(tr(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Zn(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Yn),t);try{const t=new rr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ir(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ir(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ir(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ir(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Fn(e,a,o);Ln(e,a)}}catch(i){if(i instanceof Ge)throw i;Ln(e,"network-request-failed",{message:String(i)})}}async function er(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Jn(e,t,n,r,i);return"mfaPendingCredential"in s&&Ln(e,"multi-factor-auth-required",{_serverResponse:s}),s}function tr(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Kn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function nr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Mn(this.auth,"network-request-failed"))),Xn.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ir(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Mn(e,t,r);return i.customData._tokenResponse=n,i}function sr(e){return void 0!==e&&void 0!==e.getResponse}function or(e){return void 0!==e&&void 0!==e.enterprise}class ar{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function lr(e,t){return Jn(e,"GET","/v2/recaptchaConfig",$n(e,t))}function cr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function ur(e){return 1e3*Number(e)}function hr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return On("JWT malformed, contained fewer than 3 sections"),null;try{const e=Pe(n);return e?JSON.parse(e):(On("Failed to decode base64 JWT payload"),null)}catch(i){return On("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function dr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Ge&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class fr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class pr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cr(this.lastLoginAt),this.creationTime=cr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function mr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await dr(e,async function(e,t){return Jn(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Bn(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=_n(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pr(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class gr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Bn(e.idToken,"internal-error"),Bn("undefined"!==typeof e.idToken,"internal-error"),Bn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=hr(e);return Bn(t,"internal-error"),Bn("undefined"!==typeof t.exp,"internal-error"),Bn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Bn(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Zn(e,{},(async()=>{const n=Je({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=tr(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Qn.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new gr;return n&&(Bn("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Bn("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Bn("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gr,this.toJSON())}_performRefresh(){return zn("not implemented")}}function yr(e,t){Bn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class vr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=_n(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new pr(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await dr(this,this.stsTokenManager.getToken(this.auth,e));return Bn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=it(e),r=await n.getIdToken(t),i=hr(r);Bn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:cr(ur(i.auth_time)),issuedAtTime:cr(ur(i.iat)),expirationTime:cr(ur(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=it(e);await mr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Bn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Bn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await mr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await dr(this,async function(e,t){return Jn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;Bn(v&&E,e,"internal-error");const I=gr.fromJSON(this.name,E);Bn("string"===typeof v,e,"internal-error"),yr(u,e.name),yr(h,e.name),Bn("boolean"===typeof w,e,"internal-error"),Bn("boolean"===typeof b,e,"internal-error"),yr(d,e.name),yr(f,e.name),yr(p,e.name),yr(m,e.name),yr(g,e.name),yr(y,e.name);const T=new vr({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(T.providerData=_.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new gr;r.updateFromServerResponse(t);const i=new vr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await mr(i),i}}const wr=new Map;function br(e){jn(e instanceof Function,"Expected a class definition");let t=wr.get(e);return t?(jn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,wr.set(e,t),t)}class _r{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_r.type="NONE";const Er=_r;function Ir(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Tr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ir(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ir("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Tr(br(Er),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||br(Er);const s=Ir(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=vr._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Tr(i,e,n)):new Tr(i,e,n)}}function Sr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Nr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(kr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Rr(t))return"Blackberry";if(Dr(t))return"Webos";if(Cr(t))return"Safari";if((t.includes("chrome/")||xr(t))&&!t.includes("edge/"))return"Chrome";if(Ar(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function kr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/firefox\//i.test(e)}function Cr(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/crios\//i.test(e)}function Nr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/iemobile/i.test(e)}function Ar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/android/i.test(e)}function Rr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/blackberry/i.test(e)}function Dr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/webos/i.test(e)}function Pr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Or(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return Pr(e)||Ar(e)||Dr(e)||Rr(e)||/windows phone/i.test(e)||Nr(e)}function Lr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Sr(Be());break;case"Worker":t="".concat(Sr(Be()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Yt,"/").concat(r)}class Mr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Fr{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Ur{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Br(this),this.idTokenSubscription=new Br(this),this.beforeStateQueue=new Mr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=br(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Tr.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Bn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mr(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?it(e):null;return t&&Bn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Bn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(br(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Jn(e,"GET","/v2/passwordPolicy",$n(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Fr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ke("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Jn(e,"POST","/v2/accounts:revokeToken",$n(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&br(e)||this._popupRedirectResolver;Bn(t,this,"argument-error"),this.redirectPersistenceManager=await Tr.create(this,[br(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Bn(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Bn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Pn.logLevel<=ut.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Pn.warn("Auth (".concat(Yt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Vr(e){return it(e)}class Br{constructor(e){this.auth=e,this.observer=null,this.addObserver=tt((e=>this.observer=e))}get next(){return Bn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function zr(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Mn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function jr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class qr{constructor(e){this.type="recaptcha-enterprise",this.auth=Vr(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;or(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{lr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new ar(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&or(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));zr("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Hr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new qr(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Wr(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Hr(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Hr(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Gr(e,t,n){const r=Vr(e);Bn(r._canInitEmulator,r,"emulator-config-failed"),Bn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Kr(t),{host:o,port:a}=function(e){const t=Kr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Qr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Qr(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Kr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Qr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Yr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zn("not implemented")}_getIdTokenResponse(e){return zn("not implemented")}_linkToIdToken(e,t){return zn("not implemented")}_getReauthenticationResolver(e){return zn("not implemented")}}async function Xr(e,t){return Jn(e,"POST","/v1/accounts:resetPassword",$n(e,t))}async function $r(e,t){return Jn(e,"POST","/v1/accounts:signUp",t)}async function Jr(e,t){return er(e,"POST","/v1/accounts:signInWithPassword",$n(e,t))}async function Zr(e,t){return Jn(e,"POST","/v1/accounts:sendOobCode",$n(e,t))}async function ei(e,t){return Zr(e,t)}async function ti(e,t){return Zr(e,t)}class ni extends Yr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ni(e,t,"password")}static _fromEmailAndCode(e,t){return new ni(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Wr(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Jr);case"emailLink":return async function(e,t){return er(e,"POST","/v1/accounts:signInWithEmailLink",$n(e,t))}(e,{email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Wr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$r);case"emailLink":return async function(e,t){return er(e,"POST","/v1/accounts:signInWithEmailLink",$n(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ri(e,t){return er(e,"POST","/v1/accounts:signInWithIdp",$n(e,t))}class ii extends Yr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ln("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=_n(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new ii(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return ri(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ri(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ri(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Je(t)}return e}}const si={USER_NOT_FOUND:"user-not-found"};class oi extends Yr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new oi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new oi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return er(e,"POST","/v1/accounts:signInWithPhoneNumber",$n(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await er(e,"POST","/v1/accounts:signInWithPhoneNumber",$n(e,t));if(n.temporaryProof)throw ir(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return er(e,"POST","/v1/accounts:signInWithPhoneNumber",$n(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),si)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new oi({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ai{constructor(e){var t,n,r,i,s,o;const a=Ze(et(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Bn(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Ze(et(e)).link,n=t?Ze(et(t)).deep_link_id:null,r=Ze(et(e)).deep_link_id;return(r?Ze(et(r)).link:null)||r||n||t||e}(e);try{return new ai(t)}catch(n){return null}}}class li{constructor(){this.providerId=li.PROVIDER_ID}static credential(e,t){return ni._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ai.parseLink(t);return Bn(n,"argument-error"),ni._fromEmailAndCode(e,n.code,n.tenantId)}}li.PROVIDER_ID="password",li.EMAIL_PASSWORD_SIGN_IN_METHOD="password",li.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ci{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ui extends ci{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class hi extends ui{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Bn("providerId"in t&&"signInMethod"in t,"argument-error"),ii._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Bn(e.idToken||e.accessToken,"argument-error"),ii._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return hi.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return hi.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new hi(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(l){return null}}}class di extends ui{constructor(){super("facebook.com")}static credential(e){return ii._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return di.credential(t.oauthAccessToken)}catch(n){return null}}}di.FACEBOOK_SIGN_IN_METHOD="facebook.com",di.PROVIDER_ID="facebook.com";class fi extends ui{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ii._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return fi.credential(n,r)}catch(i){return null}}}fi.GOOGLE_SIGN_IN_METHOD="google.com",fi.PROVIDER_ID="google.com";class pi extends ui{constructor(){super("github.com")}static credential(e){return ii._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pi.credential(t.oauthAccessToken)}catch(n){return null}}}pi.GITHUB_SIGN_IN_METHOD="github.com",pi.PROVIDER_ID="github.com";class mi extends Yr{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return ri(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ri(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ri(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new mi(n,i):null}static _create(e,t){return new mi(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class gi extends ci{constructor(e){Bn(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return gi.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return gi.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=mi.fromJSON(e);return Bn(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return mi._create(r,n)}catch(i){return null}}}class yi extends ui{constructor(){super("twitter.com")}static credential(e,t){return ii._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return yi.credential(n,r)}catch(i){return null}}}async function vi(e,t){return er(e,"POST","/v1/accounts:signUp",$n(e,t))}yi.TWITTER_SIGN_IN_METHOD="twitter.com",yi.PROVIDER_ID="twitter.com";class wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await vr._fromIdTokenResponse(e,n,r),s=bi(n);return new wi({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=bi(n);return new wi({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function bi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class _i extends Ge{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,_i.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new _i(e,t,n,r)}}function Ei(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw _i._fromErrorAndOperation(e,n,t,r);throw n}))}function Ii(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Ti(e,t){const n=it(e);await ki(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Jn(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Ii(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Si(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await dr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return wi._forOperation(e,"link",r)}async function ki(e,t,n){await mr(t);const r=!1===e?"provider-already-linked":"no-such-provider";Bn(Ii(t.providerData).has(n)===e,t.auth,r)}async function Ci(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await dr(e,Ei(r,i,t,e),n);Bn(s.idToken,r,"internal-error");const o=hr(s.idToken);Bn(o,r,"internal-error");const{sub:a}=o;return Bn(e.uid===a,r,"user-mismatch"),wi._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Ln(r,"user-mismatch"),s}}async function xi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Ei(e,r,t),s=await wi._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Ni(e,t){return xi(Vr(e),t)}async function Ai(e,t){const n=it(e);return await ki(!1,n,t.providerId),Si(n,t)}async function Ri(e,t){return Ci(it(e),t)}async function Di(e,t){const n=Vr(e),r=await async function(e,t){return er(e,"POST","/v1/accounts:signInWithCustomToken",$n(e,t))}(n,{token:t,returnSecureToken:!0}),i=await wi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Pi{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Oi._fromServerResponse(e,t):"totpInfo"in t?Li._fromServerResponse(e,t):Ln(e,"internal-error")}}class Oi extends Pi{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Oi(t)}}class Li extends Pi{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Li(t)}}function Mi(e,t,n){var r;Bn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Bn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Bn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Bn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Fi(e){const t=Vr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Ui(e,t){await async function(e,t){return Jn(e,"POST","/v1/accounts:update",$n(e,t))}(it(e),{oobCode:t})}async function Vi(e,t){const n=it(e),r=await Xr(n,{oobCode:t}),i=r.requestType;switch(Bn(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Bn(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Bn(r.mfaInfo,n,"internal-error");default:Bn(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Pi._fromServerResponse(Vr(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Bi(e,t){const n={identifier:t,continueUri:Hn()?qn():"http://localhost"},{signinMethods:r}=await async function(e,t){return Jn(e,"POST","/v1/accounts:createAuthUri",$n(e,t))}(it(e),n);return r||[]}async function zi(e,t){const n=it(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Mi(n.auth,r,t);const{email:i}=await async function(e,t){return Zr(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function ji(e,t,n){const r=it(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Mi(r.auth,i,n);const{email:s}=await async function(e,t){return Zr(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function qi(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=it(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await dr(i,async function(e,t){return Jn(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function Hi(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await dr(e,async function(e,t){return Jn(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class Wi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Gi extends Wi{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Ki extends Wi{constructor(e,t){super(e,"facebook.com",t)}}class Qi extends Gi{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Yi extends Wi{constructor(e,t){super(e,"google.com",t)}}class Xi extends Gi{constructor(e,t,n){super(e,"twitter.com",t,n)}}function $i(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=hr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Wi(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Ki(s,i);case"github.com":return new Qi(s,i);case"google.com":return new Yi(s,i);case"twitter.com":return new Xi(s,i,e.screenName||null);case"custom":case"anonymous":return new Wi(s,null);default:return new Wi(s,r,i)}}(n)}class Ji{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Ji("enroll",e,t)}static _fromMfaPendingCredential(e){return new Ji("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Ji._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Ji._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Zi{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Vr(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Pi._fromServerResponse(n,e)));Bn(r.mfaPendingCredential,n,"internal-error");const s=Ji._fromMfaPendingCredential(r.mfaPendingCredential);return new Zi(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await wi._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Bn(t.user,n,"internal-error"),wi._forOperation(t.user,t.operationType,o);default:Ln(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class es{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Pi._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new es(e)}async getSession(){return Ji._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await dr(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await dr(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},Jn(r,"POST","/v2/accounts/mfaEnrollment:withdraw",$n(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(s){throw s}var r,i}}const ts=new WeakMap;const ns="__sak";class rs{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ns,"1"),this.storage.removeItem(ns),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class is extends rs{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Be();return Cr(e)||Pr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Or(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);He()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}is.type="LOCAL";const ss=is;class os extends rs{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}os.type="SESSION";const as=os;class ls{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new ls(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function cs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ls.receivers=[];class us{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=cs("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function hs(){return window}function ds(){return"undefined"!==typeof hs().WorkerGlobalScope&&"function"===typeof hs().importScripts}const fs="firebaseLocalStorageDb",ps="firebaseLocalStorage",ms="fbase_key";class gs{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ys(e,t){return e.transaction([ps],t?"readwrite":"readonly").objectStore(ps)}function vs(){const e=indexedDB.open(fs,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ps,{keyPath:ms})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ps)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(fs);return new gs(e).toPromise()}(),t(await vs()))}))}))}async function ws(e,t,n){const r=ys(e,!0).put({[ms]:t,value:n});return new gs(r).toPromise()}function bs(e,t){const n=ys(e,!0).delete(t);return new gs(n).toPromise()}class _s{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await vs()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ds()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ls._getInstance(ds()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new us(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vs();return await ws(e,ns,"1"),await bs(e,ns),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>ws(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ys(e,!1).get(t),r=await new gs(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>bs(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ys(e,!1).getAll();return new gs(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}_s.type="LOCAL";const Es=_s;const Is=1e12;class Ts{constructor(e){this.auth=e,this.counter=Is,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Ss(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Is;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Is;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Is;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Ss{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Bn(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ks=jr("rcb"),Cs=new Gn(3e4,6e4);class xs{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=hs().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Bn(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&sr(hs().grecaptcha)?Promise.resolve(hs().grecaptcha):new Promise(((n,r)=>{const i=hs().setTimeout((()=>{r(Mn(e,"network-request-failed"))}),Cs.get());hs()[ks]=()=>{hs().clearTimeout(i),delete hs()[ks];const s=hs().grecaptcha;if(!s||!sr(s))return void r(Mn(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};zr("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Je({onload:ks,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Mn(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=hs().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ns{async load(e){return new Ts(e)}clearedOneInstance(){}}const As="recaptcha",Rs={theme:"light",type:"image"};class Ds{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Rs);this.parameters=n,this.type=As,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Vr(e),this.isInvisible="invisible"===this.parameters.size,Bn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Bn(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ns:new xs,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Bn(!this.parameters.sitekey,this.auth,"argument-error"),Bn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Bn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=hs()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Bn(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Bn(Hn()&&!ds(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Jn(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Bn(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Bn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ps{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=oi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Os(e,t,n){var r;const i=await n.verify();try{let s;if(Bn("string"===typeof i,e,"argument-error"),Bn(n.type===As,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Bn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Jn(e,"POST","/v2/accounts/mfaEnrollment:start",$n(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Bn("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Bn(n,e,"missing-multi-factor-info");const o=await function(e,t){return Jn(e,"POST","/v2/accounts/mfaSignIn:start",$n(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Jn(e,"POST","/v1/accounts:sendVerificationCode",$n(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Ls{constructor(e){this.providerId=Ls.PROVIDER_ID,this.auth=Vr(e)}verifyPhoneNumber(e,t){return Os(this.auth,e,it(t))}static credential(e,t){return oi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ls.credentialFromTaggedObject(t)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?oi._fromTokenResponse(n,r):null}}function Ms(e,t){return t?br(t):(Bn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ls.PROVIDER_ID="phone",Ls.PHONE_SIGN_IN_METHOD="phone";class Fs extends Yr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ri(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ri(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ri(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Us(e){return xi(e.auth,new Fs(e),e.bypassAuthState)}function Vs(e){const{auth:t,user:n}=e;return Bn(n,t,"internal-error"),Ci(n,new Fs(e),e.bypassAuthState)}async function Bs(e){const{auth:t,user:n}=e;return Bn(n,t,"internal-error"),Si(n,new Fs(e),e.bypassAuthState)}class zs{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Us;case"linkViaPopup":case"linkViaRedirect":return Bs;case"reauthViaPopup":case"reauthViaRedirect":return Vs;default:Ln(this.auth,"internal-error")}}resolve(e){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const js=new Gn(2e3,1e4);class qs extends zs{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,qs.currentPopupAction&&qs.currentPopupAction.cancel(),qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Bn(e,this.auth,"internal-error"),e}async onExecution(){jn(1===this.filter.length,"Popup operations only handle one event");const e=cs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Mn(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Mn(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,js.get())};e()}}qs.currentPopupAction=null;const Hs="pendingRedirect",Ws=new Map;class Gs extends zs{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ws.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Xs(t),r=Ys(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Ws.set(this.auth._key(),e)}return this.bypassAuthState||Ws.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Ks(e,t){return Ys(e)._set(Xs(t),"true")}function Qs(e,t){Ws.set(e._key(),t)}function Ys(e){return br(e._redirectPersistence)}function Xs(e){return Ir(Hs,e.config.apiKey,e.name)}function $s(e,t,n){return async function(e,t,n){const r=Vr(e);Un(e,t,ci),await r._initializationPromise;const i=Ms(r,n);return await Ks(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Js(e,t,n){return async function(e,t,n){const r=it(e);Un(r.auth,t,ci),await r.auth._initializationPromise;const i=Ms(r.auth,n);await Ks(i,r.auth);const s=await to(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function Zs(e,t,n){return async function(e,t,n){const r=it(e);Un(r.auth,t,ci),await r.auth._initializationPromise;const i=Ms(r.auth,n);await ki(!1,r,t.providerId),await Ks(i,r.auth);const s=await to(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function eo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Vr(e),i=Ms(r,t),s=new Gs(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function to(e){const t=cs("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class no{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return io(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!io(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Mn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ro(e))}saveEventToCache(e){this.cachedEventUids.add(ro(e)),this.lastProcessedEventTime=Date.now()}}function ro(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function io(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function so(e){return Jn(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const oo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ao=/^https?/;function lo(e){const t=qn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ao.test(n))return!1;if(oo.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const co=new Gn(3e4,6e4);function uo(){const e=hs().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let ho=null;function fo(e){return ho=ho||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){uo(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{uo(),n(Mn(e,"network-request-failed"))},timeout:co.get()})}if(null===(i=null===(r=hs().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=hs().gapi)||void 0===s?void 0:s.load)){const t=jr("iframefcb");return hs()[t]=()=>{gapi.load?o():n(Mn(e,"network-request-failed"))},zr("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw ho=null,e}))}(e),ho}const po=new Gn(5e3,15e3),mo="__/auth/iframe",go="emulator/auth/iframe",yo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wo(e){const t=e.config;Bn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Kn(t,go):"https://".concat(e.config.authDomain,"/").concat(mo),r={apiKey:t.apiKey,appName:e.name,v:Yt},i=vo.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Je(r).slice(1))}const bo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _o{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Eo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},bo),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Be().toLowerCase();n&&(a=xr(c)?"_blank":n),kr(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Pr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new _o(null);const h=window.open(t||"",a,u);Bn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new _o(h)}const Io="__/auth/handler",To="emulator/auth/handler",So=encodeURIComponent("fac");async function ko(e,t,n,r,i,s){Bn(e.config.authDomain,e,"auth-domain-config-required"),Bn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Yt,eventId:i};if(t instanceof ci){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof ui){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(So,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Io);return Kn(t,To)}(e),"?").concat(Je(a).slice(1)).concat(c)}const Co="webStorageSupport";const xo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=as,this._completeRedirectFn=eo,this._overrideRedirectResult=Qs}async _openPopup(e,t,n,r){var i;jn(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Eo(e,await ko(e,t,n,qn(),r),cs())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){hs().location.href=e}(await ko(e,t,n,qn(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(jn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await fo(e),n=hs().gapi;return Bn(n,e,"internal-error"),t.open({where:document.body,url:wo(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yo,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Mn(e,"network-request-failed"),s=hs().setTimeout((()=>{r(i)}),po.get());function o(){hs().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new no(e);return t.register("authEvent",(t=>{Bn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Co,{type:Co},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Co];void 0!==i&&t(!!i),Ln(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await so(e);for(const r of t)try{if(lo(r))return}catch(n){}Ln(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Or()||Cr()||Pr()}};class No{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return zn("unexpected MultiFactorSessionType")}}}class Ao extends No{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Ao(e)}_finalizeEnroll(e,t,n){return function(e,t){return Jn(e,"POST","/v2/accounts/mfaEnrollment:finalize",$n(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Jn(e,"POST","/v2/accounts/mfaSignIn:finalize",$n(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ro{constructor(){}static assertion(e){return Ao._fromCredential(e)}}Ro.FACTOR_ID="phone";var Do="@firebase/auth",Po="1.5.1";class Oo{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Bn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Me())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Lo;function Mo(){return window}Lo="Browser",qt(new st("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Bn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Lo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lr(Lo)},c=new Ur(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(br);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),qt(new st("auth-internal",(e=>(e=>new Oo(e))(Vr(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),en(Do,Po,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Lo)),en(Do,Po,"esm2017");async function Fo(e,t,n){var r;const{BuildInfo:i}=Mo();jn(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(jn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Pr()?o.ibi=i.packageName:Ar()?o.apn=i.packageName:Ln(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,ko(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function Uo(e){const{cordova:t}=Mo();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Vo=20;class Bo extends no{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function zo(e){const t=await Ho()._get(Wo(e));return t&&await Ho()._remove(Wo(e)),t}function jo(e,t){var n,r;const i=function(e){const t=Go(e),n=t.link?decodeURIComponent(t.link):void 0,r=Go(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Go(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Go(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Mn(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function qo(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Vo;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Ho(){return br(ss)}function Wo(e){return Ir("authEvent",e.config.apiKey,e.name)}function Go(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Ze(n.join("?"))}const Ko=class{constructor(){this._redirectPersistence=as,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=eo,this._overrideRedirectResult=Qs}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Bo(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Ln(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=Mo();Bn("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Bn("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Bn("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Bn("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Bn("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Ws.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:qo(),postBody:null,tenantId:e.tenantId,error:Mn(e,"no-auth-event")}}(e,n,r);await function(e,t){return Ho()._set(Wo(e),t)}(e,s);const o=await Fo(e,s,t);return async function(e,t,n){const{cordova:r}=Mo();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(Mn(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),Ar()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Uo(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Mo(),n={};Pr()?n.iosBundleId=t.packageName:Ar()?n.androidPackageName=t.packageName:Ln(e,"operation-not-supported-in-this-environment"),await so(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Mo(),s=setTimeout((async()=>{await zo(e),t.onEvent(Qo())}),500),o=async n=>{clearTimeout(s);const r=await zo(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=jo(r,n.url)),t.onEvent(i||Qo())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");Mo().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function Qo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Mn("no-auth-event")}}function Yo(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Xo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return!("file:"!==Yo()&&"ionic:"!==Yo()&&"capacitor:"!==Yo()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function $o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return He()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/Edge\/\d+/.test(e)}(e)}function Jo(){try{const e=self.localStorage,t=cs();if(e)return e.setItem(t,"1"),e.removeItem(t),!$o()||We()}catch(e){return Zo()&&We()}return!1}function Zo(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ea(){return("http:"===Yo()||"https:"===Yo()||je()||Xo())&&!(qe()||ze())&&Jo()&&!Zo()}function ta(){return Xo()&&"undefined"!==typeof document}const na={LOCAL:"local",NONE:"none",SESSION:"session"},ra=Bn,ia="persistence";async function sa(e){await e._initializationPromise;const t=oa(),n=Ir(ia,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function oa(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const aa=Bn;class la{constructor(){this.browserResolver=br(xo),this.cordovaResolver=br(Ko),this.underlyingResolver=null,this._redirectPersistence=as,this._completeRedirectFn=eo,this._overrideRedirectResult=Qs}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return ta()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return aa(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!ta()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function ca(e){return e.unwrap()}function ua(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new pa(e,function(e,t){var n;const r=it(e),i=t;return Bn(t.customData.operationType,r,"argument-error"),Bn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Zi._fromError(r,i)}(e,t))}else if(r){const e=ha(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function ha(e){const{_tokenResponse:t}=e instanceof Ge?e.customData:e;if(!t)return null;if(!(e instanceof Ge)&&"temporaryProof"in t&&"phoneNumber"in t)return Ls.credentialFromResult(e);const n=t.providerId;if(!n||n===En.PASSWORD)return null;let r;switch(n){case En.GOOGLE:r=fi;break;case En.FACEBOOK:r=di;break;case En.GITHUB:r=pi;break;case En.TWITTER:r=yi;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?mi._create(n,o):ii._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new hi(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Ge?r.credentialFromError(e):r.credentialFromResult(e)}function da(e,t){return t.catch((t=>{throw t instanceof Ge&&ua(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,ha(r)),additionalUserInfo:$i(e),user:ma.getOrCreate(n)};var r}))}async function fa(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>da(e,n.confirm(t))}}class pa{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return da(ca(this.auth),this.resolver.resolveSignIn(e))}}class ma{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=it(e);return ts.has(t)||ts.set(t,es._fromUser(t)),ts.get(t)}(e)}static getOrCreate(e){return ma.USER_MAP.has(e)||ma.USER_MAP.set(e,new ma(e)),ma.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return da(this.auth,Ai(this._delegate,e))}async linkWithPhoneNumber(e,t){return fa(this.auth,async function(e,t,n){const r=it(e);await ki(!1,r,"phone");const i=await Os(r.auth,t,it(n));return new Ps(i,(e=>Ai(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return da(this.auth,async function(e,t,n){const r=it(e);Un(r.auth,t,ci);const i=Ms(r.auth,n);return new qs(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,la))}async linkWithRedirect(e){return await sa(Vr(this.auth)),Zs(this._delegate,e,la)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return da(this.auth,Ri(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return fa(this.auth,async function(e,t,n){const r=it(e),i=await Os(r.auth,t,it(n));return new Ps(i,(e=>Ri(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return da(this.auth,async function(e,t,n){const r=it(e);Un(r.auth,t,ci);const i=Ms(r.auth,n);return new qs(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,la))}async reauthenticateWithRedirect(e){return await sa(Vr(this.auth)),Js(this._delegate,e,la)}sendEmailVerification(e){return zi(this._delegate,e)}async unlink(e){return await Ti(this._delegate,e),this}updateEmail(e){return function(e,t){return Hi(it(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Hi(it(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await Si(it(e),t)}(this._delegate,e)}updateProfile(e){return qi(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return ji(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ma.USER_MAP=new WeakMap;const ga=Bn;class ya{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;ga(n,"invalid-api-key",{appName:e.name}),ga(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?la:void 0;this._delegate=t.initialize({options:{persistence:wa(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(An),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ma.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Gr(this._delegate,e,t)}applyActionCode(e){return Ui(this._delegate,e)}checkActionCode(e){return Vi(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Xr(it(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Fi(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return da(this._delegate,async function(e,t,n){const r=Vr(e),i=Wr(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vi),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Fi(e),t})),o=await wi._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Bi(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=ai.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){ga(ea(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Vr(e)._initializationPromise,eo(e,t,!1)}(this._delegate,la);return e?da(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Vr(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=va(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=va(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Vr(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Bn(t.handleCodeInApp,r,"argument-error"),t&&Mi(r,e,t)}(i,n),await Wr(r,i,"getOobCode",ti)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Vr(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Mi(r,i,n),await Wr(r,i,"getOobCode",ei)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){ra(Object.values(na).includes(t),e,"invalid-persistence-type"),qe()?ra(t!==na.SESSION,e,"unsupported-persistence-type"):ze()?ra(t===na.NONE,e,"unsupported-persistence-type"):Zo()?ra(t===na.NONE||t===na.LOCAL&&We(),e,"unsupported-persistence-type"):ra(t===na.NONE||Jo(),e,"unsupported-persistence-type")}(this._delegate,e),e){case na.SESSION:t=as;break;case na.LOCAL:t=await br(Es)._isAvailable()?Es:ss;break;case na.NONE:t=Er;break;default:return Ln("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return da(this._delegate,async function(e){var t;const n=Vr(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new wi({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await vi(n,{returnSecureToken:!0}),i=await wi._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return da(this._delegate,Ni(this._delegate,e))}signInWithCustomToken(e){return da(this._delegate,Di(this._delegate,e))}signInWithEmailAndPassword(e,t){return da(this._delegate,function(e,t,n){return Ni(it(e),li.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Fi(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return da(this._delegate,async function(e,t,n){const r=it(e),i=li.credentialWithLink(t,n||qn());return Bn(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Ni(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return fa(this._delegate,async function(e,t,n){const r=Vr(e),i=await Os(r,t,it(n));return new Ps(i,(e=>Ni(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return ga(ea(),this._delegate,"operation-not-supported-in-this-environment"),da(this._delegate,async function(e,t,n){const r=Vr(e);Un(e,t,ci);const i=Ms(r,n);return new qs(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,la))}async signInWithRedirect(e){return ga(ea(),this._delegate,"operation-not-supported-in-this-environment"),await sa(this._delegate),$s(this._delegate,e,la)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Vi(it(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function va(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&ma.getOrCreate(e)),error:t,complete:n}}function wa(e,t){const n=function(e,t){const n=oa();if(!n)return[];const r=Ir(ia,e,t);switch(n.getItem(r)){case na.NONE:return[Er];case na.LOCAL:return[Es,as];case na.SESSION:return[as];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Es)||n.push(Es),"undefined"!==typeof window)for(const r of[ss,as])n.includes(r)||n.push(r);return n.includes(Er)||n.push(Er),n}ya.Persistence=na;class ba{constructor(){this.providerId="phone",this._delegate=new Ls(ca(bn.auth()))}static credential(e,t){return Ls.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}ba.PHONE_SIGN_IN_METHOD=Ls.PHONE_SIGN_IN_METHOD,ba.PROVIDER_ID=Ls.PROVIDER_ID;const _a=Bn;class Ea{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bn.app();var r;_a(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Ds(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var Ia;(Ia=bn).INTERNAL.registerComponent(new st("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new ya(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:In,PASSWORD_RESET:Tn,RECOVER_EMAIL:Sn,REVERT_SECOND_FACTOR_ADDITION:kn,VERIFY_AND_CHANGE_EMAIL:Cn,VERIFY_EMAIL:xn}},EmailAuthProvider:li,FacebookAuthProvider:di,GithubAuthProvider:pi,GoogleAuthProvider:fi,OAuthProvider:hi,SAMLAuthProvider:gi,PhoneAuthProvider:ba,PhoneMultiFactorGenerator:Ro,RecaptchaVerifier:Ea,TwitterAuthProvider:yi,Auth:ya,AuthCredential:Yr,Error:Ge}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ia.registerVersion("@firebase/auth-compat","0.5.1");var Ta,Sa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ka={},Ca=Ca||{},xa=Sa||self;function Na(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Aa(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ra="closure_uid_"+(1e9*Math.random()>>>0),Da=0;function Pa(e,t,n){return e.call.apply(e.bind,arguments)}function Oa(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function La(e,t,n){return(La=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Pa:Oa).apply(null,arguments)}function Ma(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Fa(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Ua(){this.s=this.s,this.o=this.o}Ua.prototype.s=!1,Ua.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Ra)&&e[Ra]||(e[Ra]=++Da))},Ua.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Va=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ba(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function za(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Na(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function ja(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ja.prototype.h=function(){this.defaultPrevented=!0};var qa=function(){if(!xa.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};xa.addEventListener("test",e,t),xa.removeEventListener("test",e,t)}catch(n){}return e}();function Ha(e){return/^[\s\xa0]*$/.test(e)}function Wa(){var e=xa.navigator;return e&&(e=e.userAgent)?e:""}function Ga(e){return-1!=Wa().indexOf(e)}function Ka(e){return Ka[" "](e),e}Ka[" "]=function(){};var Qa,Ya,Xa=Ga("Opera"),$a=Ga("Trident")||Ga("MSIE"),Ja=Ga("Edge"),Za=Ja||$a,el=Ga("Gecko")&&!(-1!=Wa().toLowerCase().indexOf("webkit")&&!Ga("Edge"))&&!(Ga("Trident")||Ga("MSIE"))&&!Ga("Edge"),tl=-1!=Wa().toLowerCase().indexOf("webkit")&&!Ga("Edge");function nl(){var e=xa.document;return e?e.documentMode:void 0}e:{var rl="",il=function(){var e=Wa();return el?/rv:([^\);]+)(\)|;)/.exec(e):Ja?/Edge\/([\d\.]+)/.exec(e):$a?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):tl?/WebKit\/(\S+)/.exec(e):Xa?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(il&&(rl=il?il[1]:""),$a){var sl=nl();if(null!=sl&&sl>parseFloat(rl)){Qa=String(sl);break e}}Qa=rl}if(xa.document&&$a){var ol=nl();Ya=ol||(parseInt(Qa,10)||void 0)}else Ya=void 0;var al=Ya;function ll(e,t){if(ja.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(el){e:{try{Ka(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:cl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ll.$.h.call(this)}}Fa(ll,ja);var cl={2:"touch",3:"pen",4:"mouse"};ll.prototype.h=function(){ll.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ul="closure_listenable_"+(1e6*Math.random()|0),hl=0;function dl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++hl,this.fa=this.ia=!1}function fl(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function pl(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function ml(e){const t={};for(const n in e)t[n]=e[n];return t}const gl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yl(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<gl.length;t++)n=gl[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function vl(e){this.src=e,this.g={},this.h=0}function wl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Va(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(fl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function bl(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}vl.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=bl(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new dl(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var _l="closure_lm_"+(1e6*Math.random()|0),El={};function Il(e,t,n,r,i){if(r&&r.once)return Sl(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Il(e,t[s],n,r,i);return null}return n=Dl(n),e&&e[ul]?e.O(t,n,Aa(r)?!!r.capture:!!r,i):Tl(e,t,n,!1,r,i)}function Tl(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Aa(i)?!!i.capture:!!i,a=Al(e);if(a||(e[_l]=a=new vl(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Nl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)qa||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(xl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Sl(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Sl(e,t[s],n,r,i);return null}return n=Dl(n),e&&e[ul]?e.P(t,n,Aa(r)?!!r.capture:!!r,i):Tl(e,t,n,!0,r,i)}function kl(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)kl(e,t[s],n,r,i);else r=Aa(r)?!!r.capture:!!r,n=Dl(n),e&&e[ul]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=bl(s=e.g[t],n,r,i))&&(fl(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Al(e))&&(t=e.g[t.toString()],e=-1,t&&(e=bl(t,n,r,i)),(n=-1<e?t[e]:null)&&Cl(n))}function Cl(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[ul])wl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(xl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Al(t))?(wl(n,e),0==n.h&&(n.src=null,t[_l]=null)):fl(e)}}}function xl(e){return e in El?El[e]:El[e]="on"+e}function Nl(e,t){if(e.fa)e=!0;else{t=new ll(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Cl(e),e=n.call(r,t)}return e}function Al(e){return(e=e[_l])instanceof vl?e:null}var Rl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dl(e){return"function"===typeof e?e:(e[Rl]||(e[Rl]=function(t){return e.handleEvent(t)}),e[Rl])}function Pl(){Ua.call(this),this.i=new vl(this),this.S=this,this.J=null}function Ol(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new ja(t,e);else if(t instanceof ja)t.target=t.target||e;else{var i=t;yl(t=new ja(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Ll(o,r,!0,t)&&i}if(i=Ll(o=t.g=e,r,!0,t)&&i,i=Ll(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Ll(o=t.g=n[s],r,!1,t)&&i}function Ll(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&wl(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Fa(Pl,Ua),Pl.prototype[ul]=!0,Pl.prototype.removeEventListener=function(e,t,n,r){kl(this,e,t,n,r)},Pl.prototype.N=function(){if(Pl.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)fl(n[r]);delete t.g[e],t.h--}}this.J=null},Pl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Pl.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ml=xa.JSON.stringify;function Fl(){var e=Hl;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ul=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Vl),(e=>e.reset()));class Vl{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Bl(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function zl(e){xa.setTimeout((()=>{throw e}),0)}let jl,ql=!1,Hl=new class{constructor(){this.h=this.g=null}add(e,t){const n=Ul.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Wl=()=>{const e=xa.Promise.resolve(void 0);jl=()=>{e.then(Gl)}};var Gl=()=>{for(var e;e=Fl();){try{e.h.call(e.g)}catch(n){zl(n)}var t=Ul;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ql=!1};function Kl(e,t){Pl.call(this),this.h=e||1,this.g=t||xa,this.j=La(this.qb,this),this.l=Date.now()}function Ql(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Yl(e,t,n){if("function"===typeof e)n&&(e=La(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=La(e.handleEvent,e)}return 2147483647<Number(t)?-1:xa.setTimeout(e,t||0)}function Xl(e){e.g=Yl((()=>{e.g=null,e.i&&(e.i=!1,Xl(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Fa(Kl,Pl),(Ta=Kl.prototype).ga=!1,Ta.T=null,Ta.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ol(this,"tick"),this.ga&&(Ql(this),this.start()))}},Ta.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ta.N=function(){Kl.$.N.call(this),Ql(this),delete this.g};class $l extends Ua{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Xl(this)}N(){super.N(),this.g&&(xa.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jl(e){Ua.call(this),this.h=e,this.g={}}Fa(Jl,Ua);var Zl=[];function ec(e,t,n,r){Array.isArray(n)||(n&&(Zl[0]=n.toString()),n=Zl);for(var i=0;i<n.length;i++){var s=Il(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function tc(e){pl(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Cl(e)}),e),e.g={}}function nc(){this.g=!0}function rc(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ml(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Jl.prototype.N=function(){Jl.$.N.call(this),tc(this)},Jl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},nc.prototype.Ea=function(){this.g=!1},nc.prototype.info=function(){};var ic={},sc=null;function oc(){return sc=sc||new Pl}function ac(e){ja.call(this,ic.Ta,e)}function lc(e){const t=oc();Ol(t,new ac(t))}function cc(e,t){ja.call(this,ic.STAT_EVENT,e),this.stat=t}function uc(e){const t=oc();Ol(t,new cc(t,e))}function hc(e,t){ja.call(this,ic.Ua,e),this.size=t}function dc(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return xa.setTimeout((function(){e()}),t)}ic.Ta="serverreachability",Fa(ac,ja),ic.STAT_EVENT="statevent",Fa(cc,ja),ic.Ua="timingevent",Fa(hc,ja);var fc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},pc={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function mc(){}function gc(e){return e.h||(e.h=e.i())}function yc(){}mc.prototype.h=null;var vc,wc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function bc(){ja.call(this,"d")}function _c(){ja.call(this,"c")}function Ec(){}function Ic(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Jl(this),this.P=Sc,e=Za?125:void 0,this.V=new Kl(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Tc}function Tc(){this.i=null,this.g="",this.h=!1}Fa(bc,ja),Fa(_c,ja),Fa(Ec,mc),Ec.prototype.g=function(){return new XMLHttpRequest},Ec.prototype.i=function(){return{}},vc=new Ec;var Sc=45e3,kc={},Cc={};function xc(e,t,n){e.L=1,e.A=Kc(jc(t)),e.u=n,e.S=!0,Nc(e,null)}function Nc(e,t){e.G=Date.now(),Pc(e),e.B=jc(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),ou(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Tc,e.g=ah(e.l,n?t:null,!e.u),0<e.O&&(e.M=new $l(La(e.Pa,e,e.g),e.O)),ec(e.U,e.g,"readystatechange",e.nb),t=e.I?ml(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),lc(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Ac(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Rc(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Dc(e,n),r==Cc){4==t&&(e.s=4,uc(14),i=!1),rc(e.j,e.m,null,"[Incomplete Response]");break}if(r==kc){e.s=4,uc(15),rc(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}rc(e.j,e.m,r,null),Uc(e,r)}Ac(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,uc(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Zu(t),t.M=!0,uc(11))):(rc(e.j,e.m,n,"[Invalid Chunked Response]"),Fc(e),Mc(e))}function Dc(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Cc:(n=Number(t.substring(n,r)),isNaN(n)?kc:(r+=1)+n>t.length?Cc:(t=t.slice(r,r+n),e.o=r+n,t))}function Pc(e){e.Y=Date.now()+e.P,Oc(e,e.P)}function Oc(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=dc(La(e.lb,e),t)}function Lc(e){e.C&&(xa.clearTimeout(e.C),e.C=null)}function Mc(e){0==e.l.H||e.J||nh(e.l,e)}function Fc(e){Lc(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ql(e.V),tc(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Uc(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||fu(n.i,e)))if(!e.K&&fu(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;th(n),Wu(n)}Ju(n),uc(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=dc(La(n.ib,n),6e3));if(1>=du(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else ih(n,11)}else if((e.K||n.g==e)&&th(n),!Ha(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(pu(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Gc(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=oh(r,r.J?r.pa:null,r.Y),o.K){mu(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Lc(a),Pc(a)),r.g=o}else $u(r);0<n.j.length&&Ku(n)}else"stop"!=c[0]&&"close"!=c[0]||ih(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ih(n,7):Hu(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}lc()}catch(c){}}function Vc(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Na(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Na(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Na(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Ta=Ic.prototype).setTimeout=function(e){this.P=e},Ta.nb=function(e){e=e.target;const t=this.M;t&&3==Uu(e)?t.l():this.Pa(e)},Ta.Pa=function(e){try{if(e==this.g)e:{const u=Uu(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Za||this.g&&(this.h.h||this.g.ja()||Vu(this.g)))){this.J||4!=u||7==t||lc(),Lc(this);var n=this.g.da();this.ca=n;t:if(Ac(this)){var r=Vu(this.g);e="";var i=r.length,s=4==Uu(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Fc(this),Mc(this);var o="";break t}this.h.i=new xa.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ha(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,uc(12),Fc(this),Mc(this);break e}rc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Uc(this,n)}this.S?(Rc(this,u,o),Za&&this.i&&3==u&&(ec(this.U,this.V,"tick",this.mb),this.V.start())):(rc(this.j,this.m,o,null),Uc(this,o)),4==u&&Fc(this),this.i&&!this.J&&(4==u?nh(this.l,this):(this.i=!1,Pc(this)))}else(function(e){const t={};e=(e.g&&2<=Uu(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Ha(e[r]))continue;var n=Bl(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,uc(12)):(this.s=0,uc(13)),Fc(this),Mc(this)}}}catch(u){}},Ta.mb=function(){if(this.g){var e=Uu(this.g),t=this.g.ja();this.o<t.length&&(Lc(this),Rc(this,e,t),this.i&&4!=e&&Pc(this))}},Ta.cancel=function(){this.J=!0,Fc(this)},Ta.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(lc(),uc(17)),Fc(this),this.s=2,Mc(this)):Oc(this,this.Y-e)};var Bc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zc(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof zc){this.h=e.h,qc(this,e.j),this.s=e.s,this.g=e.g,Hc(this,e.m),this.l=e.l;var t=e.i,n=new nu;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Wc(this,n),this.o=e.o}else e&&(t=String(e).match(Bc))?(this.h=!1,qc(this,t[1]||"",!0),this.s=Qc(t[2]||""),this.g=Qc(t[3]||"",!0),Hc(this,t[4]),this.l=Qc(t[5]||"",!0),Wc(this,t[6]||"",!0),this.o=Qc(t[7]||"")):(this.h=!1,this.i=new nu(null,this.h))}function jc(e){return new zc(e)}function qc(e,t,n){e.j=n?Qc(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Hc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Wc(e,t,n){t instanceof nu?(e.i=t,function(e,t){t&&!e.j&&(ru(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(iu(this,t),ou(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Yc(t,eu)),e.i=new nu(t,e.h))}function Gc(e,t,n){e.i.set(t,n)}function Kc(e){return Gc(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Qc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Yc(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Xc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Xc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}zc.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Yc(t,$c,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Yc(t,$c,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Yc(n,"/"==n.charAt(0)?Zc:Jc,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Yc(n,tu)),e.join("")};var $c=/[#\/\?@]/g,Jc=/[#\?:]/g,Zc=/[#\?]/g,eu=/[#\?@]/g,tu=/#/g;function nu(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ru(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function iu(e,t){ru(e),t=au(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function su(e,t){return ru(e),t=au(e,t),e.g.has(t)}function ou(e,t,n){iu(e,t),0<n.length&&(e.i=null,e.g.set(au(e,t),Ba(n)),e.h+=n.length)}function au(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ta=nu.prototype).add=function(e,t){ru(this),this.i=null,e=au(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ta.forEach=function(e,t){ru(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Ta.ta=function(){ru(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Ta.Z=function(e){ru(this);let t=[];if("string"===typeof e)su(this,e)&&(t=t.concat(this.g.get(au(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ta.set=function(e,t){return ru(this),this.i=null,su(this,e=au(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ta.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Ta.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var lu=class{constructor(e,t){this.g=e,this.map=t}};function cu(e){this.l=e||uu,xa.PerformanceNavigationTiming?e=0<(e=xa.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(xa.g&&xa.g.Ka&&xa.g.Ka()&&xa.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var uu=10;function hu(e){return!!e.h||!!e.g&&e.g.size>=e.j}function du(e){return e.h?1:e.g?e.g.size:0}function fu(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function pu(e,t){e.g?e.g.add(t):e.h=t}function mu(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function gu(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ba(e.i)}cu.prototype.cancel=function(){if(this.i=gu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var yu,vu=class{stringify(e){return xa.JSON.stringify(e,void 0)}parse(e){return xa.JSON.parse(e,void 0)}};function wu(){this.g=new vu}function bu(e,t,n){const r=n||"";try{Vc(e,(function(e,n){let i=e;Aa(e)&&(i=Ml(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function _u(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Eu(e){this.l=e.ec||null,this.j=e.ob||!1}function Iu(e,t){Pl.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Tu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fa(Eu,mc),Eu.prototype.g=function(){return new Iu(this.l,this.j)},Eu.prototype.i=(yu={},function(){return yu}),Fa(Iu,Pl);var Tu=0;function Su(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ku(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Cu(e)}function Cu(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ta=Iu.prototype).open=function(e,t){if(this.readyState!=Tu)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Cu(this)},Ta.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||xa).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Ta.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ku(this)),this.readyState=Tu},Ta.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Cu(this)),this.g&&(this.readyState=3,Cu(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof xa.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Su(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Ta.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ku(this):Cu(this),3==this.readyState&&Su(this)}},Ta.Za=function(e){this.g&&(this.response=this.responseText=e,ku(this))},Ta.Ya=function(e){this.g&&(this.response=e,ku(this))},Ta.ka=function(){this.g&&ku(this)},Ta.setRequestHeader=function(e,t){this.v.append(e,t)},Ta.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ta.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Iu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var xu=xa.JSON.parse;function Nu(e){Pl.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Au,this.L=this.M=!1}Fa(Nu,Pl);var Au="",Ru=/^https?$/i,Du=["POST","PUT"];function Pu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ou(e),Mu(e)}function Ou(e){e.F||(e.F=!0,Ol(e,"complete"),Ol(e,"error"))}function Lu(e){if(e.h&&"undefined"!=typeof Ca&&(!e.C[1]||4!=Uu(e)||2!=e.da()))if(e.v&&4==Uu(e))Yl(e.La,0,e);else if(Ol(e,"readystatechange"),4==Uu(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Bc)[1]||null;!i&&xa.self&&xa.self.location&&(i=xa.self.location.protocol.slice(0,-1)),r=!Ru.test(i?i.toLowerCase():"")}n=r}if(n)Ol(e,"complete"),Ol(e,"success");else{e.m=6;try{var s=2<Uu(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Ou(e)}}finally{Mu(e)}}}function Mu(e,t){if(e.g){Fu(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ol(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Fu(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(xa.clearTimeout(e.A),e.A=null)}function Uu(e){return e.g?e.g.readyState:0}function Vu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Au:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Gh){return null}}function Bu(e){let t="";return pl(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function zu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Bu(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Gc(e,t,n))}function ju(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function qu(e){this.Ga=0,this.j=[],this.l=new nc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ju("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ju("baseRetryDelayMs",5e3,e),this.hb=ju("retryDelaySeedMs",1e4,e),this.eb=ju("forwardChannelMaxRetries",2,e),this.xa=ju("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new cu(e&&e.concurrentRequestLimit),this.Ja=new wu,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Hu(e){if(Gu(e),3==e.H){var t=e.W++,n=jc(e.I);if(Gc(n,"SID",e.K),Gc(n,"RID",t),Gc(n,"TYPE","terminate"),Yu(e,n),(t=new Ic(e,e.l,t)).L=2,t.A=Kc(jc(n)),n=!1,xa.navigator&&xa.navigator.sendBeacon)try{n=xa.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&xa.Image&&((new Image).src=t.A,n=!0),n||(t.g=ah(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Pc(t)}sh(e)}function Wu(e){e.g&&(Zu(e),e.g.cancel(),e.g=null)}function Gu(e){Wu(e),e.u&&(xa.clearTimeout(e.u),e.u=null),th(e),e.i.cancel(),e.m&&("number"===typeof e.m&&xa.clearTimeout(e.m),e.m=null)}function Ku(e){if(!hu(e.i)&&!e.m){e.m=!0;var t=e.Na;jl||Wl(),ql||(jl(),ql=!0),Hl.add(t,e),e.C=0}}function Qu(e,t){var n;n=t?t.m:e.W++;const r=jc(e.I);Gc(r,"SID",e.K),Gc(r,"RID",n),Gc(r,"AID",e.V),Yu(e,r),e.o&&e.s&&zu(r,e.o,e.s),n=new Ic(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Xu(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),pu(e.i,n),xc(n,r,t)}function Yu(e,t){e.na&&pl(e.na,(function(e,n){Gc(t,n,e)})),e.h&&Vc({},(function(e,n){Gc(t,n,e)}))}function Xu(e,t,n){n=Math.min(e.j.length,n);var r=e.h?La(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{bu(a,e,"req"+n+"_")}catch(uf){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function $u(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;jl||Wl(),ql||(jl(),ql=!0),Hl.add(t,e),e.A=0}}function Ju(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=dc(La(e.Ma,e),rh(e,e.A)),e.A++,!0)}function Zu(e){null!=e.B&&(xa.clearTimeout(e.B),e.B=null)}function eh(e){e.g=new Ic(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=jc(e.wa);Gc(t,"RID","rpc"),Gc(t,"SID",e.K),Gc(t,"AID",e.V),Gc(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Gc(t,"TO",e.qa),Gc(t,"TYPE","xmlhttp"),Yu(e,t),e.o&&e.s&&zu(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Kc(jc(t)),n.u=null,n.S=!0,Nc(n,e)}function th(e){null!=e.v&&(xa.clearTimeout(e.v),e.v=null)}function nh(e,t){var n=null;if(e.g==t){th(e),Zu(e),e.g=null;var r=2}else{if(!fu(e.i,t))return;n=t.F,mu(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Ol(r=oc(),new hc(r,n)),Ku(e)}else $u(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(du(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=dc(La(e.Na,e,t),rh(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ju(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ih(e,5);break;case 4:ih(e,10);break;case 3:ih(e,6);break;default:ih(e,2)}}function rh(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ih(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=La(e.pb,e);n||(n=new zc("//www.google.com/images/cleardot.gif"),xa.location&&"http"==xa.location.protocol||qc(n,"https"),Kc(n)),function(e,t){const n=new nc;if(xa.Image){const r=new Image;r.onload=Ma(_u,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ma(_u,n,r,"TestLoadImage: error",!1,t),r.onabort=Ma(_u,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ma(_u,n,r,"TestLoadImage: timeout",!1,t),xa.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else uc(2);e.H=0,e.h&&e.h.za(t),sh(e),Gu(e)}function sh(e){if(e.H=0,e.ma=[],e.h){const t=gu(e.i);0==t.length&&0==e.j.length||(za(e.ma,t),za(e.ma,e.j),e.i.i.length=0,Ba(e.j),e.j.length=0),e.h.ya()}}function oh(e,t,n){var r=n instanceof zc?jc(n):new zc(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Hc(r,r.m);else{var i=xa.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new zc(null);r&&qc(s,r),t&&(s.g=t),i&&Hc(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Gc(r,n,t),Gc(r,"VER",e.ra),Yu(e,r),r}function ah(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Nu(new Eu({ob:n})):new Nu(e.va)).Oa(e.J),t}function lh(){}function ch(){if($a&&!(10<=Number(al)))throw Error("Environmental error: no available transport.")}function uh(e,t){Pl.call(this),this.g=new qu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ha(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ha(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new fh(this)}function hh(e){bc.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dh(){_c.call(this),this.status=1}function fh(e){this.g=e}function ph(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function mh(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function gh(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Ta=Nu.prototype).Oa=function(e){this.M=e},Ta.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():vc.g(),this.C=this.u?gc(this.u):gc(vc),this.g.onreadystatechange=La(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Pu(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=xa.FormData&&e instanceof xa.FormData,!(0<=Va(Du,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Fu(this),0<this.B&&((this.L=function(e){return $a&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=La(this.ua,this)):this.A=Yl(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Pu(this,s)}},Ta.ua=function(){"undefined"!=typeof Ca&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ol(this,"timeout"),this.abort(8))},Ta.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ol(this,"complete"),Ol(this,"abort"),Mu(this))},Ta.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mu(this,!0)),Nu.$.N.call(this)},Ta.La=function(){this.s||(this.G||this.v||this.l?Lu(this):this.kb())},Ta.kb=function(){Lu(this)},Ta.isActive=function(){return!!this.g},Ta.da=function(){try{return 2<Uu(this)?this.g.status:-1}catch(yu){return-1}},Ta.ja=function(){try{return this.g?this.g.responseText:""}catch(yu){return""}},Ta.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),xu(t)}},Ta.Ia=function(){return this.m},Ta.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ta=qu.prototype).ra=8,Ta.H=1,Ta.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Ic(this,this.l,e);let s=this.s;if(this.U&&(s?(s=ml(s),yl(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Xu(this,i,t),Gc(n=jc(this.I),"RID",e),Gc(n,"CVER",22),this.F&&Gc(n,"X-HTTP-Session-Id",this.F),Yu(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Bu(s)))+"&"+t:this.o&&zu(n,this.o,s)),pu(this.i,i),this.bb&&Gc(n,"TYPE","init"),this.P?(Gc(n,"$req",t),Gc(n,"SID","null"),i.aa=!0,xc(i,n,null)):xc(i,n,t),this.H=2}}else 3==this.H&&(e?Qu(this,e):0==this.j.length||hu(this.i)||Qu(this))},Ta.Ma=function(){if(this.u=null,eh(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=dc(La(this.jb,this),e)}},Ta.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,uc(10),Wu(this),eh(this))},Ta.ib=function(){null!=this.v&&(this.v=null,Wu(this),Ju(this),uc(19))},Ta.pb=function(e){e?(this.l.info("Successfully pinged google.com"),uc(2)):(this.l.info("Failed to ping google.com"),uc(1))},Ta.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ta=lh.prototype).Ba=function(){},Ta.Aa=function(){},Ta.za=function(){},Ta.ya=function(){},Ta.isActive=function(){return!0},Ta.Va=function(){},ch.prototype.g=function(e,t){return new uh(e,t)},Fa(uh,Pl),uh.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;uc(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=oh(e,null,e.Y),Ku(e)},uh.prototype.close=function(){Hu(this.g)},uh.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ml(e),e=n);t.j.push(new lu(t.fb++,e)),3==t.H&&Ku(t)},uh.prototype.N=function(){this.g.h=null,delete this.j,Hu(this.g),delete this.g,uh.$.N.call(this)},Fa(hh,bc),Fa(dh,_c),Fa(fh,lh),fh.prototype.Ba=function(){Ol(this.g,"a")},fh.prototype.Aa=function(e){Ol(this.g,new hh(e))},fh.prototype.za=function(e){Ol(this.g,new dh)},fh.prototype.ya=function(){Ol(this.g,"b")},Fa(ph,(function(){this.blockSize=-1})),ph.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ph.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)mh(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){mh(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){mh(this,r),i=0;break}}this.h=i,this.i+=t},ph.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var yh={};function vh(e){return-128<=e&&128>e?function(e,t){var n=yh;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new gh([0|e],0>e?-1:0)})):new gh([0|e],0>e?-1:0)}function wh(e){if(isNaN(e)||!isFinite(e))return _h;if(0>e)return kh(wh(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=bh;return new gh(t,0)}var bh=4294967296,_h=vh(0),Eh=vh(1),Ih=vh(16777216);function Th(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Sh(e){return-1==e.h}function kh(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new gh(n,~e.h).add(Eh)}function Ch(e,t){return e.add(kh(t))}function xh(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Nh(e,t){this.g=e,this.h=t}function Ah(e,t){if(Th(t))throw Error("division by zero");if(Th(e))return new Nh(_h,_h);if(Sh(e))return t=Ah(kh(e),t),new Nh(kh(t.g),kh(t.h));if(Sh(t))return t=Ah(e,kh(t)),new Nh(kh(t.g),t.h);if(30<e.g.length){if(Sh(e)||Sh(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Eh,r=t;0>=r.X(e);)n=Rh(n),r=Rh(r);var i=Dh(n,1),s=Dh(r,1);for(r=Dh(r,2),n=Dh(n,2);!Th(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Dh(r,1),n=Dh(n,1)}return t=Ch(e,i.R(t)),new Nh(i,t)}for(i=_h;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=wh(n)).R(t);Sh(o)||0<o.X(e);)o=(s=wh(n-=r)).R(t);Th(s)&&(s=Eh),i=i.add(s),e=Ch(e,o)}return new Nh(i,e)}function Rh(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new gh(n,e.h)}function Dh(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new gh(i,e.h)}(Ta=gh.prototype).ea=function(){if(Sh(this))return-kh(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:bh+r)*t,t*=bh}return e},Ta.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Th(this))return"0";if(Sh(this))return"-"+kh(this).toString(e);for(var t=wh(Math.pow(e,6)),n=this,r="";;){var i=Ah(n,t).g,s=((0<(n=Ch(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Th(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Ta.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Ta.X=function(e){return Sh(e=Ch(this,e))?-1:Th(e)?0:1},Ta.abs=function(){return Sh(this)?kh(this):this},Ta.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new gh(n,-2147483648&n[n.length-1]?-1:0)},Ta.R=function(e){if(Th(this)||Th(e))return _h;if(Sh(this))return Sh(e)?kh(this).R(kh(e)):kh(kh(this).R(e));if(Sh(e))return kh(this.R(kh(e)));if(0>this.X(Ih)&&0>e.X(Ih))return wh(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,xh(n,2*r+2*i),n[2*r+2*i+1]+=s*l,xh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,xh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,xh(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new gh(n,0)},Ta.gb=function(e){return Ah(this,e).h},Ta.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new gh(n,this.h&e.h)},Ta.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new gh(n,this.h|e.h)},Ta.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new gh(n,this.h^e.h)},ch.prototype.createWebChannel=ch.prototype.g,uh.prototype.send=uh.prototype.u,uh.prototype.open=uh.prototype.m,uh.prototype.close=uh.prototype.close,fc.NO_ERROR=0,fc.TIMEOUT=8,fc.HTTP_ERROR=6,pc.COMPLETE="complete",yc.EventType=wc,wc.OPEN="a",wc.CLOSE="b",wc.ERROR="c",wc.MESSAGE="d",Pl.prototype.listen=Pl.prototype.O,Nu.prototype.listenOnce=Nu.prototype.P,Nu.prototype.getLastError=Nu.prototype.Sa,Nu.prototype.getLastErrorCode=Nu.prototype.Ia,Nu.prototype.getStatus=Nu.prototype.da,Nu.prototype.getResponseJson=Nu.prototype.Wa,Nu.prototype.getResponseText=Nu.prototype.ja,Nu.prototype.send=Nu.prototype.ha,Nu.prototype.setWithCredentials=Nu.prototype.Oa,ph.prototype.digest=ph.prototype.l,ph.prototype.reset=ph.prototype.reset,ph.prototype.update=ph.prototype.j,gh.prototype.add=gh.prototype.add,gh.prototype.multiply=gh.prototype.R,gh.prototype.modulo=gh.prototype.gb,gh.prototype.compare=gh.prototype.X,gh.prototype.toNumber=gh.prototype.ea,gh.prototype.toString=gh.prototype.toString,gh.prototype.getBits=gh.prototype.D,gh.fromNumber=wh,gh.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return kh(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=wh(Math.pow(n,8)),i=_h,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=wh(Math.pow(n,o)),i=i.R(o).add(wh(a))):i=(i=i.R(r)).add(wh(a))}return i};var Ph=ka.createWebChannelTransport=function(){return new ch},Oh=ka.getStatEventTarget=function(){return oc()},Lh=ka.ErrorCode=fc,Mh=ka.EventType=pc,Fh=ka.Event=ic,Uh=ka.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Vh=(ka.FetchXmlHttpFactory=Eu,ka.WebChannel=yc),Bh=ka.XhrIo=Nu,zh=ka.Md5=ph,jh=ka.Integer=gh;const qh="@firebase/firestore";class Hh{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hh.UNAUTHENTICATED=new Hh(null),Hh.GOOGLE_CREDENTIALS=new Hh("google-credentials-uid"),Hh.FIRST_PARTY=new Hh("first-party-uid"),Hh.MOCK_USER=new Hh("mock-user");let Wh="10.7.0";const Gh=new mt("@firebase/firestore");function Kh(){return Gh.logLevel}function Qh(e){if(Gh.logLevel<=ut.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map($h);Gh.debug("Firestore (".concat(Wh,"): ").concat(e),...i)}}function Yh(e){if(Gh.logLevel<=ut.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map($h);Gh.error("Firestore (".concat(Wh,"): ").concat(e),...i)}}function Xh(e){if(Gh.logLevel<=ut.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map($h);Gh.warn("Firestore (".concat(Wh,"): ").concat(e),...i)}}function $h(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Jh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Wh,") INTERNAL ASSERTION FAILED: ")+e;throw Yh(t),new Error(t)}function Zh(e,t){e||Jh()}function ed(e,t){return e}const td={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nd extends Ge{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class rd{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class id{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class sd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Hh.UNAUTHENTICATED)))}shutdown(){}}class od{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ad{constructor(e){this.t=e,this.currentUser=Hh.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new rd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rd,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Qh("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Qh("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rd)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Qh("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Zh("string"==typeof t.accessToken),new id(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Zh(null===e||"string"==typeof e),new Hh(e)}}class ld{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Hh.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class cd{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new ld(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Hh.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ud{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hd{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Qh("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Qh("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Qh("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Qh("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Zh("string"==typeof e.token),this.R=e.token,new ud(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function dd(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class fd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=dd(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function pd(e,t){return e<t?-1:e>t?1:0}function md(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function gd(e){return e+"\0"}class yd{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new nd(td.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new nd(td.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new nd(td.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nd(td.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yd.fromMillis(Date.now())}static fromDate(e){return yd.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new yd(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pd(this.nanoseconds,e.nanoseconds):pd(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vd{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vd(e)}static min(){return new vd(new yd(0,0))}static max(){return new vd(new yd(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wd{constructor(e,t,n){void 0===t?t=0:t>e.length&&Jh(),void 0===n?n=e.length-t:n>e.length-t&&Jh(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===wd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wd?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bd extends wd{construct(e,t,n){return new bd(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new nd(td.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new bd(e)}static emptyPath(){return new bd([])}}const _d=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ed extends wd{construct(e,t,n){return new Ed(e,t,n)}static isValidIdentifier(e){return _d.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ed.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ed(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new nd(td.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new nd(td.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new nd(td.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new nd(td.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ed(t)}static emptyPath(){return new Ed([])}}class Id{constructor(e){this.path=e}static fromPath(e){return new Id(bd.fromString(e))}static fromName(e){return new Id(bd.fromString(e).popFirst(5))}static empty(){return new Id(bd.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bd.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bd.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Id(new bd(e.slice()))}}class Td{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Sd(e){return e.fields.find((e=>2===e.kind))}function kd(e){return e.fields.filter((e=>2!==e.kind))}Td.UNKNOWN_ID=-1;class Cd{constructor(e,t){this.fieldPath=e,this.kind=t}}class xd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xd(0,Rd.min())}}function Nd(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=vd.fromTimestamp(1e9===r?new yd(n+1,0):new yd(n,r));return new Rd(i,Id.empty(),t)}function Ad(e){return new Rd(e.readTime,e.key,-1)}class Rd{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Rd(vd.min(),Id.empty(),-1)}static max(){return new Rd(vd.max(),Id.empty(),-1)}}function Dd(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Id.comparator(e.documentKey,t.documentKey),0!==n?n:pd(e.largestBatchId,t.largestBatchId))}const Pd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Od{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ld(e){if(e.code!==td.FAILED_PRECONDITION||e.message!==Pd)throw e;Qh("LocalStore","Unexpectedly lost primary lease")}class Md{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Jh(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Md(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Md?t:Md.resolve(t)}catch(e){return Md.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Md.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Md.reject(t)}static resolve(e){return new Md(((t,n)=>{t(e)}))}static reject(e){return new Md(((t,n)=>{n(e)}))}static waitFor(e){return new Md(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Md.resolve(!1);for(const n of e)t=t.next((e=>e?Md.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Md(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Md(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Fd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new rd,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Bd(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Wd(t.target.error);this.V.reject(new Bd(e,n))}}static open(e,t,n,r){try{return new Fd(t,e.transaction(r,n))}catch(e){throw new Bd(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Qh("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jd(t)}}class Ud{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Ud.S(Be())&&Yh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Qh("SimpleDb","Removing database:",e),qd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!We())return!1;if(Ud.C())return!0;const e=Be(),t=Ud.S(e),n=0<t&&t<10,r=Ud.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Qh("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Bd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new nd(td.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new nd(td.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Bd(e,r))},r.onupgradeneeded=e=>{Qh("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Qh("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=Fd.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Md.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Qh("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Vd{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return qd(this.k.delete())}}class Bd extends nd{constructor(e,t){super(td.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function zd(e){return"IndexedDbTransactionError"===e.name}class jd{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Qh("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Qh("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),qd(n)}add(e){return Qh("SimpleDb","ADD",this.store.name,e,e),qd(this.store.add(e))}get(e){return qd(this.store.get(e)).next((t=>(void 0===t&&(t=null),Qh("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Qh("SimpleDb","DELETE",this.store.name,e),qd(this.store.delete(e))}count(){return Qh("SimpleDb","COUNT",this.store.name),qd(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new Md(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Md(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Qh("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new Md(((n,r)=>{t.onerror=e=>{const t=Wd(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new Md(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Vd(i),o=t(i.primaryKey,i.value,s);if(o instanceof Md){const e=o.catch((e=>(s.done(),Md.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>Md.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qd(e){return new Md(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Wd(e.target.error);n(t)}}))}let Hd=!1;function Wd(e){const t=Ud.S(Be());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new nd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Hd||(Hd=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Gd{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Qh("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Qh("IndexBackiller","Documents written: ".concat(await this.X.te()))}catch(e){zd(e)?Qh("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await Ld(e)}await this.ee(6e4)}))}}class Kd{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return Md.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Qh("IndexBackiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Qh("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Ad(t);Dd(r,n)>0&&(n=r)})),new Rd(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Qd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Yd(e){return null==e}function Xd(e){return 0===e&&1/e==-1/0}function $d(e){return"number"==typeof e&&Number.isInteger(e)&&!Xd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Jd(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ef(t)),t=Zd(e.get(n),t);return ef(t)}function Zd(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function ef(e){return e+"\x01\x01"}function tf(e){const t=e.length;if(Zh(t>=2),2===t)return Zh("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),bd.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Jh(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Jh()}s=t+2}return new bd(r)}Qd._e=-1;const nf=["userId","batchId"];function rf(e,t){return[e,Jd(t)]}function sf(e,t,n){return[e,Jd(t),n]}const of={},af=["prefixPath","collectionGroup","readTime","documentId"],lf=["prefixPath","collectionGroup","documentId"],cf=["collectionGroup","readTime","prefixPath","documentId"],uf=["canonicalId","targetId"],hf=["targetId","path"],df=["path","targetId"],ff=["collectionId","parent"],pf=["indexId","uid"],mf=["uid","sequenceNumber"],gf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yf=["indexId","uid","orderedDocumentKey"],vf=["userId","collectionPath","documentId"],wf=["userId","collectionPath","largestBatchId"],bf=["userId","collectionGroup","largestBatchId"],_f=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ef=[..._f,"documentOverlays"],If=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Tf=If,Sf=[...Tf,"indexConfiguration","indexState","indexEntries"];class kf extends Od{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Cf(e,t){const n=ed(e);return Ud.M(n.ae,t)}function xf(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Nf(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Af(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Rf{constructor(e,t){this.comparator=e,this.root=t||Pf.EMPTY}insert(e,t){return new Rf(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pf.BLACK,null,null))}remove(e){return new Rf(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pf.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Df(this.root,e,this.comparator,!1)}getReverseIterator(){return new Df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Df(this.root,e,this.comparator,!0)}}class Df{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pf{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Pf.RED,this.left=null!=r?r:Pf.EMPTY,this.right=null!=i?i:Pf.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Pf(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Pf.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Pf.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Jh();if(this.right.isRed())throw Jh();const e=this.left.check();if(e!==this.right.check())throw Jh();return e+(this.isRed()?0:1)}}Pf.EMPTY=null,Pf.RED=!0,Pf.BLACK=!1,Pf.EMPTY=new class{constructor(){this.size=0}get key(){throw Jh()}get value(){throw Jh()}get color(){throw Jh()}get left(){throw Jh()}get right(){throw Jh()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Pf(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Of{constructor(e){this.comparator=e,this.data=new Rf(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lf(this.data.getIterator())}getIteratorFrom(e){return new Lf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Of))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Of(this.comparator);return t.data=e,t}}class Lf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mf(e){return e.hasNext()?e.getNext():void 0}class Ff{constructor(e){this.fields=e,e.sort(Ed.comparator)}static empty(){return new Ff([])}unionWith(e){let t=new Of(Ed.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ff(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return md(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Uf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vf{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Uf("Invalid base64 string: "+e):e}}(e);return new Vf(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Vf(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pd(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vf.EMPTY_BYTE_STRING=new Vf("");const Bf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zf(e){if(Zh(!!e),"string"==typeof e){let t=0;const n=Bf.exec(e);if(Zh(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:jf(e.seconds),nanos:jf(e.nanos)}}function jf(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function qf(e){return"string"==typeof e?Vf.fromBase64String(e):Vf.fromUint8Array(e)}function Hf(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Wf(e){const t=e.mapValue.fields.__previous_value__;return Hf(t)?Wf(t):t}function Gf(e){const t=zf(e.mapValue.fields.__local_write_time__.timestampValue);return new yd(t.seconds,t.nanos)}class Kf{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Qf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Qf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Qf&&e.projectId===this.projectId&&e.database===this.database}}const Yf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Xf={nullValue:"NULL_VALUE"};function $f(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Hf(e)?4:hp(e)?9007199254740991:10:Jh()}function Jf(e,t){if(e===t)return!0;const n=$f(e);if(n!==$f(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gf(e).isEqual(Gf(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=zf(e.timestampValue),r=zf(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return qf(e.bytesValue).isEqual(qf(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return jf(e.geoPointValue.latitude)===jf(t.geoPointValue.latitude)&&jf(e.geoPointValue.longitude)===jf(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return jf(e.integerValue)===jf(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=jf(e.doubleValue),r=jf(t.doubleValue);return n===r?Xd(n)===Xd(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return md(e.arrayValue.values||[],t.arrayValue.values||[],Jf);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xf(n)!==xf(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Jf(n[i],r[i])))return!1;return!0}(e,t);default:return Jh()}}function Zf(e,t){return void 0!==(e.values||[]).find((e=>Jf(e,t)))}function ep(e,t){if(e===t)return 0;const n=$f(e),r=$f(t);if(n!==r)return pd(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pd(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=jf(e.integerValue||e.doubleValue),r=jf(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return tp(e.timestampValue,t.timestampValue);case 4:return tp(Gf(e),Gf(t));case 5:return pd(e.stringValue,t.stringValue);case 6:return function(e,t){const n=qf(e),r=qf(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=pd(n[i],r[i]);if(0!==e)return e}return pd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=pd(jf(e.latitude),jf(t.latitude));return 0!==n?n:pd(jf(e.longitude),jf(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=ep(n[i],r[i]);if(e)return e}return pd(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Yf.mapValue&&t===Yf.mapValue)return 0;if(e===Yf.mapValue)return 1;if(t===Yf.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=pd(r[o],s[o]);if(0!==e)return e;const t=ep(n[r[o]],i[s[o]]);if(0!==t)return t}return pd(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Jh()}}function tp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return pd(e,t);const n=zf(e),r=zf(t),i=pd(n.seconds,r.seconds);return 0!==i?i:pd(n.nanos,r.nanos)}function np(e){return rp(e)}function rp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=zf(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return qf(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Id.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=rp(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(rp(e.fields[i]));return n+"}"}(e.mapValue):Jh()}function ip(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function sp(e){return!!e&&"integerValue"in e}function op(e){return!!e&&"arrayValue"in e}function ap(e){return!!e&&"nullValue"in e}function lp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cp(e){return!!e&&"mapValue"in e}function up(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Nf(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=up(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=up(e.arrayValue.values[n]);return t}return Object.assign({},e)}function hp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function dp(e){return"nullValue"in e?Xf:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ip(Qf.empty(),Id.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Jh()}function fp(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ip(Qf.empty(),Id.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Yf:Jh()}function pp(e,t){const n=ep(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function mp(e,t){const n=ep(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class gp{constructor(e){this.value=e}static empty(){return new gp({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!cp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=up(t)}setAll(e){let t=Ed.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=up(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());cp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jf(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];cp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Nf(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new gp(up(this.value))}}function yp(e){const t=[];return Nf(e.fields,((e,n)=>{const r=new Ed([e]);if(cp(n)){const e=yp(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ff(t)}class vp{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new vp(e,0,vd.min(),vd.min(),vd.min(),gp.empty(),0)}static newFoundDocument(e,t,n,r){return new vp(e,1,t,vd.min(),n,r,0)}static newNoDocument(e,t){return new vp(e,2,t,vd.min(),vd.min(),gp.empty(),0)}static newUnknownDocument(e,t){return new vp(e,3,t,vd.min(),vd.min(),gp.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vd.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gp.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gp.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vd.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vp&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vp(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class wp{constructor(e,t){this.position=e,this.inclusive=t}}function bp(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Id.comparator(Id.fromName(o.referenceValue),n.key):ep(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function _p(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Jf(e.position[n],t.position[n]))return!1;return!0}class Ep{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ip(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Tp{}class Sp extends Tp{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Lp(e,t,n):"array-contains"===t?new Vp(e,n):"in"===t?new Bp(e,n):"not-in"===t?new zp(e,n):"array-contains-any"===t?new jp(e,n):new Sp(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Mp(e,n):new Fp(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ep(t,this.value)):null!==t&&$f(this.value)===$f(t)&&this.matchesComparison(ep(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Jh()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kp extends Tp{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new kp(e,t)}matches(e){return Cp(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Cp(e){return"and"===e.op}function xp(e){return"or"===e.op}function Np(e){return Ap(e)&&Cp(e)}function Ap(e){for(const t of e.filters)if(t instanceof kp)return!1;return!0}function Rp(e){if(e instanceof Sp)return e.field.canonicalString()+e.op.toString()+np(e.value);if(Np(e))return e.filters.map((e=>Rp(e))).join(",");{const t=e.filters.map((e=>Rp(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Dp(e,t){return e instanceof Sp?function(e,t){return t instanceof Sp&&e.op===t.op&&e.field.isEqual(t.field)&&Jf(e.value,t.value)}(e,t):e instanceof kp?function(e,t){return t instanceof kp&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Dp(n,t.filters[r])),!0)}(e,t):void Jh()}function Pp(e,t){const n=e.filters.concat(t);return kp.create(n,e.op)}function Op(e){return e instanceof Sp?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(np(e.value))}(e):e instanceof kp?function(e){return e.op.toString()+" {"+e.getFilters().map(Op).join(" ,")+"}"}(e):"Filter"}class Lp extends Sp{constructor(e,t,n){super(e,t,n),this.key=Id.fromName(n.referenceValue)}matches(e){const t=Id.comparator(e.key,this.key);return this.matchesComparison(t)}}class Mp extends Sp{constructor(e,t){super(e,"in",t),this.keys=Up("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Fp extends Sp{constructor(e,t){super(e,"not-in",t),this.keys=Up("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Up(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Id.fromName(e.referenceValue)))}class Vp extends Sp{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return op(t)&&Zf(t.arrayValue,this.value)}}class Bp extends Sp{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zf(this.value.arrayValue,t)}}class zp extends Sp{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zf(this.value.arrayValue,t)}}class jp extends Sp{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!op(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Zf(this.value.arrayValue,e)))}}class qp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Hp(e){return new qp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Wp(e){const t=ed(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Rp(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Yd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>np(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>np(e))).join(",")),t.ce=e}return t.ce}function Gp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ip(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Dp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_p(e.startAt,t.startAt)&&_p(e.endAt,t.endAt)}function Kp(e){return Id.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Qp(e,t){return e.filters.filter((e=>e instanceof Sp&&e.field.isEqual(t)))}function Yp(e,t,n){let r=Xf,i=!0;for(const s of Qp(e,t)){let e=Xf,t=!0;switch(s.op){case"<":case"<=":e=dp(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Xf}pp({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];pp({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Xp(e,t,n){let r=Yf,i=!0;for(const s of Qp(e,t)){let e=Yf,t=!0;switch(s.op){case">=":case">":e=fp(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Yf}mp({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];mp({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class $p{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Jp(e,t,n,r,i,s,o,a){return new $p(e,t,n,r,i,s,o,a)}function Zp(e){return new $p(e)}function em(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function tm(e){return null!==e.collectionGroup}function nm(e){const t=ed(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Of(Ed.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Ep(r,n))})),e.has(Ed.keyField().canonicalString())||t.le.push(new Ep(Ed.keyField(),n))}return t.le}function rm(e){const t=ed(e);return t.he||(t.he=im(t,nm(e))),t.he}function im(e,t){if("F"===e.limitType)return Hp(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Ep(e.field,t)}));const n=e.endAt?new wp(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new wp(e.startAt.position,e.startAt.inclusive):null;return Hp(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function sm(e,t){const n=e.filters.concat([t]);return new $p(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function om(e,t,n){return new $p(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function am(e,t){return Gp(rm(e),rm(t))&&e.limitType===t.limitType}function lm(e){return"".concat(Wp(rm(e)),"|lt:").concat(e.limitType)}function cm(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Op(e))).join(", "),"]")),Yd(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>np(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>np(e))).join(",")),"Target(".concat(t,")")}(rm(e)),"; limitType=").concat(e.limitType,")")}function um(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Id.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of nm(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=bp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,nm(e),t))&&!(e.endAt&&!function(e,t,n){const r=bp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,nm(e),t))}(e,t)}function hm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function dm(e){return(t,n)=>{let r=!1;for(const i of nm(e)){const e=fm(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function fm(e,t,n){const r=e.field.isKeyField()?Id.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ep(r,i):Jh()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Jh()}}class pm{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Nf(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Af(this.inner)}size(){return this.innerSize}}const mm=new Rf(Id.comparator);function gm(){return mm}const ym=new Rf(Id.comparator);function vm(){let e=ym;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function wm(e){let t=ym;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function bm(){return Em()}function _m(){return Em()}function Em(){return new pm((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Im=new Rf(Id.comparator),Tm=new Of(Id.comparator);function Sm(){let e=Tm;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const km=new Of(pd);function Cm(){return km}function xm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xd(t)?"-0":t}}function Nm(e){return{integerValue:""+e}}function Am(e,t){return $d(t)?Nm(t):xm(e,t)}class Rm{constructor(){this._=void 0}}function Dm(e,t,n){return e instanceof Lm?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Hf(t)&&(t=Wf(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Mm?Fm(e,t):e instanceof Um?Vm(e,t):function(e,t){const n=Om(e,t),r=zm(n)+zm(e.Ie);return sp(n)&&sp(e.Ie)?Nm(r):xm(e.serializer,r)}(e,t)}function Pm(e,t,n){return e instanceof Mm?Fm(e,t):e instanceof Um?Vm(e,t):n}function Om(e,t){return e instanceof Bm?function(e){return sp(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Lm extends Rm{}class Mm extends Rm{constructor(e){super(),this.elements=e}}function Fm(e,t){const n=jm(t);for(const r of e.elements)n.some((e=>Jf(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Um extends Rm{constructor(e){super(),this.elements=e}}function Vm(e,t){let n=jm(t);for(const r of e.elements)n=n.filter((e=>!Jf(e,r)));return{arrayValue:{values:n}}}class Bm extends Rm{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function zm(e){return jf(e.integerValue||e.doubleValue)}function jm(e){return op(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class qm{constructor(e,t){this.field=e,this.transform=t}}class Hm{constructor(e,t){this.version=e,this.transformResults=t}}class Wm{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wm}static exists(e){return new Wm(void 0,e)}static updateTime(e){return new Wm(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Km{}function Qm(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ig(e.key,Wm.none()):new Zm(e.key,e.data,Wm.none());{const n=e.data,r=gp.empty();let i=new Of(Ed.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new eg(e.key,r,new Ff(i.toArray()),Wm.none())}}function Ym(e,t,n){e instanceof Zm?function(e,t,n){const r=e.value.clone(),i=ng(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof eg?function(e,t,n){if(!Gm(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ng(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(tg(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Xm(e,t,n,r){return e instanceof Zm?function(e,t,n,r){if(!Gm(e.precondition,t))return n;const i=e.value.clone(),s=rg(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof eg?function(e,t,n,r){if(!Gm(e.precondition,t))return n;const i=rg(e.fieldTransforms,r,t),s=t.data;return s.setAll(tg(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Gm(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function $m(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Om(r.transform,e||null);null!=i&&(null===n&&(n=gp.empty()),n.set(r.field,i))}return n||null}function Jm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&md(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Mm&&t instanceof Mm||e instanceof Um&&t instanceof Um?md(e.elements,t.elements,Jf):e instanceof Bm&&t instanceof Bm?Jf(e.Ie,t.Ie):e instanceof Lm&&t instanceof Lm}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Zm extends Km{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class eg extends Km{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function tg(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function ng(e,t,n){const r=new Map;Zh(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Pm(o,a,n[i]))}return r}function rg(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Dm(e,s,t))}return r}class ig extends Km{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sg extends Km{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class og{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ym(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Xm(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Xm(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=_m();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Qm(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(vd.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Sm())}isEqual(e){return this.batchId===e.batchId&&md(this.mutations,e.mutations,((e,t)=>Jm(e,t)))&&md(this.baseMutations,e.baseMutations,((e,t)=>Jm(e,t)))}}class ag{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Zh(e.mutations.length===n.length);let r=Im;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new ag(e,t,n,r)}}class lg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class cg{constructor(e,t){this.count=e,this.unchangedNames=t}}var ug,hg;function dg(e){switch(e){default:return Jh();case td.CANCELLED:case td.UNKNOWN:case td.DEADLINE_EXCEEDED:case td.RESOURCE_EXHAUSTED:case td.INTERNAL:case td.UNAVAILABLE:case td.UNAUTHENTICATED:return!1;case td.INVALID_ARGUMENT:case td.NOT_FOUND:case td.ALREADY_EXISTS:case td.PERMISSION_DENIED:case td.FAILED_PRECONDITION:case td.ABORTED:case td.OUT_OF_RANGE:case td.UNIMPLEMENTED:case td.DATA_LOSS:return!0}}function fg(e){if(void 0===e)return Yh("GRPC error has no .code"),td.UNKNOWN;switch(e){case ug.OK:return td.OK;case ug.CANCELLED:return td.CANCELLED;case ug.UNKNOWN:return td.UNKNOWN;case ug.DEADLINE_EXCEEDED:return td.DEADLINE_EXCEEDED;case ug.RESOURCE_EXHAUSTED:return td.RESOURCE_EXHAUSTED;case ug.INTERNAL:return td.INTERNAL;case ug.UNAVAILABLE:return td.UNAVAILABLE;case ug.UNAUTHENTICATED:return td.UNAUTHENTICATED;case ug.INVALID_ARGUMENT:return td.INVALID_ARGUMENT;case ug.NOT_FOUND:return td.NOT_FOUND;case ug.ALREADY_EXISTS:return td.ALREADY_EXISTS;case ug.PERMISSION_DENIED:return td.PERMISSION_DENIED;case ug.FAILED_PRECONDITION:return td.FAILED_PRECONDITION;case ug.ABORTED:return td.ABORTED;case ug.OUT_OF_RANGE:return td.OUT_OF_RANGE;case ug.UNIMPLEMENTED:return td.UNIMPLEMENTED;case ug.DATA_LOSS:return td.DATA_LOSS;default:return Jh()}}(hg=ug||(ug={}))[hg.OK=0]="OK",hg[hg.CANCELLED=1]="CANCELLED",hg[hg.UNKNOWN=2]="UNKNOWN",hg[hg.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hg[hg.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hg[hg.NOT_FOUND=5]="NOT_FOUND",hg[hg.ALREADY_EXISTS=6]="ALREADY_EXISTS",hg[hg.PERMISSION_DENIED=7]="PERMISSION_DENIED",hg[hg.UNAUTHENTICATED=16]="UNAUTHENTICATED",hg[hg.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hg[hg.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hg[hg.ABORTED=10]="ABORTED",hg[hg.OUT_OF_RANGE=11]="OUT_OF_RANGE",hg[hg.UNIMPLEMENTED=12]="UNIMPLEMENTED",hg[hg.INTERNAL=13]="INTERNAL",hg[hg.UNAVAILABLE=14]="UNAVAILABLE",hg[hg.DATA_LOSS=15]="DATA_LOSS";let pg=null;function mg(){return new TextEncoder}const gg=new jh([4294967295,4294967295],0);function yg(e){const t=mg().encode(e),n=new zh;return n.update(t),new Uint8Array(n.digest())}function vg(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new jh([n,r],0),new jh([i,s],0)]}class wg{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new bg("Invalid padding: ".concat(t));if(n<0)throw new bg("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new bg("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new bg("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=jh.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(jh.fromNumber(n)));return 1===r.compare(gg)&&(r=new jh([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=yg(e),[n,r]=vg(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new wg(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=yg(e),[n,r]=vg(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class bg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class _g{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Eg.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new _g(vd.min(),r,new Rf(pd),gm(),Sm())}}class Eg{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Eg(n,t,Sm(),Sm(),Sm())}}class Ig{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Tg{constructor(e,t){this.targetId=e,this.fe=t}}class Sg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vf.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class kg{constructor(){this.ge=0,this.pe=Ng(),this.ye=Vf.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Sm(),t=Sm(),n=Sm();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Jh()}})),new Eg(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Ng()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Zh(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Cg{constructor(e){this.Le=e,this.ke=new Map,this.qe=gm(),this.Qe=xg(),this.Ke=new Rf(pd)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Jh()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Kp(i))if(0===n){const e=new Id(i.path);this.We(t,e,vp.newNoDocument(e,vd.min()))}else Zh(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==pg||pg.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=qf(n).toUint8Array()}catch(e){if(e instanceof Uf)return Xh("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new wg(s,r,i)}catch(e){return Xh(e instanceof bg?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Kp(i.target)){const t=new Id(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,vp.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Sm();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new _g(e,t,this.Ke,this.qe,n);return this.qe=gm(),this.Qe=xg(),this.Ke=new Rf(pd),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new kg,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Of(pd),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Qh("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new kg),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function xg(){return new Rf(Id.comparator)}function Ng(){return new Rf(Id.comparator)}const Ag={asc:"ASCENDING",desc:"DESCENDING"},Rg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dg={and:"AND",or:"OR"};class Pg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Og(e,t){return e.useProto3Json||Yd(t)?t:{value:t}}function Lg(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Mg(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Fg(e,t){return Lg(e,t.toTimestamp())}function Ug(e){return Zh(!!e),vd.fromTimestamp(function(e){const t=zf(e);return new yd(t.seconds,t.nanos)}(e))}function Vg(e,t){return function(e){return new bd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Bg(e){const t=bd.fromString(e);return Zh(ly(t)),t}function zg(e,t){return Vg(e.databaseId,t.path)}function jg(e,t){const n=Bg(t);if(n.get(1)!==e.databaseId.projectId)throw new nd(td.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new nd(td.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Id(Gg(n))}function qg(e,t){return Vg(e.databaseId,t)}function Hg(e){const t=Bg(e);return 4===t.length?bd.emptyPath():Gg(t)}function Wg(e){return new bd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gg(e){return Zh(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Kg(e,t,n){return{name:zg(e,t),fields:n.value.mapValue.fields}}function Qg(e,t,n){const r=jg(e,t.name),i=Ug(t.updateTime),s=t.createTime?Ug(t.createTime):vd.min(),o=new gp({mapValue:{fields:t.fields}}),a=vp.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Yg(e,t){let n;if(t instanceof Zm)n={update:Kg(e,t.key,t.value)};else if(t instanceof ig)n={delete:zg(e,t.key)};else if(t instanceof eg)n={update:Kg(e,t.key,t.data),updateMask:ay(t.fieldMask)};else{if(!(t instanceof sg))return Jh();n={verify:zg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Lm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Um)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Bm)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Jh()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Fg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Jh()}(e,t.precondition)),n}function Xg(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Wm.updateTime(Ug(e.updateTime)):void 0!==e.exists?Wm.exists(e.exists):Wm.none()}(t.currentDocument):Wm.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Zh("REQUEST_TIME"===t.setToServerValue),n=new Lm;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Mm(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Um(e)}else"increment"in t?n=new Bm(e,t.increment):Jh();const r=Ed.fromServerFormat(t.fieldPath);return new qm(r,n)}(e,t))):[];if(t.update){t.update.name;const i=jg(e,t.update.name),s=new gp({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Ff(t.map((e=>Ed.fromServerFormat(e))))}(t.updateMask);return new eg(i,s,e,n,r)}return new Zm(i,s,n,r)}if(t.delete){const r=jg(e,t.delete);return new ig(r,n)}if(t.verify){const r=jg(e,t.verify);return new sg(r,n)}return Jh()}function $g(e,t){return{documents:[qg(e,t.path)]}}function Jg(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=qg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=qg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return oy(kp.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:iy(e.field),direction:ty(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Og(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Zg(e){let t=Hg(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Zh(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=ey(e);return t instanceof kp&&Np(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Ep(sy(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Yd(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new wp(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new wp(n,t)}(n.endAt)),Jp(t,i,o,s,a,"F",l,c)}function ey(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=sy(e.unaryFilter.field);return Sp.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=sy(e.unaryFilter.field);return Sp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=sy(e.unaryFilter.field);return Sp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=sy(e.unaryFilter.field);return Sp.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Jh()}}(e):void 0!==e.fieldFilter?function(e){return Sp.create(sy(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jh()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return kp.create(e.compositeFilter.filters.map((e=>ey(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Jh()}}(e.compositeFilter.op))}(e):Jh()}function ty(e){return Ag[e]}function ny(e){return Rg[e]}function ry(e){return Dg[e]}function iy(e){return{fieldPath:e.canonicalString()}}function sy(e){return Ed.fromServerFormat(e.fieldPath)}function oy(e){return e instanceof Sp?function(e){if("=="===e.op){if(lp(e.value))return{unaryFilter:{field:iy(e.field),op:"IS_NAN"}};if(ap(e.value))return{unaryFilter:{field:iy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(lp(e.value))return{unaryFilter:{field:iy(e.field),op:"IS_NOT_NAN"}};if(ap(e.value))return{unaryFilter:{field:iy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:iy(e.field),op:ny(e.op),value:e.value}}}(e):e instanceof kp?function(e){const t=e.getFilters().map((e=>oy(e)));return 1===t.length?t[0]:{compositeFilter:{op:ry(e.op),filters:t}}}(e):Jh()}function ay(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ly(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class cy{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vd.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vd.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Vf.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new cy(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new cy(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class uy{constructor(e){this.ut=e}}function hy(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:dy(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:zg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Lg(e,t.version.toTimestamp()),createTime:Lg(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:fy(t.version)};else{if(!t.isUnknownDocument())return Jh();r.unknownDocument={path:n.path.toArray(),version:fy(t.version)}}return r}function dy(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function fy(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function py(e){const t=new yd(e.seconds,e.nanoseconds);return vd.fromTimestamp(t)}function my(e,t){const n=(t.baseMutations||[]).map((t=>Xg(e.ut,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Xg(e.ut,t))),i=yd.fromMillis(t.localWriteTimeMs);return new og(t.batchId,i,n,r)}function gy(e){const t=py(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?py(e.lastLimboFreeSnapshotVersion):vd.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Zh(1===e.documents.length),rm(Zp(Hg(e.documents[0])))}(e.query):function(e){return rm(Zg(e))}(e.query),new cy(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Vf.fromBase64String(e.resumeToken))}function yy(e,t){const n=fy(t.snapshotVersion),r=fy(t.lastLimboFreeSnapshotVersion);let i;i=Kp(t.target)?$g(e.ut,t.target):Jg(e.ut,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Wp(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function vy(e){const t=Zg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?om(t,t.limit,"L"):t}function wy(e,t){return new lg(t.largestBatchId,Xg(e.ut,t.overlayMutation))}function by(e,t){const n=t.path.lastSegment();return[e,Jd(t.path.popLast()),n]}function _y(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:fy(r.readTime),documentKey:Jd(r.documentKey.path),largestBatchId:r.largestBatchId}}class Ey{getBundleMetadata(e,t){return Iy(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:py(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Iy(e).put(function(e){return{bundleId:e.id,createTime:fy(Ug(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Ty(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:vy(e.bundledQuery),readTime:py(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Ty(e).put(function(e){return{name:e.name,readTime:fy(Ug(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Iy(e){return Cf(e,"bundles")}function Ty(e){return Cf(e,"namedQueries")}class Sy{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new Sy(e,n)}getOverlay(e,t){return ky(e).get(by(this.userId,t)).next((e=>e?wy(this.serializer,e):null))}getOverlays(e,t){const n=bm();return Md.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new lg(t,i);r.push(this.lt(e,s))})),Md.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Jd(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(ky(e).H("collectionPathOverlayIndex",r))})),Md.waitFor(i)}getOverlaysForCollection(e,t,n){const r=bm(),i=Jd(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ky(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=wy(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=bm();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ky(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=wy(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return ky(e).put(function(e,t,n){const[r,i,s]=by(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Yg(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function ky(e){return Cf(e,"documentOverlays")}class Cy{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(jf(e.integerValue));else if("doubleValue"in e){const n=jf(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Xd(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(qf(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?hp(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Jh()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),Id.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function xy(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Ny(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=xy(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Cy.St=new Cy;class Ay{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Bt(e),n=Ny(t);this.Lt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),n=Ny(t);this.Lt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Ry{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Dy{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Py{constructor(){this.Wt=new Ay,this.Gt=new Ry(this.Wt),this.zt=new Dy(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Oy{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Oy(this.indexId,this.documentKey,this.arrayValue,n)}}function Ly(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=My(e.arrayValue,t.arrayValue),0!==n?n:(n=My(e.directionalValue,t.directionalValue),0!==n?n:Id.comparator(e.documentKey,t.documentKey)))}function My(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Fy{constructor(e){this.Jt=new Of(((e,t)=>Ed.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(Zh(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=Sd(e);if(void 0!==t&&!this.tn(t))return!1;const n=kd(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Yt.length||!this.rn(this.Yt[s++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new Of(Ed.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Cd(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Cd(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Cd(n.field,"asc"===n.dir?0:1)));return new Td(Td.UNKNOWN_ID,this.collectionId,t,xd.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Uy(e){var t,n;if(Zh(e instanceof Sp||e instanceof kp),e instanceof Sp){if(e instanceof Bp){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Sp.create(e.field,"==",t))))||[];return kp.create(r,"or")}return e}const r=e.filters.map((e=>Uy(e)));return kp.create(r,e.op)}function Vy(e){if(0===e.getFilters().length)return[];const t=qy(Uy(e));return Zh(jy(t)),By(t)||zy(t)?[t]:t.getFilters()}function By(e){return e instanceof Sp}function zy(e){return e instanceof kp&&Np(e)}function jy(e){return By(e)||zy(e)||function(e){if(e instanceof kp&&xp(e)){for(const t of e.getFilters())if(!By(t)&&!zy(t))return!1;return!0}return!1}(e)}function qy(e){if(Zh(e instanceof Sp||e instanceof kp),e instanceof Sp)return e;if(1===e.filters.length)return qy(e.filters[0]);const t=e.filters.map((e=>qy(e)));let n=kp.create(t,e.op);return n=Gy(n),jy(n)?n:(Zh(n instanceof kp),Zh(Cp(n)),Zh(n.filters.length>1),n.filters.reduce(((e,t)=>Hy(e,t))))}function Hy(e,t){let n;return Zh(e instanceof Sp||e instanceof kp),Zh(t instanceof Sp||t instanceof kp),n=e instanceof Sp?t instanceof Sp?function(e,t){return kp.create([e,t],"and")}(e,t):Wy(e,t):t instanceof Sp?Wy(t,e):function(e,t){if(Zh(e.filters.length>0&&t.filters.length>0),Cp(e)&&Cp(t))return Pp(e,t.getFilters());const n=xp(e)?e:t,r=xp(e)?t:e,i=n.filters.map((e=>Hy(e,r)));return kp.create(i,"or")}(e,t),Gy(n)}function Wy(e,t){if(Cp(t))return Pp(t,e.getFilters());{const n=t.filters.map((t=>Hy(e,t)));return kp.create(n,"or")}}function Gy(e){if(Zh(e instanceof Sp||e instanceof kp),e instanceof Sp)return e;const t=e.getFilters();if(1===t.length)return Gy(t[0]);if(Ap(e))return e;const n=t.map((e=>Gy(e))),r=[];return n.forEach((t=>{t instanceof Sp?r.push(t):t instanceof kp&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:kp.create(r,e.op)}class Ky{constructor(){this.on=new Qy}addToCollectionParentIndex(e,t){return this.on.add(t),Md.resolve()}getCollectionParents(e,t){return Md.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return Md.resolve()}deleteFieldIndex(e,t){return Md.resolve()}deleteAllFieldIndexes(e){return Md.resolve()}createTargetIndexes(e,t){return Md.resolve()}getDocumentsMatchingTarget(e,t){return Md.resolve(null)}getIndexType(e,t){return Md.resolve(0)}getFieldIndexes(e,t){return Md.resolve([])}getNextCollectionGroupToUpdate(e){return Md.resolve(null)}getMinOffset(e,t){return Md.resolve(Rd.min())}getMinOffsetFromCollectionGroup(e,t){return Md.resolve(Rd.min())}updateCollectionGroup(e,t,n){return Md.resolve()}updateIndexEntries(e,t){return Md.resolve()}}class Qy{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Of(bd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Of(bd.comparator)).toArray()}}const Yy=new Uint8Array(0);class Xy{constructor(e,t){this.user=e,this.databaseId=t,this._n=new Qy,this.an=new pm((e=>Wp(e)),((e,t)=>Gp(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:Jd(r)};return $y(e).put(i)}return Md.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[gd(t),""],!1,!0);return $y(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(tf(r.parent))}return n}))}addFieldIndex(e,t){const n=Zy(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=ev(e);return i.next((e=>{n.put(_y(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Zy(e),r=ev(e),i=Jy(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Zy(e),n=Jy(e),r=ev(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return Md.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Fy(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Jy(e);let r=!0;const i=new Map;return Md.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Sm();const r=[];return Md.forEach(i,((i,s)=>{Qh("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Wp(t)));const o=function(e,t){const n=Sd(t);if(void 0===n)return null;for(const r of Qp(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of kd(t))for(const t of Qp(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of kd(t)){const t=0===i.kind?Yp(e,i.fieldPath,e.startAt):Xp(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new wp(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of kd(t)){const t=0===i.kind?Xp(e,i.fieldPath,e.endAt):Yp(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new wp(n,r)}(s,i),u=this.ln(i,s,l),h=this.ln(i,s,c),d=this.hn(i,s,a),f=this.Pn(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return Md.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=Id.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Md.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:Vy(kp.create(e.filters,"and")).map((t=>Hp(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.In(t[u/l]):Yy,h=this.Tn(e,a,n[u%l],r),d=this.En(e,a,i[u%l],s),f=o.map((t=>this.Tn(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}Tn(e,t,n,r){const i=new Oy(e,Id.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new Oy(e,Id.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new Fy(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return Md.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Of(Ed.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new Py;for(const r of kd(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);Cy.St.ht(e,i)}return n.Ut()}In(e){const t=new Py;return Cy.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new Py;return Cy.St.ht(ip(this.databaseId,t),n.jt(function(e){const t=kd(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new Py);let i=0;for(const s of kd(e)){const e=n[i++];for(const n of r)if(this.Rn(t,s.fieldPath)&&op(e))r=this.Vn(r,s,e);else{const t=n.jt(s.kind);Cy.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Py;n.seed(e.Ut()),Cy.St.ht(s,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof Sp&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Zy(e),r=ev(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return Md.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new xd(t.sequenceNumber,new Rd(py(t.readTime),new Id(tf(t.documentKey)),t.largestBatchId)):xd.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Cd(Ed.fromServerFormat(t),n)}));return new Td(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:pd(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Zy(e),i=ev(e);return this.fn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Md.forEach(t,(t=>i.put(_y(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Md.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Md.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Md.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?Md.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return Jy(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return Jy(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=Jy(e);let i=new Of(Ly);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new Oy(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new Of(Ly);const r=this.dn(t,e);if(null==r)return n;const i=Sd(t);if(null!=i){const s=e.data.field(i.fieldPath);if(op(s))for(const i of s.arrayValue.values||[])n=n.add(new Oy(t.indexId,e.key,this.In(i),r))}else n=n.add(new Oy(t.indexId,e.key,Yy,r));return n}yn(e,t,n,r,i){Qh("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Mf(s),l=Mf(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Mf(o)):t?(i(a),a=Mf(s)):(a=Mf(s),l=Mf(o))}}(r,i,Ly,(r=>{s.push(this.wn(e,t,n,r))}),(r=>{s.push(this.Sn(e,t,n,r))})),Md.waitFor(s)}fn(e){let t=1;return ev(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Ly(e,t))).filter(((e,t,n)=>!t||0!==Ly(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Ly(s,e),i=Ly(s,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(s),r.push(s.Ht());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Yy,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Yy,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return Ly(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(tv)}getMinOffset(e,t){return Md.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||Jh())))).next(tv)}}function $y(e){return Cf(e,"collectionParents")}function Jy(e){return Cf(e,"indexEntries")}function Zy(e){return Cf(e,"indexConfiguration")}function ev(e){return Cf(e,"indexState")}function tv(e){Zh(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Dd(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Rd(t.readTime,t.documentKey,n)}const nv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rv{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new rv(e,rv.DEFAULT_COLLECTION_PERCENTILE,rv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function iv(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Zh(1===a)})));const c=[];for(const u of n.mutations){const e=sf(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return Md.waitFor(s).next((()=>c))}function sv(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Jh();t=e.noDocument}return JSON.stringify(t).length}rv.DEFAULT_COLLECTION_PERCENTILE=10,rv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rv.DEFAULT=new rv(41943040,rv.DEFAULT_COLLECTION_PERCENTILE,rv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rv.DISABLED=new rv(-1,0,0);class ov{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){Zh(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new ov(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lv(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=cv(e),s=lv(e);return s.add({}).next((o=>{Zh("number"==typeof o);const a=new og(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Yg(e.ut,t))),i=n.mutations.map((t=>Yg(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new Of(((e,t)=>pd(e.canonicalString(),t.canonicalString())));for(const e of r){const t=sf(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,of))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[o]=a.keys()})),Md.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return lv(e).get(t).next((e=>e?(Zh(e.userId===this.userId),my(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?Md.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return lv(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Zh(t.batchId>=n),i=my(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return lv(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lv(e).W("userMutationsIndex",t).next((e=>e.map((e=>my(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=rf(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return cv(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,c=tf(a);if(o===this.userId&&t.path.isEqual(c))return lv(e).get(l).next((e=>{if(!e)throw Jh();Zh(e.userId===this.userId),i.push(my(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Of(pd);const r=[];return t.forEach((t=>{const i=rf(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=cv(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=tf(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Md.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=rf(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Of(pd);return cv(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,c=tf(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(lv(e).get(t).next((e=>{if(null===e)throw Jh();Zh(e.userId===this.userId),n.push(my(this.serializer,e))})))})),Md.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return iv(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),Md.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Md.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return cv(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=tf(e[1]);r.push(t)}else n.done()})).next((()=>{Zh(0===r.length)}))}))}containsKey(e,t){return av(e,this.userId,t)}Mn(e){return uv(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function av(e,t,n){const r=rf(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return cv(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function lv(e){return Cf(e,"mutations")}function cv(e){return Cf(e,"documentMutations")}function uv(e){return Cf(e,"mutationQueues")}class hv{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new hv(0)}static Nn(){return new hv(-1)}}class dv{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new hv(t.highestTargetId);return t.highestTargetId=n.next(),this.Ln(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>vd.fromTimestamp(new yd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Ln(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>fv(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Zh(t.targetCount>0),t.targetCount-=1,this.Ln(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return fv(e).Y(((s,o)=>{const a=gy(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Md.waitFor(i))).next((()=>r))}forEachTarget(e,t){return fv(e).Y(((e,n)=>{const r=gy(n);t(r)}))}Bn(e){return pv(e).get("targetGlobalKey").next((e=>(Zh(null!==e),e)))}Ln(e,t){return pv(e).put("targetGlobalKey",t)}kn(e,t){return fv(e).put(yy(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Wp(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return fv(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=gy(n);Gp(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=mv(e);return t.forEach((t=>{const s=Jd(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Md.waitFor(r)}removeMatchingKeys(e,t,n){const r=mv(e);return Md.forEach(t,(t=>{const i=Jd(t.path);return Md.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=mv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=mv(e);let i=Sm();return r.Y({range:n,J:!0},((e,t,n)=>{const r=tf(e[1]),s=new Id(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Jd(t.path),r=IDBKeyRange.bound([n],[gd(n)],!1,!0);let i=0;return mv(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return fv(e).get(t).next((e=>e?gy(e):null))}}function fv(e){return Cf(e,"targets")}function pv(e){return Cf(e,"targetGlobal")}function mv(e){return Cf(e,"targetDocuments")}function gv(e,t){let[n,r]=e,[i,s]=t;const o=pd(n,i);return 0===o?pd(r,s):o}class yv{constructor(e){this.Qn=e,this.buffer=new Of(gv),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();gv(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vv{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){Qh("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){zd(e)?Qh("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Ld(e)}await this.Gn(3e5)}))}}class wv{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Md.resolve(Qd._e);const n=new yv(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Qh("LruGarbageCollector","Garbage collection skipped; disabled"),Md.resolve(nv)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Qh("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),nv):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Qh("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Kh()<=ut.DEBUG&&Qh("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Md.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function bv(e,t){return new wv(e,t)}class _v{constructor(e,t){this.db=e,this.garbageCollector=bv(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return Ev(e,n)}removeReference(e,t,n){return Ev(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Ev(e,t)}Xn(e,t){return function(e,t){let n=!1;return uv(e).Z((r=>av(e,r,t).next((e=>(e&&(n=!0),Md.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,vd.min()),mv(e).delete(function(e){return[0,Jd(e.path)]}(s)))))}));r.push(t)}})).next((()=>Md.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Ev(e,t)}Zn(e,t){const n=mv(e);let r,i=Qd._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Qd._e&&t(new Id(tf(r)),i),i=l,r=a):i=Qd._e})).next((()=>{i!==Qd._e&&t(new Id(tf(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ev(e,t){return mv(e).put(function(e,t){return{targetId:0,path:Jd(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Iv{constructor(){this.changes=new pm((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vp.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Md.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Tv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return xv(e).put(n)}removeEntry(e,t,n){return xv(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],dy(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=vp.newInvalidDocument(t);return xv(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Nv(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:vp.newInvalidDocument(t)};return xv(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Nv(t))},((e,r)=>{n={document:this.tr(t,r),size:sv(r)}})).next((()=>n))}getEntries(e,t){let n=gm();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=gm(),r=new Rf(Id.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,sv(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return Md.resolve();let r=new Of(Rv);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Nv(r.first()),Nv(r.last())),s=r.getIterator();let o=s.getNext();return xv(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Id.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Rv(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(Nv(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),dy(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xv(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=gm();for(const i of e){const e=this.tr(Id.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(um(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=gm();const s=Av(t,n),o=Av(t,Rd.max());return xv(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.tr(Id.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new kv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Cv(e).get("remoteDocumentGlobalKey").next((e=>(Zh(!!e),e)))}er(e,t){return Cv(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Qg(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Id.fromSegments(t.noDocument.path),r=py(t.noDocument.readTime);n=vp.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Jh();{const e=Id.fromSegments(t.unknownDocument.path),r=py(t.unknownDocument.version);n=vp.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new yd(e[0],e[1]);return vd.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(vd.min()))return e}return vp.newInvalidDocument(e)}}function Sv(e){return new Tv(e)}class kv extends Iv{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new pm((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Of(((e,t)=>pd(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=hy(this._r.serializer,s);r=r.add(i.path.popLast());const l=sv(a);n+=l-o.size,t.push(this._r.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=hy(this._r.serializer,s.convertToNoDocument(vd.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),Md.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Cv(e){return Cf(e,"remoteDocumentGlobal")}function xv(e){return Cf(e,"remoteDocumentsV14")}function Nv(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Av(e,t){const n=t.documentKey.path.toArray();return[e,dy(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Rv(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=pd(n[s],r[s]),i)return i;return i=pd(n.length,r.length),i||(i=pd(n[n.length-2],r[r.length-2]),i||pd(n[n.length-1],r[r.length-1]))}class Dv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Pv{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Xm(n.mutation,e,Ff.empty(),yd.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Sm()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sm();const r=bm();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=vm();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=bm();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Sm())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=gm();const s=Em(),o=Em();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof eg)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Xm(o.mutation,t,o.mutation.getFieldMask(),yd.now())):s.set(t.key,Ff.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Dv(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Em();let r=new Rf(((e,t)=>e-t)),i=Sm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Ff.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Sm()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=_m();l.forEach((e=>{if(!i.has(e)){const r=Qm(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Md.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Id.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Md.resolve(bm());let o=-1,a=i;return s.next((t=>Md.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Md.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Sm()))).next((e=>({batchId:o,changes:wm(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Id(t)).next((e=>{let t=vm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=vm();return this.indexManager.getCollectionParents(e,i).next((o=>Md.forEach(o,(o=>{const a=function(e,t){return new $p(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,vp.newInvalidDocument(r)))}));let n=vm();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Xm(s.mutation,r,Ff.empty(),yd.now()),um(t,r)&&(n=n.insert(e,r))})),n}))}}class Ov{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return Md.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ug(e.createTime)}}(t)),Md.resolve()}getNamedQuery(e,t){return Md.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:vy(e.bundledQuery),readTime:Ug(e.readTime)}}(t)),Md.resolve()}}class Lv{constructor(){this.overlays=new Rf(Id.comparator),this.lr=new Map}getOverlay(e,t){return Md.resolve(this.overlays.get(t))}getOverlays(e,t){const n=bm();return Md.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),Md.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),Md.resolve()}getOverlaysForCollection(e,t,n){const r=bm(),i=t.length+1,s=new Id(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Md.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Rf(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=bm(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=bm(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Md.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new lg(t,n));let i=this.lr.get(t);void 0===i&&(i=Sm(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class Mv{constructor(){this.hr=new Of(Fv.Pr),this.Ir=new Of(Fv.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new Fv(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new Fv(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new Id(new bd([])),n=new Fv(t,e),r=new Fv(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new Id(new bd([])),n=new Fv(t,e),r=new Fv(t,e+1);let i=Sm();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Fv(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Fv{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return Id.comparator(e.key,t.key)||pd(e.gr,t.gr)}static Tr(e,t){return pd(e.gr,t.gr)||Id.comparator(e.key,t.key)}}class Uv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Of(Fv.Pr)}checkEmpty(e){return Md.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new og(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new Fv(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Md.resolve(s)}lookupMutationBatch(e,t){return Md.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return Md.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Md.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return Md.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Fv(t,0),r=new Fv(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),Md.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Of(pd);return t.forEach((e=>{const t=new Fv(e,0),r=new Fv(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),Md.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Id.isDocumentKey(i)||(i=i.child(""));const s=new Fv(new Id(i),0);let o=new Of(pd);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),Md.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Zh(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return Md.forEach(t.mutations,(r=>{const i=new Fv(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new Fv(t,0),r=this.yr.firstAfterOrEqual(n);return Md.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Md.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vv{constructor(e){this.Cr=e,this.docs=new Rf(Id.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Md.resolve(n?n.document.mutableCopy():vp.newInvalidDocument(t))}getEntries(e,t){let n=gm();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():vp.newInvalidDocument(e))})),Md.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=gm();const s=t.path,o=new Id(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Dd(Ad(o),n)<=0||(r.has(o.key)||um(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Md.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Jh()}vr(e,t){return Md.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Bv(this)}getSize(e){return Md.resolve(this.size)}}class Bv extends Iv{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),Md.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class zv{constructor(e){this.persistence=e,this.Fr=new pm((e=>Wp(e)),Gp),this.lastRemoteSnapshotVersion=vd.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Mv,this.targetCount=0,this.Nr=hv.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),Md.resolve()}getLastRemoteSnapshotVersion(e){return Md.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Md.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Md.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),Md.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new hv(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,Md.resolve()}updateTargetData(e,t){return this.kn(t),Md.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,Md.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Md.waitFor(i).next((()=>r))}getTargetCount(e){return Md.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return Md.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),Md.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Md.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),Md.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return Md.resolve(n)}containsKey(e,t){return Md.resolve(this.Or.containsKey(t))}}class jv{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Qd(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new zv(this),this.indexManager=new Ky,this.remoteDocumentCache=function(e){return new Vv(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new uy(t),this.Kr=new Ov(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Uv(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Qh("MemoryPersistence","Starting transaction:",e);const r=new qv(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return Md.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class qv extends Od{constructor(e){super(),this.currentSequenceNumber=e}}class Hv{constructor(e){this.persistence=e,this.Gr=new Mv,this.zr=null}static jr(e){return new Hv(e)}get Hr(){if(this.zr)return this.zr;throw Jh()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),Md.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),Md.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),Md.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Md.forEach(this.Hr,(n=>{const r=Id.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,vd.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return Md.or([()=>Md.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class Wv{constructor(e){this.serializer=e}N(e,t,n,r){const i=new Fd("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nf,{unique:!0}),e.createObjectStore("documentMutations")}(e),Gv(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Md.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Gv(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nf,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Md.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Zr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(s=s.next((()=>this.ei(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ni(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:vf});t.createIndex("collectionPathOverlayIndex",wf,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",bf,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:af});t.createIndex("documentKeyIndex",lf),t.createIndex("collectionGroupIndex",cf)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ii(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:pf}).createIndex("sequenceNumberIndex",mf,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:gf}).createIndex("documentKeyIndex",yf,{unique:!1})}(e)))),s}Xr(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=sv(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>Md.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>Md.forEach(n,(n=>{Zh(n.userId===t.userId);const r=my(this.serializer,n);return iv(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new bd(n),o=function(e){return[0,Jd(e)]}(s);r.push(t.get(o).next((n=>n?Md.resolve():(n=>t.put({targetId:0,path:Jd(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Md.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:ff});const n=t.store("collectionParents"),r=new Qy,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Jd(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new bd(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=tf(r);return i(o.popLast())}))))}ni(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=gy(n),i=yy(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new Id(bd.fromString(e.document.name).popFirst(5)):e.noDocument?Id.fromSegments(e.noDocument.path):e.unknownDocument?Id.fromSegments(e.unknownDocument.path):Jh()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>Md.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=Sv(this.serializer),i=new jv(Hv.jr,this.serializer.ut);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Sm();my(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Md.forEach(n,((e,n)=>{const s=new Hh(n),o=Sy.ct(this.serializer,s),a=i.getIndexManager(s),l=ov.ct(s,this.serializer,a,i.referenceDelegate);return new Pv(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new kf(t,Qd._e),e).next()}))}))}}function Gv(e){e.createObjectStore("targetDocuments",{keyPath:hf}).createIndex("documentTargetsIndex",df,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uf,{unique:!0}),e.createObjectStore("targetGlobal")}const Kv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qv{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=s,this.document=o,this.oi=l,this._i=c,this.ai=u,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!Qv.D())throw new nd(td.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _v(this,r),this.Ii=t+"main",this.serializer=new uy(a),this.Ti=new Ud(this.Ii,this.ai,new Wv(this.serializer)),this.qr=new dv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Sv(this.serializer),this.Kr=new Ey,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===c&&Yh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nd(td.FAILED_PRECONDITION,Kv);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Lr=new Qd(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Xv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(zd(e))return Qh("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Qh("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return Yv(e).get("owner").next((e=>Md.resolve(this.wi(e))))}Si(e){return Xv(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Cf(e,"clientMetadata");return t.W().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Md.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?Md.resolve(!0):Yv(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new nd(td.FAILED_PRECONDITION,Kv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xv(e).W().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Qh("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new kf(e,Qd._e);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>Xv(e).W().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return ov.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Xy(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Sy.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){Qh("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?Sf:14===e?Tf:13===e?If:12===e?Ef:11===e?_f:void Jh()}(this.ai);let s;return this.Ti.runTransaction(e,r,i,(r=>(s=new kf(r,this.Lr?this.Lr.next():Qd._e),"readwrite-primary"===t?this.fi(s).next((e=>!!e||this.gi(s))).next((t=>{if(!t)throw Yh("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new nd(td.FAILED_PRECONDITION,Pd);return n(s)})).next((e=>this.yi(s).next((()=>e)))):this.Li(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Li(e){return Yv(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new nd(td.FAILED_PRECONDITION,Kv)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yv(e).put("owner",t)}static D(){return Ud.D()}pi(e){const t=Yv(e);return t.get("owner").next((e=>this.wi(e)?(Qh("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Md.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Yh("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;!ze()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return Qh("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Yh("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Yh("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(e){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Yv(e){return Cf(e,"owner")}function Xv(e){return Cf(e,"clientMetadata")}function $v(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Jv{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=Sm(),r=Sm();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Jv(e,t.fromCache,n,r)}}class Zv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ew{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Zv;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Kh()<=ut.DEBUG&&Qh("QueryEngine","SDK will not create cache indexes for query:",cm(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Md.resolve()):(Kh()<=ut.DEBUG&&Qh("QueryEngine","Query:",cm(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Kh()<=ut.DEBUG&&Qh("QueryEngine","The SDK decides to create cache indexes for query:",cm(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rm(t))):Md.resolve())}zi(e,t){if(em(t))return Md.resolve(null);let n=rm(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=om(t,null,"F"),n=rm(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Sm(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,om(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return em(t)||r.isEqual(vd.min())?Md.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?Md.resolve(null):(Kh()<=ut.DEBUG&&Qh("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),cm(t)),this.Xi(e,s,t,Nd(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new Of(dm(e));return t.forEach(((t,r)=>{um(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Kh()<=ut.DEBUG&&Qh("QueryEngine","Using full collection scan to execute query:",cm(t)),this.Gi.getDocumentsMatchingQuery(e,t,Rd.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class tw{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Rf(pd),this.ns=new pm((e=>Wp(e)),Gp),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pv(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function nw(e,t,n,r){return new tw(e,t,n,r)}async function rw(e,t){const n=ed(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Sm();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function iw(e){const t=ed(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function sw(e,t,n){let r=Sm(),i=Sm();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=gm();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(vd.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Qh("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}function ow(e,t){const n=ed(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function aw(e,t){const n=ed(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,Md.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new cy(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function lw(e,t,n){const r=ed(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!zd(e))throw e;Qh("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function cw(e,t,n){const r=ed(e);let i=vd.min(),s=Sm();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=ed(e),i=r.ns.get(n);return void 0!==i?Md.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,rm(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:vd.min(),n?s:Sm()))).next((e=>(dw(r,hm(t),e),{documents:e,ls:s})))))}function uw(e,t){const n=ed(e),r=ed(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function hw(e,t){const n=ed(e),r=n.rs.get(t)||vd.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,Nd(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(dw(n,t,e),e)))}function dw(e,t,n){let r=e.rs.get(t)||vd.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function fw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sm();const r=await aw(e,rm(vy(t.bundledQuery))),i=ed(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Ug(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(e,t);const o=r.withResumeToken(Vf.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(o.targetId,o),i.qr.updateTargetData(e,o).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function pw(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function mw(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function gw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class yw{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new nd(r.error.code,r.error.message))),s?new yw(e,t,r.state,i):(Yh("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vw{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new nd(n.error.code,n.error.message))),i?new vw(e,n.state,r):(Yh("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ww{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Cm();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=$d(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new ww(e,i):(Yh("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class bw{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new bw(t.clientId,t.onlineState):(Yh("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class _w{constructor(){this.activeTargetIds=Cm()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ew{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Rf(pd),this.started=!1,this.ps=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=pw(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new _w),this.Ss=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(pw(this.persistenceKey,n));if(e){const t=ww.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(gw(this.persistenceKey,e));if(n){const r=vw.Ts(e,n);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gw(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Qh("SharedClientState","READ",e,t),t}setItem(e,t){Qh("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Qh("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(Qh("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void Yh("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=Qd._e;if(null!=e)try{const n=JSON.parse(e);Zh("number"==typeof n),t=n}catch(e){Yh("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Qd._e&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,n){const r=new yw(this.currentUser,e,t,n),i=mw(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Bs(e){const t=mw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=gw(this.persistenceKey,e),i=new vw(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return ww.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return yw.Ts(new Hh(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return vw.Ts(r,t)}Ms(e){return bw.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);Qh("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Xs(s,o).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=Cm();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Iw{constructor(){this.eo=new _w,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new _w,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Tw{ro(e){}shutdown(){}}class Sw{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Qh("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Qh("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let kw=null;function Cw(){return null===kw?kw=268435456+Math.round(2147483648*Math.random()):kw++,"0x"+kw.toString(16)}const xw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Nw{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Aw="WebChannelConnection";class Rw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,i){const s=Cw(),o=this.So(e,t);Qh("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,i),this.Do(e,o,a,n).then((t=>(Qh("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Xh("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.wo(e,t,n,r,i)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=xw[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const i=Cw();return new Promise(((s,o)=>{const a=new Bh;a.setWithCredentials(!0),a.listenOnce(Mh.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Lh.NO_ERROR:const t=a.getResponseJson();Qh(Aw,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Lh.TIMEOUT:Qh(Aw,"RPC '".concat(e,"' ").concat(i," timed out")),o(new nd(td.DEADLINE_EXCEEDED,"Request time out"));break;case Lh.HTTP_ERROR:const n=a.getStatus();if(Qh(Aw,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(td).indexOf(t)>=0?t:td.UNKNOWN}(t.status);o(new nd(e,t.message))}else o(new nd(td.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new nd(td.UNAVAILABLE,"Connection failed."));break;default:Jh()}}finally{Qh(Aw,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Qh(Aw,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}vo(e,t,n){const r=Cw(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ph(),o=Oh(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Qh(Aw,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Nw({co:t=>{d?Qh(Aw,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Qh(Aw,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Qh(Aw,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Vh.EventType.OPEN,(()=>{d||Qh(Aw,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Vh.EventType.CLOSE,(()=>{d||(d=!0,Qh(Aw,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Ro())})),p(u,Vh.EventType.ERROR,(t=>{d||(d=!0,Xh(Aw,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Ro(new nd(td.UNAVAILABLE,"The operation could not be completed")))})),p(u,Vh.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Zh(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Qh(Aw,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=ug[e];if(void 0!==t)return fg(t)}(t),i=o.message;void 0===n&&(n=td.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Ro(new nd(n,i)),u.close()}else Qh(Aw,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Vo(i)}})),p(o,Fh.STAT_EVENT,(t=>{t.stat===Uh.PROXY?Qh(Aw,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Uh.NOPROXY&&Qh(Aw,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ao()}),0),f}}function Dw(){return"undefined"!=typeof window?window:null}function Pw(){return"undefined"!=typeof document?document:null}function Ow(e){return new Pg(e,!0)}class Lw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Qh("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Mw{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Ko=n,this.$o=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Lw(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===td.RESOURCE_EXHAUSTED?(Yh(t.toString()),Yh("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===td.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new nd(td.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return Qh("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(Qh("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Fw extends Mw{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Jh()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Zh(void 0===t||"string"==typeof t),Vf.fromBase64String(t||"")):(Zh(void 0===t||t instanceof Uint8Array),Vf.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?td.UNKNOWN:fg(e.code);return new nd(t,e.message||"")}(o);n=new Sg(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=jg(e,r.document.name),s=Ug(r.document.updateTime),o=r.document.createTime?Ug(r.document.createTime):vd.min(),a=new gp({mapValue:{fields:r.document.fields}}),l=vp.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ig(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=jg(e,r.document),s=r.readTime?Ug(r.readTime):vd.min(),o=vp.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ig([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=jg(e,r.document),s=r.removedTargetIds||[];n=new Ig([],s,i,null)}else{if(!("filter"in t))return Jh();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new cg(r,i),o=e.targetId;n=new Tg(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return vd.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?vd.min():t.readTime?Ug(t.readTime):vd.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=Wg(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Kp(r)?{documents:$g(e,r)}:{query:Jg(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Mg(e,t.resumeToken);const r=Og(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(vd.min())>0){n.readTime=Lg(e,t.snapshotVersion.toTimestamp());const r=Og(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Jh()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=Wg(this.serializer),t.removeTarget=e,this.e_(t)}}class Uw extends Mw{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Zh(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(Zh(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Ug(e.updateTime):Ug(t);return n.isEqual(vd.min())&&(n=Ug(t)),new Hm(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Ug(e.commitTime);return this.listener.I_(n,t)}return Zh(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Wg(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Yg(this.serializer,e)))};this.e_(t)}}class Vw extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new nd(td.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.wo(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===td.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new nd(td.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===td.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new nd(td.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class Bw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(Yh(t),this.f_=!1):Qh("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class zw{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro((e=>{n.enqueueAndForget((async()=>{Xw(this)&&(Qh("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ed(e);t.C_.add(4),await qw(t),t.M_.set("Unknown"),t.C_.delete(4),await jw(t)}(this))}))})),this.M_=new Bw(n,r)}}async function jw(e){if(Xw(e))for(const t of e.v_)await t(!0)}async function qw(e){for(const t of e.v_)await t(!1)}function Hw(e,t){const n=ed(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),Yw(n)?Qw(n):pb(n).Ho()&&Gw(n,t))}function Ww(e,t){const n=ed(e),r=pb(n);n.D_.delete(t),r.Ho()&&Kw(n,t),0===n.D_.size&&(r.Ho()?r.Zo():Xw(n)&&n.M_.set("Unknown"))}function Gw(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vd.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}pb(e).u_(t)}function Kw(e,t){e.x_.Oe(t),pb(e).c_(t)}function Qw(e){e.x_=new Cg({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),pb(e).start(),e.M_.g_()}function Yw(e){return Xw(e)&&!pb(e).jo()&&e.D_.size>0}function Xw(e){return 0===ed(e).C_.size}function $w(e){e.x_=void 0}async function Jw(e){e.D_.forEach(((t,n)=>{Gw(e,t)}))}async function Zw(e,t){$w(e),Yw(e)?(e.M_.w_(t),Qw(e)):e.M_.set("Unknown")}async function eb(e,t,n){if(e.M_.set("Online"),t instanceof Sg&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){Qh("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await tb(e,n)}else if(t instanceof Ig?e.x_.$e(t):t instanceof Tg?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(vd.min()))try{const t=await iw(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(Vf.EMPTY_BYTE_STRING,r.snapshotVersion)),Kw(e,t);const i=new cy(r.target,t,n,r.sequenceNumber);Gw(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Qh("RemoteStore","Failed to raise snapshot:",t),await tb(e,t)}}async function tb(e,t,n){if(!zd(t))throw t;e.C_.add(1),await qw(e),e.M_.set("Offline"),n||(n=()=>iw(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Qh("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await jw(e)}))}function nb(e,t){return t().catch((n=>tb(e,n,t)))}async function rb(e){const t=ed(e),n=mb(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;ib(t);)try{const e=await ow(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,sb(t,e)}catch(e){await tb(t,e)}ob(t)&&ab(t)}function ib(e){return Xw(e)&&e.b_.length<10}function sb(e,t){e.b_.push(t);const n=mb(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function ob(e){return Xw(e)&&!mb(e).jo()&&e.b_.length>0}function ab(e){mb(e).start()}async function lb(e){mb(e).E_()}async function cb(e){const t=mb(e);for(const n of e.b_)t.P_(n.mutations)}async function ub(e,t,n){const r=e.b_.shift(),i=ag.from(r,t,n);await nb(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await rb(e)}async function hb(e,t){t&&mb(e).h_&&await async function(e,t){if(function(e){return dg(e)&&e!==td.ABORTED}(t.code)){const n=e.b_.shift();mb(e).Yo(),await nb(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await rb(e)}}(e,t),ob(e)&&ab(e)}async function db(e,t){const n=ed(e);n.asyncQueue.verifyOperationInProgress(),Qh("RemoteStore","RemoteStore received new credentials");const r=Xw(n);n.C_.add(3),await qw(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await jw(n)}async function fb(e,t){const n=ed(e);t?(n.C_.delete(2),await jw(n)):t||(n.C_.add(2),await qw(n),n.M_.set("Unknown"))}function pb(e){return e.O_||(e.O_=function(e,t,n){const r=ed(e);return r.A_(),new Fw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:Jw.bind(null,e),Io:Zw.bind(null,e),a_:eb.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),Yw(e)?Qw(e):e.M_.set("Unknown")):(await e.O_.stop(),$w(e))}))),e.O_}function mb(e){return e.N_||(e.N_=function(e,t,n){const r=ed(e);return r.A_(),new Uw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:lb.bind(null,e),Io:hb.bind(null,e),T_:cb.bind(null,e),I_:ub.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await rb(e)):(await e.N_.stop(),e.b_.length>0&&(Qh("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class gb{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new rd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new gb(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nd(td.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yb(e,t){if(Yh("AsyncQueue","".concat(t,": ").concat(e)),zd(e))return new nd(td.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class vb{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Id.comparator(t.key,n.key):(e,t)=>Id.comparator(e.key,t.key),this.keyedMap=vm(),this.sortedSet=new Rf(this.comparator)}static emptySet(e){return new vb(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vb))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new vb;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class wb{constructor(){this.B_=new Rf(Id.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Jh():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class bb{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new bb(e,t,vb.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&am(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class _b{constructor(){this.k_=void 0,this.listeners=[]}}class Eb{constructor(){this.queries=new pm((e=>lm(e)),am),this.onlineState="Unknown",this.q_=new Set}}async function Ib(e,t){const n=ed(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new _b),i)try{s.k_=await n.onListen(r)}catch(e){const n=yb(e,"Initialization of query '".concat(cm(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&Cb(n)}async function Tb(e,t){const n=ed(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Sb(e,t){const n=ed(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(i)&&(r=!0);t.k_=i}}r&&Cb(n)}function kb(e,t,n){const r=ed(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Cb(e){e.q_.forEach((e=>{e.next()}))}class xb{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new bb(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=bb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class Nb{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class Ab{constructor(e){this.serializer=e}hs(e){return jg(this.serializer,e)}Ps(e){return e.metadata.exists?Qg(this.serializer,e.document,!1):vp.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Ug(e)}}class Rb{constructor(e,t,n){this.X_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Db(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const n=bd.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,n=new Ab(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Sm()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=ed(e);let s=Sm(),o=gm();for(const c of n){const e=t.hs(c.metadata.name);c.document&&(s=s.add(e));const n=t.Ps(c);n.setReadTime(t.Is(c.metadata.readTime)),o=o.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=await aw(i,function(e){return rm(Zp(bd.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>sw(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new Ab(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(const n of this.queries)await fw(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function Db(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Pb{constructor(e){this.key=e}}class Ob{constructor(e){this.key=e}}class Lb{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Sm(),this.mutatedKeys=Sm(),this._a=dm(e),this.aa=new vb(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new wb,r=t?t.aa:this.aa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=um(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ha(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this._a(u,a)>0||l&&this._a(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{aa:s,la:n,Zi:o,mutatedKeys:i}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jh()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n),r=null!=r&&r;const o=t&&!r?this.Ia():[],a=0===this.oa.size&&this.current&&!r?1:0,l=a!==this.sa;return this.sa=a,0!==s.length||l?{snapshot:new bb(this.query,e.aa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new wb,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Sm(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new Ob(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new Pb(n))})),t}da(e){this.ia=e.ls,this.oa=Sm();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return bb.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class Mb{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Fb{constructor(e){this.key=e,this.Ra=!1}}class Ub{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new pm((e=>lm(e)),am),this.fa=new Map,this.ga=new Set,this.pa=new Rf(Id.comparator),this.ya=new Map,this.wa=new Mv,this.Sa={},this.ba=new Map,this.Da=hv.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function Vb(e,t){const n=h_(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const e=await aw(n.localStore,rm(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Bb(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Hw(n.remoteStore,e)}return i}async function Bb(e,t,n,r,i){e.va=(t,n,r)=>async function(e,t,n,r){let i=t.view.ca(n);i.Zi&&(i=await cw(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return $b(e,t.targetId,a.Ta),a.snapshot}(e,t,n,r);const s=await cw(e.localStore,t,!0),o=new Lb(t,s.ls),a=o.ca(s.documents),l=Eg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);$b(e,n,c.Ta);const u=new Mb(t,n,o);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function zb(e,t){const n=ed(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter((e=>!am(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await lw(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Ww(n.remoteStore,r.targetId),Yb(n,r.targetId)})).catch(Ld)):(Yb(n,r.targetId),await lw(n.localStore,r.targetId,!0))}async function jb(e,t){const n=ed(e);try{const e=await function(e,t){const n=ed(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Vf.EMPTY_BYTE_STRING,vd.min()).withLastLimboFreeSnapshotVersion(vd.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.qr.updateTargetData(e,c))}));let a=gm(),l=Sm();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(sw(e,s,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(vd.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Md.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(Zh(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?Zh(r.Ra):e.removedDocuments.size>0&&(Zh(r.Ra),r.Ra=!1))})),await e_(n,e,t)}catch(e){await Ld(e)}}function qb(e,t,n){const r=ed(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const i=r.view.Q_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ed(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Q_(t)&&(r=!0)})),r&&Cb(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Hb(e,t,n){const r=ed(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let e=new Rf(Id.comparator);e=e.insert(s,vp.newNoDocument(s,vd.min()));const n=Sm().add(s),i=new _g(vd.min(),new Map,new Rf(pd),e,n);await jb(r,i),r.pa=r.pa.remove(s),r.ya.delete(t),Zb(r)}else await lw(r.localStore,t,!1).then((()=>Yb(r,t,n))).catch(Ld)}async function Wb(e,t){const n=ed(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ed(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Md.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Zh(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Sm();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Qb(n,r,null),Kb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await e_(n,e)}catch(e){await Ld(e)}}async function Gb(e,t,n){const r=ed(e);try{const e=await function(e,t){const n=ed(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Zh(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Qb(r,t,n),Kb(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await e_(r,e)}catch(n){await Ld(n)}}function Kb(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function Qb(e,t,n){const r=ed(e);let i=r.Sa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function Yb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||Xb(e,t)}))}function Xb(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(Ww(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Zb(e))}function $b(e,t,n){for(const r of n)r instanceof Pb?(e.wa.addReference(r.key,t),Jb(e,r)):r instanceof Ob?(Qh("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||Xb(e,r.key)):Jh()}function Jb(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(Qh("SyncEngine","New document in limbo: "+n),e.ga.add(r),Zb(e))}function Zb(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new Id(bd.fromString(t)),r=e.Da.next();e.ya.set(r,new Fb(n)),e.pa=e.pa.insert(n,r),Hw(e.remoteStore,new cy(rm(Zp(n.path)),r,"TargetPurposeLimboResolution",Qd._e))}}async function e_(e,t,n){const r=ed(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach(((e,a)=>{o.push(r.va(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Jv.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Va.a_(i),await async function(e,t){const n=ed(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Md.forEach(t,(t=>Md.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Md.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!zd(e))throw e;Qh("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function t_(e,t){const n=ed(e);if(!n.currentUser.isEqual(t)){Qh("SyncEngine","User change. New user:",t.toKey());const e=await rw(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new nd(td.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await e_(n,e._s)}}function n_(e,t){const n=ed(e),r=n.ya.get(t);if(r&&r.Ra)return Sm().add(r.key);{let e=Sm();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}async function r_(e,t){const n=ed(e),r=await cw(n.localStore,t.query,!0),i=t.view.da(r);return n.isPrimaryClient&&$b(n,t.targetId,i.Ta),i}async function i_(e,t){const n=ed(e);return hw(n.localStore,t).then((e=>e_(n,e)))}async function s_(e,t,n,r){const i=ed(e),s=await function(e,t){const n=ed(e),r=ed(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Md.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await rb(i.remoteStore):"acknowledged"===n||"rejected"===n?(Qb(i,t,r||null),Kb(i,t),function(e,t){ed(ed(e).mutationQueue).Fn(t)}(i.localStore,t)):Jh(),await e_(i,s)):Qh("SyncEngine","Cannot apply mutation batch with id: "+t)}async function o_(e,t,n){const r=ed(e),i=[],s=[];for(const o of t){let e;const t=r.fa.get(o);if(t&&0!==t.length){e=await aw(r.localStore,rm(t[0]));for(const e of t){const t=r.ma.get(e),n=await r_(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await uw(r.localStore,o);e=await aw(r.localStore,t),await Bb(r,a_(t),o,!1,e.resumeToken)}i.push(e)}return r.Va.a_(s),i}function a_(e){return Jp(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function l_(e){return function(e){return ed(ed(e).persistence).Bi()}(ed(e).localStore)}async function c_(e,t,n,r){const i=ed(e);if(i.Ca)return void Qh("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await hw(i.localStore,hm(s[0])),r=_g.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Vf.EMPTY_BYTE_STRING);await e_(i,e,r);break}case"rejected":await lw(i.localStore,t,!0),Yb(i,t,r);break;default:Jh()}}async function u_(e,t,n){const r=h_(e);if(r.Ca){for(const e of t){if(r.fa.has(e)){Qh("SyncEngine","Adding an already active target "+e);continue}const t=await uw(r.localStore,e),n=await aw(r.localStore,t);await Bb(r,a_(t),n.targetId,!1,n.resumeToken),Hw(r.remoteStore,n)}for(const e of n)r.fa.has(e)&&await lw(r.localStore,e,!1).then((()=>{Ww(r.remoteStore,e),Yb(r,e)})).catch(Ld)}}function h_(e){const t=ed(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=jb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=n_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Hb.bind(null,t),t.Va.a_=Sb.bind(null,t.eventManager),t.Va.Fa=kb.bind(null,t.eventManager),t}function d_(e){const t=ed(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Wb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Gb.bind(null,t),t}class f_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ow(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return nw(this.persistence,new ew,e.initialUser,this.serializer)}createPersistence(e){return new jv(Hv.jr,this.serializer)}createSharedClientState(e){return new Iw}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class p_ extends f_{constructor(e,t,n){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await d_(this.xa.syncEngine),await rb(this.xa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return nw(this.persistence,new ew,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new vv(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Kd(t,this.persistence);return new Gd(e.asyncQueue,n)}createPersistence(e){const t=$v(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?rv.withCacheSize(this.cacheSizeBytes):rv.DEFAULT;return new Qv(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Dw(),Pw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Iw}}class m_ extends p_{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xa.syncEngine;this.sharedClientState instanceof Ew&&(this.sharedClientState.syncEngine={Ys:s_.bind(null,t),Zs:c_.bind(null,t),Xs:u_.bind(null,t),Bi:l_.bind(null,t),Js:i_.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=ed(e);if(h_(n),d_(n),!0===t&&!0!==n.Ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await o_(n,e.toArray());n.Ca=!0,await fb(n.remoteStore,!0);for(const r of t)Hw(n.remoteStore,r)}else if(!1===t&&!1!==n.Ca){const e=[];let t=Promise.resolve();n.fa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Yb(n,i),lw(n.localStore,i,!0)))),Ww(n.remoteStore,i)})),await t,await o_(n,e),function(e){const t=ed(e);t.ya.forEach(((e,n)=>{Ww(t.remoteStore,n)})),t.wa.Vr(),t.ya=new Map,t.pa=new Rf(Id.comparator)}(n),n.Ca=!1,await fb(n.remoteStore,!1)}}(this.xa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Dw();if(!Ew.D(t))throw new nd(td.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=$v(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ew(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class g_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>qb(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=t_.bind(null,this.syncEngine),await fb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Eb}createDatastore(e){const t=Ow(e.databaseInfo.databaseId),n=function(e){return new Rw(e)}(e.databaseInfo);return function(e,t,n,r){return new Vw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new zw(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>qb(this.syncEngine,e,0)),Sw.D()?new Sw:new Tw)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Ub(e,t,n,r,i,s);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=ed(e);Qh("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await qw(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}function y_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class v_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Yh("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class w_{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new rd,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then((e=>{e&&e.Z_()?this.metadata.resolve(e.Y_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Y_))))}),(e=>this.metadata.reject(e)))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(null===e)return null;const t=this.La.decode(e),n=Number(t);isNaN(n)&&this.Qa("length string (".concat(t,") is not valid number"));const r=await this.Ka(n);return new Nb(JSON.parse(r),e.length+n)}$a(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(0===this.buffer.length)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qa(e){throw this.Ba.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ua(){const e=await this.Ba.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class b_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new nd(td.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=ed(e),r=Wg(n.serializer)+"/documents",i={documents:t.map((e=>zg(n.serializer,e)))},s=await n.Co("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Zh(!!t.found),t.found.name,t.found.updateTime;const n=jg(e,t.found.name),r=Ug(t.found.updateTime),i=t.found.createTime?Ug(t.found.createTime):vd.min(),s=new gp({mapValue:{fields:t.found.fields}});return vp.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Zh(!!t.missing),Zh(!!t.readTime);const n=jg(e,t.missing),r=Ug(t.readTime);return vp.newNoDocument(n,r)}(e,t):Jh()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Zh(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new ig(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Id.fromPath(t);this.mutations.push(new sg(n,this.precondition(n)))})),await async function(e,t){const n=ed(e),r=Wg(n.serializer)+"/documents",i={writes:t.map((e=>Yg(n.serializer,e)))};await n.wo("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Jh();t=vd.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new nd(td.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vd.min())?Wm.exists(!1):Wm.updateTime(t):Wm.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vd.min()))throw new nd(td.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wm.updateTime(t)}return Wm.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class __{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Wa=n.maxAttempts,this.zo=new Lw(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko((async()=>{const e=new b_(this.datastore),t=this.za(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ja(e)}))))})).catch((e=>{this.ja(e)}))}))}za(e){try{const t=this.updateFunction(e);return!Yd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ga(),Promise.resolve())))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!dg(t)}return!1}}class E_{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Hh.UNAUTHENTICATED,this.clientId=fd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Qh("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Qh("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new nd(td.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=yb(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function I_(e,t){e.asyncQueue.verifyOperationInProgress(),Qh("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await rw(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function T_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await k_(e);Qh("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>db(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>db(t.remoteStore,n))),e._onlineComponents=t}function S_(e){return"FirebaseError"===e.name?e.code===td.FAILED_PRECONDITION||e.code===td.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function k_(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Qh("FirestoreClient","Using user provided OfflineComponentProvider");try{await I_(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!S_(n))throw n;Xh("Error using user provided cache. Falling back to memory cache: "+n),await I_(e,new f_)}}else Qh("FirestoreClient","Using default OfflineComponentProvider"),await I_(e,new f_);return e._offlineComponents}async function C_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Qh("FirestoreClient","Using user provided OnlineComponentProvider"),await T_(e,e._uninitializedComponentsProvider._online)):(Qh("FirestoreClient","Using default OnlineComponentProvider"),await T_(e,new g_))),e._onlineComponents}function x_(e){return k_(e).then((e=>e.persistence))}function N_(e){return k_(e).then((e=>e.localStore))}function A_(e){return C_(e).then((e=>e.remoteStore))}function R_(e){return C_(e).then((e=>e.syncEngine))}function D_(e){return C_(e).then((e=>e.datastore))}async function P_(e){const t=await C_(e),n=t.eventManager;return n.onListen=Vb.bind(null,t.syncEngine),n.onUnlisten=zb.bind(null,t.syncEngine),n}function O_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new rd;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new v_({next:s=>{t.enqueueAndForget((()=>Tb(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new nd(td.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new nd(td.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new xb(Zp(n.path),s,{includeMetadataChanges:!0,J_:!0});return Ib(e,o)}(await P_(e),e.asyncQueue,t,n,r))),r.promise}function L_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new rd;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new v_({next:n=>{t.enqueueAndForget((()=>Tb(e,o))),n.fromCache&&"server"===r.source?i.reject(new nd(td.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new xb(n,s,{includeMetadataChanges:!0,J_:!0});return Ib(e,o)}(await P_(e),e.asyncQueue,t,n,r))),r.promise}function M_(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?mg().encode(e):e,function(e,t){return new w_(e,t)}(function(e,t){if(e instanceof Uint8Array)return y_(e,t);if(e instanceof ArrayBuffer)return y_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Ow(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=ed(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=ed(e),r=Ug(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Db(r));const i=new Rb(r,e.localStore,t.serializer);let s=await t.Ma();for(;s;){const e=await i.ea(s);e&&n._updateProgress(e),s=await t.Ma()}const o=await i.complete();return await e_(e,o.ra,void 0),await function(e,t){const n=ed(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.na)}catch(e){return Xh("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await R_(e),i,r)}))}function F_(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const U_=new Map;function V_(e,t,n){if(!n)throw new nd(td.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function B_(e,t,n,r){if(!0===t&&!0===r)throw new nd(td.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function z_(e){if(!Id.isDocumentKey(e))throw new nd(td.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function j_(e){if(Id.isDocumentKey(e))throw new nd(td.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function q_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Jh()}function H_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new nd(td.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=q_(e);throw new nd(td.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function W_(e,t){if(t<=0)throw new nd(td.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class G_{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new nd(td.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new nd(td.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}B_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F_(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new nd(td.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new nd(td.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new nd(td.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class K_{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new nd(td.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new nd(td.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new sd;switch(e.type){case"firstParty":return new cd(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new nd(td.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=U_.get(e);t&&(Qh("ComponentProvider","Removing Datastore"),U_.delete(e),t.terminate())}(this),Promise.resolve()}}function Q_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=H_(e,K_))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Xh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Hh.MOCK_USER;else{t=Ve(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new nd(td.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Hh(s)}e._authCredentials=new od(new id(t,n))}}class Y_{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Y_(this.firestore,e,this._query)}}class X_{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $_(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new X_(this.firestore,e,this._key)}}class $_ extends Y_{constructor(e,t,n){super(e,t,Zp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new X_(this.firestore,null,new Id(e))}withConverter(e){return new $_(this.firestore,e,this._path)}}function J_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=it(e),V_("collection","path",t),e instanceof K_){const n=bd.fromString(t,...r);return j_(n),new $_(e,null,n)}{if(!(e instanceof X_||e instanceof $_))throw new nd(td.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(bd.fromString(t,...r));return j_(n),new $_(e.firestore,null,n)}}function Z_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=it(e),1===arguments.length&&(t=fd.newId()),V_("doc","path",t),e instanceof K_){const n=bd.fromString(t,...r);return z_(n),new X_(e,null,new Id(n))}{if(!(e instanceof X_||e instanceof $_))throw new nd(td.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(bd.fromString(t,...r));return z_(n),new X_(e.firestore,e instanceof $_?e.converter:null,new Id(n))}}function eE(e,t){return e=it(e),t=it(t),(e instanceof X_||e instanceof $_)&&(t instanceof X_||t instanceof $_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function tE(e,t){return e=it(e),t=it(t),e instanceof Y_&&t instanceof Y_&&e.firestore===t.firestore&&am(e._query,t._query)&&e.converter===t.converter}class nE{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Lw(this,"async_queue_retry"),this.iu=()=>{const e=Pw();e&&Qh("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=Pw();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=Pw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new rd;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!zd(e))throw e;Qh("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Yh("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=gb.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&Jh()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function rE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class iE{constructor(){this._progressObserver={},this._taskCompletionResolver=new rd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class sE extends K_{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new nE,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||aE(this),this._firestoreClient.terminate()}}function oE(e){return e._firestoreClient||aE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function aE(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Kf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,F_(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new E_(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function lE(e,t,n){const r=new rd;return e.asyncQueue.enqueue((async()=>{try{await I_(e,n),await T_(e,t),r.resolve()}catch(e){const n=e;if(!S_(n))throw n;Xh("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function cE(e){return function(e){const t=new rd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=ed(e);Xw(n.remoteStore)||Qh("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=ed(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ba.get(e)||[];r.push(t),n.ba.set(e,r)}catch(e){const n=yb(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await R_(e),t))),t.promise}(oE(e=H_(e,sE)))}function uE(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await x_(e),n=await A_(e);return t.setNetworkEnabled(!0),function(e){const t=ed(e);return t.C_.delete(0),jw(t)}(n)}))}(oE(e=H_(e,sE)))}function hE(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await x_(e),n=await A_(e);return t.setNetworkEnabled(!1),async function(e){const t=ed(e);t.C_.add(0),await qw(t),t.M_.set("Offline")}(n)}))}(oE(e=H_(e,sE)))}function dE(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=ed(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await N_(e),t)))}(oE(e=H_(e,sE)),t).then((t=>t?new Y_(e,null,t.query):null))}function fE(e){if(e._initialized||e._terminated)throw new nd(td.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pE{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pE(Vf.fromBase64String(e))}catch(e){throw new nd(td.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new pE(Vf.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class mE{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new nd(td.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ed(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gE{constructor(e){this._methodName=e}}class yE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new nd(td.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new nd(td.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pd(this._lat,e._lat)||pd(this._long,e._long)}}const vE=/^__.*__$/;class wE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new eg(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zm(e,this.data,t,this.fieldTransforms)}}class bE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new eg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _E(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jh()}}class EE{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new EE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return jE(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(_E(this.Iu)&&vE.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class IE{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ow(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new EE({Iu:e,methodName:t,gu:n,path:Ed.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function TE(e){const t=e._freezeSettings(),n=Ow(e._databaseId);return new IE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function SE(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);UE("Data must be an object, but it was:",o,r);const a=ME(r,o);let l,c;if(s.merge)l=new Ff(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=VE(t,r,n);if(!o.contains(i))throw new nd(td.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));qE(e,i)||e.push(i)}l=new Ff(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new wE(new gp(a),l,c)}class kE extends gE{_toFieldTransform(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kE}}function CE(e,t,n){return new EE({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class xE extends gE{_toFieldTransform(e){return new qm(e.path,new Lm)}isEqual(e){return e instanceof xE}}class NE extends gE{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=CE(this,e,!0),n=this.yu.map((e=>LE(e,t))),r=new Mm(n);return new qm(e.path,r)}isEqual(e){return this===e}}class AE extends gE{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=CE(this,e,!0),n=this.yu.map((e=>LE(e,t))),r=new Um(n);return new qm(e.path,r)}isEqual(e){return this===e}}class RE extends gE{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new Bm(e.serializer,Am(e.serializer,this.wu));return new qm(e.path,t)}isEqual(e){return this===e}}function DE(e,t,n,r){const i=e.pu(1,t,n);UE("Data must be an object, but it was:",i,r);const s=[],o=gp.empty();Nf(r,((e,r)=>{const a=zE(t,e,n);r=it(r);const l=i.Ru(a);if(r instanceof kE)s.push(a);else{const e=LE(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Ff(s);return new bE(o,a,i.fieldTransforms)}function PE(e,t,n,r,i,s){const o=e.pu(1,t,n),a=[VE(t,r,n)],l=[i];if(s.length%2!=0)throw new nd(td.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(VE(t,s[d])),l.push(s[d+1]);const c=[],u=gp.empty();for(let d=a.length-1;d>=0;--d)if(!qE(c,a[d])){const e=a[d];let t=l[d];t=it(t);const n=o.Ru(e);if(t instanceof kE)c.push(e);else{const r=LE(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Ff(c);return new bE(u,h,o.fieldTransforms)}function OE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return LE(n,e.pu(r?4:3,t))}function LE(e,t){if(FE(e=it(e)))return UE("Unsupported field value:",t,e),ME(e,t);if(e instanceof gE)return function(e,t){if(!_E(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=LE(i,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=it(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Am(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=yd.fromDate(e);return{timestampValue:Lg(t.serializer,n)}}if(e instanceof yd){const n=new yd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Lg(t.serializer,n)}}if(e instanceof yE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof pE)return{bytesValue:Mg(t.serializer,e._byteString)};if(e instanceof X_){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Vg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(q_(e)))}(e,t)}function ME(e,t){const n={};return Af(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Nf(e,((e,r)=>{const i=LE(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function FE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof yd||e instanceof yE||e instanceof pE||e instanceof X_||e instanceof gE)}function UE(e,t,n){if(!FE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=q_(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function VE(e,t,n){if((t=it(t))instanceof mE)return t._internalPath;if("string"==typeof t)return zE(e,t);throw jE("Field path arguments must be of type string or ",e,!1,void 0,n)}const BE=new RegExp("[~\\*/\\[\\]]");function zE(e,t,n){if(t.search(BE)>=0)throw jE("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new mE(...t.split("."))._internalPath}catch(Fa){throw jE("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function jE(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new nd(td.INVALID_ARGUMENT,a+e+l)}function qE(e,t){return e.some((e=>e.isEqual(t)))}class HE{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new X_(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new WE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(GE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class WE extends HE{data(){return super.data()}}function GE(e,t){return"string"==typeof t?zE(e,t):t instanceof mE?t._internalPath:t._delegate._internalPath}function KE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new nd(td.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class QE{}class YE extends QE{}function XE(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof QE&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof JE)).length,n=e.filter((e=>e instanceof $E)).length;if(t>1||t>0&&n>0)throw new nd(td.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class $E extends YE{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new $E(e,t,n)}_apply(e){const t=this._parse(e);return oI(e._query,t),new Y_(e.firestore,e.converter,sm(e._query,t))}_parse(e){const t=TE(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new nd(td.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){sI(o,s);const t=[];for(const n of o)t.push(iI(r,e,n));a={arrayValue:{values:t}}}else a=iI(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||sI(o,s),a=OE(n,t,o,"in"===s||"not-in"===s);return Sp.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class JE extends QE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new JE(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:kp.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)oI(n,i),n=sm(n,i)}(e._query,t),new Y_(e.firestore,e.converter,sm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ZE extends YE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ZE(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new nd(td.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new nd(td.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ep(t,n)}(e._query,this._field,this._direction);return new Y_(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new $p(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class eI extends YE{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new eI(e,t,n)}_apply(e){return new Y_(e.firestore,e.converter,om(e._query,this._limit,this._limitType))}}class tI extends YE{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new tI(e,t,n)}_apply(e){const t=rI(e,this.type,this._docOrFields,this._inclusive);return new Y_(e.firestore,e.converter,function(e,t){return new $p(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class nI extends YE{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new nI(e,t,n)}_apply(e){const t=rI(e,this.type,this._docOrFields,this._inclusive);return new Y_(e.firestore,e.converter,function(e,t){return new $p(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function rI(e,t,n,r){if(n[0]=it(n[0]),n[0]instanceof HE)return function(e,t,n,r,i){if(!r)throw new nd(td.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of nm(e))if(o.field.isKeyField())s.push(ip(t,r.key));else{const e=r.data.field(o.field);if(Hf(e))throw new nd(td.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new nd(td.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new wp(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=TE(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new nd(td.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new nd(td.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!tm(e)&&-1!==s.indexOf("/"))throw new nd(td.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(bd.fromString(s));if(!Id.isDocumentKey(n))throw new nd(td.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Id(n);a.push(ip(t,i))}else{const e=OE(n,r,s);a.push(e)}}return new wp(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function iI(e,t,n){if("string"==typeof(n=it(n))){if(""===n)throw new nd(td.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tm(t)&&-1!==n.indexOf("/"))throw new nd(td.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(bd.fromString(n));if(!Id.isDocumentKey(r))throw new nd(td.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ip(e,new Id(r))}if(n instanceof X_)return ip(e,n._key);throw new nd(td.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(q_(n),"."))}function sI(e,t){if(!Array.isArray(e)||0===e.length)throw new nd(td.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function oI(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new nd(td.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new nd(td.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class aI{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch($f(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jf(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Jh()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Nf(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new yE(jf(e.latitude),jf(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Wf(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gf(e));default:return null}}convertTimestamp(e){const t=zf(e);return new yd(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=bd.fromString(e);Zh(ly(n));const r=new Qf(n.get(1),n.get(3)),i=new Id(n.popFirst(5));return r.isEqual(t)||Yh("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function lI(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class cI extends aI{constructor(e){super(),this.firestore=e}convertBytes(e){return new pE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new X_(this.firestore,null,t)}}class uI{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hI extends HE{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new dI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(GE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class dI extends hI{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class fI{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new uI(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new dI(this._firestore,this._userDataWriter,n.key,n,new uI(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new nd(td.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new dI(e._firestore,e._userDataWriter,n.doc.key,n.doc,new uI(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new dI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new uI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:pI(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function pI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jh()}}function mI(e,t){return e instanceof hI&&t instanceof hI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof fI&&t instanceof fI&&e._firestore===t._firestore&&tE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class gI extends aI{constructor(e){super(),this.firestore=e}convertBytes(e){return new pE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new X_(this.firestore,null,t)}}function yI(e){e=H_(e,X_);const t=H_(e.firestore,sE),n=oE(t),r=new gI(t);return function(e,t){const n=new rd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=ed(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new nd(td.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=yb(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await N_(e),t,n))),n.promise}(n,e._key).then((n=>new hI(t,r,e._key,n,new uI(null!==n&&n.hasLocalMutations,!0),e.converter)))}function vI(e){e=H_(e,Y_);const t=H_(e.firestore,sE),n=oE(t),r=new gI(t);return function(e,t){const n=new rd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await cw(e,t,!0),i=new Lb(t,r.ls),s=i.ca(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=yb(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await N_(e),t,n))),n.promise}(n,e._query).then((n=>new fI(t,r,e,n)))}function wI(e,t,n){e=H_(e,X_);const r=H_(e.firestore,sE),i=lI(e.converter,t,n);return II(r,[SE(TE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Wm.none())])}function bI(e,t,n){e=H_(e,X_);const r=H_(e.firestore,sE),i=TE(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=it(t))||t instanceof mE?PE(i,"updateDoc",e._key,t,n,a):DE(i,"updateDoc",e._key,t),II(r,[s.toMutation(e._key,Wm.exists(!0))])}function _I(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=it(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||rE(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(rE(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof X_)h=H_(e.firestore,sE),d=Zp(e._key.path),u={next:t=>{n[l]&&n[l](TI(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=H_(e,Y_);h=H_(t.firestore,sE),d=t._query;const r=new gI(h);u={next:e=>{n[l]&&n[l](new fI(h,r,t,e))},error:n[l+1],complete:n[l+2]},KE(e._query)}return function(e,t,n,r){const i=new v_(r),s=new xb(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Ib(await P_(e),s))),()=>{i.Na(),e.asyncQueue.enqueueAndForget((async()=>Tb(await P_(e),s)))}}(oE(h),d,c,u)}function EI(e,t){return function(e,t){const n=new v_(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){ed(e).q_.add(t),t.next()}(await P_(e),n))),()=>{n.Na(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){ed(e).q_.delete(t)}(await P_(e),n)))}}(oE(e=H_(e,sE)),rE(t)?t:{next:t})}function II(e,t){return function(e,t){const n=new rd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=d_(e);try{const e=await function(e,t){const n=ed(e),r=yd.now(),i=t.reduce(((e,t)=>e.add(t.key)),Sm());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=gm(),l=Sm();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=$m(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new eg(e.key,t,yp(t.value.mapValue),Wm.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:wm(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new Rf(pd)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await e_(r,e.changes),await rb(r.remoteStore)}catch(e){const t=yb(e,"Failed to persist write");n.reject(t)}}(await R_(e),t,n))),n.promise}(oE(e),t)}function TI(e,t,n){const r=n.docs.get(t._key),i=new gI(e);return new hI(e,i,t._key,r,new uI(n.hasPendingWrites,n.fromCache),t.converter)}const SI={maxAttempts:5};class kI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=TE(e)}set(e,t,n){this._verifyNotCommitted();const r=CI(e,this._firestore),i=lI(r.converter,t,n),s=SE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Wm.none())),this}update(e,t,n){this._verifyNotCommitted();const r=CI(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=it(t))||t instanceof mE?PE(this._dataReader,"WriteBatch.update",r._key,t,n,o):DE(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Wm.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=CI(e,this._firestore);return this._mutations=this._mutations.concat(new ig(t._key,Wm.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nd(td.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function CI(e,t){if((e=it(e)).firestore!==t)throw new nd(td.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class xI extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=TE(e)}get(e){const t=CI(e,this._firestore),n=new cI(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Jh();const r=e[0];if(r.isFoundDocument())return new HE(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new HE(this._firestore,n,t._key,null,t.converter);throw Jh()}))}set(e,t,n){const r=CI(e,this._firestore),i=lI(r.converter,t,n),s=SE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=CI(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=it(t))||t instanceof mE?PE(this._dataReader,"Transaction.update",r._key,t,n,o):DE(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=CI(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=CI(e,this._firestore),n=new gI(this._firestore);return super.get(e).then((e=>new hI(this._firestore,n,t._key,e._document,new uI(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Wh=e}(Yt),qt(new st("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new sE(new ad(e.getProvider("auth-internal")),new hd(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new nd(td.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qf(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),en(qh,"4.4.0",e),en(qh,"4.4.0","esm2017")}();function NI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new nd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function AI(){if("undefined"===typeof Uint8Array)throw new nd("unimplemented","Uint8Arrays are not available in this environment.")}function RI(){if("undefined"==typeof atob)throw new nd("unimplemented","Blobs are unavailable in Firestore in this environment.")}class DI{constructor(e){this._delegate=e}static fromBase64String(e){return RI(),new DI(pE.fromBase64String(e))}static fromUint8Array(e){return AI(),new DI(pE.fromUint8Array(e))}toBase64(){return RI(),this._delegate.toBase64()}toUint8Array(){return AI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function PI(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class OI{enableIndexedDbPersistence(e,t){return function(e,t){fE(e=H_(e,sE));const n=oE(e);if(n._uninitializedComponentsProvider)throw new nd(td.FAILED_PRECONDITION,"SDK cache is already specified.");Xh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new g_;return lE(n,i,new p_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){fE(e=H_(e,sE));const t=oE(e);if(t._uninitializedComponentsProvider)throw new nd(td.FAILED_PRECONDITION,"SDK cache is already specified.");Xh("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new g_;return lE(t,r,new m_(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new nd(td.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new rd;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Ud.D())return Promise.resolve();const t=e+"main";await Ud.delete(t)}($v(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class LI{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Xh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Q_(this._delegate,e,t,n)}enableNetwork(){return uE(this._delegate)}disableNetwork(){return hE(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,B_("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return cE(this._delegate)}onSnapshotsInSync(e){return EI(this._delegate,e)}get app(){if(!this._appCompat)throw new nd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new YI(this,J_(this._delegate,e))}catch(t){throw zI(t,"collection()","Firestore.collection()")}}doc(e){try{return new BI(this,Z_(this._delegate,e))}catch(t){throw zI(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new GI(this,function(e,t){if(e=H_(e,K_),V_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new nd(td.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Y_(e,null,function(e){return new $p(bd.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw zI(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=H_(e,sE);const r=Object.assign(Object.assign({},SI),n);return function(e){if(e.maxAttempts<1)throw new nd(td.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new rd;return e.asyncQueue.enqueueAndForget((async()=>{const i=await D_(e);new __(e.asyncQueue,i,n,t,r).run()})),r.promise}(oE(e),(n=>t(new xI(e,n))),r)}(this._delegate,(t=>e(new FI(this,t))))}batch(){return oE(this._delegate),new UI(new kI(this._delegate,(e=>II(this._delegate,e))))}loadBundle(e){return function(e,t){const n=oE(e=H_(e,sE)),r=new iE;return M_(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return dE(this._delegate,e).then((e=>e?new GI(this,e):null))}}class MI extends aI{constructor(e){super(),this.firestore=e}convertBytes(e){return new DI(new pE(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return BI.forKey(t,this.firestore,null)}}class FI{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new MI(e)}get(e){const t=XI(e);return this._delegate.get(t).then((e=>new HI(this._firestore,new hI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=XI(e);return n?(NI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=XI(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=XI(e);return this._delegate.delete(t),this}}class UI{constructor(e){this._delegate=e}set(e,t,n){const r=XI(e);return n?(NI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=XI(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=XI(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class VI{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new dI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new WI(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=VI.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new VI(e,new MI(e),t),r.set(t,i)),i}}VI.INSTANCES=new WeakMap;class BI{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MI(e)}static forPath(e,t,n){if(e.length%2!==0)throw new nd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new BI(t,new X_(t._delegate,n,new Id(e)))}static forKey(e,t,n){return new BI(t,new X_(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new YI(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new YI(this.firestore,J_(this._delegate,e))}catch(t){throw zI(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=it(e))instanceof X_&&eE(this._delegate,e)}set(e,t){t=NI("DocumentReference.set",t);try{return t?wI(this._delegate,e,t):wI(this._delegate,e)}catch(n){throw zI(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?bI(this._delegate,e):bI(this._delegate,e,t,...r)}catch(s){throw zI(s,"updateDoc()","DocumentReference.update()")}}delete(){return II(H_((e=this._delegate).firestore,sE),[new ig(e._key,Wm.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=jI(t),i=qI(t,(e=>new HI(this.firestore,new hI(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return _I(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?yI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=H_(e,X_);const t=H_(e.firestore,sE);return O_(oE(t),e._key,{source:"server"}).then((n=>TI(t,e,n)))}(this._delegate):function(e){e=H_(e,X_);const t=H_(e.firestore,sE);return O_(oE(t),e._key).then((n=>TI(t,e,n)))}(this._delegate),t.then((e=>new HI(this.firestore,new hI(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new BI(this.firestore,e?this._delegate.withConverter(VI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function zI(e,t,n){return e.message=e.message.replace(t,n),e}function jI(e){for(const t of e)if("object"===typeof t&&!PI(t))return t;return{}}function qI(e,t){var n,r;let i;return i=PI(e[0])?e[0]:PI(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class HI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new BI(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return mI(this._delegate,e._delegate)}}class WI extends HI{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Jh(),t}}class GI{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MI(e)}where(e,t,n){try{return new GI(this.firestore,XE(this._delegate,function(e,t,n){const r=t,i=GE("where",e);return $E._create(i,r,n)}(e,t,n)))}catch(r){throw zI(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new GI(this.firestore,XE(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=GE("orderBy",e);return ZE._create(n,t)}(e,t)))}catch(n){throw zI(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new GI(this.firestore,XE(this._delegate,(W_("limit",t=e),eI._create("limit",t,"F"))))}catch(t){throw zI(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new GI(this.firestore,XE(this._delegate,(W_("limitToLast",t=e),eI._create("limitToLast",t,"L"))))}catch(t){throw zI(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new GI(this.firestore,XE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tI._create("startAt",t,!0)}(...arguments)))}catch(e){throw zI(e,"startAt()","Query.startAt()")}}startAfter(){try{return new GI(this.firestore,XE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tI._create("startAfter",t,!1)}(...arguments)))}catch(e){throw zI(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new GI(this.firestore,XE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nI._create("endBefore",t,!1)}(...arguments)))}catch(e){throw zI(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new GI(this.firestore,XE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nI._create("endAt",t,!0)}(...arguments)))}catch(e){throw zI(e,"endAt()","Query.endAt()")}}isEqual(e){return tE(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?vI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=H_(e,Y_);const t=H_(e.firestore,sE),n=oE(t),r=new gI(t);return L_(n,e._query,{source:"server"}).then((n=>new fI(t,r,e,n)))}(this._delegate):function(e){e=H_(e,Y_);const t=H_(e.firestore,sE),n=oE(t),r=new gI(t);return KE(e._query),L_(n,e._query).then((n=>new fI(t,r,e,n)))}(this._delegate),t.then((e=>new QI(this.firestore,new fI(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=jI(t),i=qI(t,(e=>new QI(this.firestore,new fI(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return _I(this._delegate,r,i)}withConverter(e){return new GI(this.firestore,e?this._delegate.withConverter(VI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class KI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new WI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class QI{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new GI(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new WI(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new KI(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new WI(this._firestore,n))}))}isEqual(e){return mI(this._delegate,e._delegate)}}class YI extends GI{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new BI(this.firestore,e):null}doc(e){try{return new BI(this.firestore,void 0===e?Z_(this._delegate):Z_(this._delegate,e))}catch(t){throw zI(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=H_(e.firestore,sE),r=Z_(e),i=lI(e.converter,t);return II(n,[SE(TE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Wm.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new BI(this.firestore,e)))}isEqual(e){return eE(this._delegate,e._delegate)}withConverter(e){return new YI(this.firestore,e?this._delegate.withConverter(VI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function XI(e){return H_(e,X_)}class $I{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new mE(...t)}static documentId(){return new $I(Ed.keyField().canonicalString())}isEqual(e){return(e=it(e))instanceof mE&&this._delegate._internalPath.isEqual(e._internalPath)}}class JI{constructor(e){this._delegate=e}static serverTimestamp(){const e=new xE("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new JI(e)}static delete(){const e=new kE("deleteField");return e._methodName="FieldValue.delete",new JI(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new NE("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new JI(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new AE("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new JI(e)}static increment(e){const t=new RE("increment",e);return t._methodName="FieldValue.increment",new JI(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ZI={Firestore:LI,GeoPoint:yE,Timestamp:yd,Blob:DI,Transaction:FI,WriteBatch:UI,DocumentReference:BI,DocumentSnapshot:HI,Query:GI,QueryDocumentSnapshot:WI,QuerySnapshot:QI,CollectionReference:YI,FieldPath:$I,FieldValue:JI,setLogLevel:function(e){var t;t=e,Gh.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new st("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},ZI)))}(e,((e,t)=>new LI(e,t,new OI))),e.registerVersion("@firebase/firestore-compat","0.3.23")}(bn);const eT="firebasestorage.googleapis.com",tT="storageBucket";class nT extends Ge{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(sT(e),"Firebase Storage: ".concat(t," (").concat(sT(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,nT.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var rT,iT;function sT(e){return"storage/"+e}function oT(){return new nT(rT.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function aT(){return new nT(rT.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lT(){return new nT(rT.CANCELED,"User canceled the upload/download.")}function cT(){return new nT(rT.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function uT(e){return new nT(rT.INVALID_ARGUMENT,e)}function hT(){return new nT(rT.APP_DELETED,"The Firebase app was deleted.")}function dT(e){return new nT(rT.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fT(e,t){return new nT(rT.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function pT(e){throw new nT(rT.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(rT||(rT={}));class mT{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=mT.makeFromUrl(e,t)}catch(i){return new mT(e,"")}if(""===n.path)return n;throw r=e,new nT(rT.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===eT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new mT(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new nT(rT.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class gT{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function yT(e){return"string"===typeof e||e instanceof String}function vT(e){return wT()&&e instanceof Blob}function wT(){return"undefined"!==typeof Blob}function bT(e,t,n,r){if(r<t)throw uT("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw uT("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function _T(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function ET(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function IT(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(iT||(iT={}));class TT{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new ST(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===iT.NO_ERROR,i=n.getStatus();if(!t||IT(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===iT.ABORT;return void e(!1,new ST(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new ST(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=oT();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?hT():lT())}else{r(aT())}};this.canceled_?t(0,new ST(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ST{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function kT(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function CT(){const e=kT();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(wT())return new Blob(n);throw new nT(rT.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function xT(e){if("undefined"===typeof atob)throw t="base-64",new nT(rT.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const NT={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class AT{constructor(e,t){this.data=e,this.contentType=t||null}}function RT(e,t){switch(e){case NT.RAW:return new AT(DT(t));case NT.BASE64:case NT.BASE64URL:return new AT(PT(e,t));case NT.DATA_URL:return new AT(function(e){const t=new OT(e);return t.base64?PT(NT.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw fT(NT.DATA_URL,"Malformed data URL.")}return DT(t)}(t.rest)}(t),new OT(t).contentType)}throw oT()}function DT(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function PT(e,t){switch(e){case NT.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw fT(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case NT.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw fT(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=xT(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw fT(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class OT{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw fT(NT.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class LT{constructor(e,t){let n=0,r="";vT(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(vT(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new LT(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new LT(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(wT()){const e=t.map((e=>e instanceof LT?e.data_:e));return new LT(CT.apply(null,e))}{const e=t.map((e=>yT(e)?RT(NT.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new LT(r,!0)}}uploadData(){return this.data_}}function MT(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function FT(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function UT(e,t){return t}class VT{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||UT}}let BT=null;function zT(){if(BT)return BT;const e=[];e.push(new VT("bucket")),e.push(new VT("generation")),e.push(new VT("metageneration")),e.push(new VT("name","fullPath",!0));const t=new VT("name");t.xform=function(e,t){return function(e){return!yT(e)||e.length<2?e:FT(e)}(t)},e.push(t);const n=new VT("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new VT("timeCreated")),e.push(new VT("updated")),e.push(new VT("md5Hash",null,!0)),e.push(new VT("cacheControl",null,!0)),e.push(new VT("contentDisposition",null,!0)),e.push(new VT("contentEncoding",null,!0)),e.push(new VT("contentLanguage",null,!0)),e.push(new VT("contentType",null,!0)),e.push(new VT("metadata","customMetadata",!0)),BT=e,BT}function jT(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new mT(n,r);return t._makeStorageReference(i)}})}(r,e),r}function qT(e,t,n){const r=MT(t);if(null===r)return null;return jT(e,r,n)}function HT(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const WT="prefixes",GT="items";function KT(e,t,n){const r=MT(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[WT])for(const i of n[WT]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new mT(t,n));r.prefixes.push(s)}if(n[GT])for(const i of n[GT]){const n=e._makeStorageReference(new mT(t,i.name));r.items.push(n)}return r}(e,t,r)}class QT{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function YT(e){if(!e)throw oT()}function XT(e,t){return function(n,r){const i=qT(e,r,t);return YT(null!==i),i}}function $T(e,t){return function(n,r){const i=qT(e,r,t);return YT(null!==i),function(e,t,n,r){const i=MT(t);if(null===i)return null;if(!yT(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return _T("/b/"+o(i)+"/o/"+o(s),n,r)+ET({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function JT(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new nT(rT.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new nT(rT.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new nT(rT.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new nT(rT.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function ZT(e){const t=JT(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new nT(rT.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function eS(e,t,n){const r=_T(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new QT(r,"GET",XT(e,n),i);return s.errorHandler=ZT(t),s}function tS(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=_T(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new QT(o,"GET",function(e,t){return function(n,r){const i=KT(e,t,r);return YT(null!==i),i}}(e,t.bucket),a);return l.urlParams=s,l.errorHandler=JT(t),l}function nS(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function rS(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=nS(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+HT(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=LT.getBlob(c,r,u);if(null===h)throw cT();const d={name:l.fullPath},f=_T(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new QT(f,"POST",XT(e,n),p);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=JT(t),m}class iS{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function sS(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){YT(!1)}return YT(!!n&&-1!==(t||["active"]).indexOf(n)),n}const oS=262144;function aS(e,t,n,r,i,s,o,a){const l=new iS(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new nT(rT.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const h=l.current,d=h+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},m=r.slice(h,d);if(null===m)throw cT();const g=t.maxUploadRetryTime,y=new QT(n,"POST",(function(e,n){const i=sS(e,["active","final"]),o=l.current+u,a=r.size();let c;return c="final"===i?XT(t,s)(e,n):null,new iS(o,a,"final"===i,c)}),g);return y.headers=p,y.body=m.uploadData(),y.progressCallback=a||null,y.errorHandler=JT(e),y}const lS={STATE_CHANGED:"state_changed"},cS={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function uS(e){switch(e){case"running":case"pausing":case"canceling":return cS.RUNNING;case"paused":return cS.PAUSED;case"success":return cS.SUCCESS;case"canceled":return cS.CANCELED;default:return cS.ERROR}}class hS{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function dS(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let fS=null;class pS{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=iT.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=iT.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=iT.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw pT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pT("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw pT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class mS extends pS{initXhr(){this.xhr_.responseType="text"}}function gS(){return fS?fS():new mS}class yS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=zT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(rT.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(IT(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=aT()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(rT.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=nS(t,r,i),a={name:o.fullPath},l=_T(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=HT(o,n),h=e.maxUploadRetryTime,d=new QT(l,"POST",(function(e){let t;sS(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){YT(!1)}return YT(yT(t)),t}),h);return d.urlParams=a,d.headers=c,d.body=u,d.errorHandler=JT(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,gS,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new QT(n,"POST",(function(e){const t=sS(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(s){YT(!1)}n||YT(!1);const i=Number(n);return YT(!isNaN(i)),new iS(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=JT(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,gS,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=oS*this._chunkMultiplier,t=new iS(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=aS(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const o=this._ref.storage._makeRequest(s,gS,r,i,!1);this._request=o,o.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(oS*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=eS(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,gS,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=rS(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,gS,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=lT(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=uS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new hS(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(uS(this._state)){case cS.SUCCESS:dS(this._resolve.bind(null,this.snapshot))();break;case cS.CANCELED:case cS.ERROR:dS(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(uS(this._state)){case cS.RUNNING:case cS.PAUSED:e.next&&dS(e.next.bind(e,this.snapshot))();break;case cS.SUCCESS:e.complete&&dS(e.complete.bind(e))();break;default:e.error&&dS(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class vS{constructor(e,t){this._service=e,this._location=t instanceof mT?t:mT.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new vS(e,t)}get root(){const e=new mT(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FT(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new mT(this._location.bucket,e);return new vS(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw dT(e)}}function wS(e){const t={prefixes:[],items:[]};return bS(e,t).then((()=>t))}async function bS(e,t,n){const r={pageToken:n},i=await _S(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await bS(e,t,i.nextPageToken)}function _S(e,t){null!=t&&"number"===typeof t.maxResults&&bT("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=tS(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,gS)}function ES(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=_T(t.fullServerUrl(),e.host,e._protocol),s=HT(n,r),o=e.maxOperationRetryTime,a=new QT(i,"PATCH",XT(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=ZT(t),a}(e.storage,e._location,t,zT());return e.storage.makeRequestWithTokens(n,gS)}function IS(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=_T(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new QT(r,"GET",$T(e,n),i);return s.errorHandler=ZT(t),s}(e.storage,e._location,zT());return e.storage.makeRequestWithTokens(t,gS).then((e=>{if(null===e)throw new nT(rT.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function TS(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=_T(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new QT(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=ZT(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,gS)}function SS(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new mT(e._location.bucket,n);return new vS(e.storage,r)}function kS(e,t){if(e instanceof NS){const n=e;if(null==n._bucket)throw new nT(rT.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tT+"' property when initializing the app?");const r=new vS(n,n._bucket);return null!=t?kS(r,t):r}return void 0!==t?SS(e,t):e}function CS(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof NS)return new vS(e,t);throw uT("To use ref(service, url), the first argument must be a Storage instance.")}return kS(e,t)}function xS(e,t){const n=null===t||void 0===t?void 0:t[tT];return null==n?null:mT.makeFromBucketSpec(n,e)}class NS{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=eT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?mT.makeFromBucketSpec(r,this._host):xS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=mT.makeFromBucketSpec(this._url,e):this._bucket=xS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vS(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new gT(hT());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=ET(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new TT(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const AS="@firebase/storage",RS="0.12.0",DS="storage";function PS(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new yS(e,new LT(t),n)}(e=it(e),t,n)}function OS(e){return function(e){e._throwIfRoot("getMetadata");const t=eS(e.storage,e._location,zT());return e.storage.makeRequestWithTokens(t,gS)}(e=it(e))}function LS(e,t){return CS(e=it(e),t)}function MS(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Ve(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function FS(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new NS(r,i,s,n,Yt)}qt(new st(DS,FS,"PUBLIC").setMultipleInstances(!0)),en(AS,RS,""),en(AS,RS,"esm2017");class US{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class VS{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new US(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new US(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new US(e,this,this._ref)):{next:t.next?e=>t.next(new US(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class BS{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new zS(e,this._service)))}get items(){return this._delegate.items.map((e=>new zS(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class zS{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return SS(e,t)}(this._delegate,e);return new zS(t,this.storage)}get root(){return new zS(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new zS(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new VS(PS(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NT.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=RT(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new VS(new yS(this._delegate,new LT(r.data,!0),i),this)}listAll(){return function(e){return wS(e=it(e))}(this._delegate).then((e=>new BS(e,this.storage)))}list(e){return function(e,t){return _S(e=it(e),t)}(this._delegate,e||void 0).then((e=>new BS(e,this.storage)))}getMetadata(){return OS(this._delegate)}updateMetadata(e){return function(e,t){return ES(e=it(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return IS(e=it(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return TS(e=it(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw dT(e)}}class jS{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(qS(e))throw uT("ref() expected a child path but got a URL, use refFromURL instead.");return new zS(LS(this._delegate,e),this)}refFromURL(e){if(!qS(e))throw uT("refFromURL() expected a full URL but got a child path, use ref() instead.");try{mT.makeFromUrl(e,this._delegate.host)}catch(t){throw uT("refFromUrl() expected a valid full URL but got an invalid one.")}return new zS(LS(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};MS(this._delegate,e,t,n)}}function qS(e){return/^[A-Za-z]+:\/\//.test(e)}function HS(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new jS(r,i)}!function(e){const t={TaskState:cS,TaskEvent:lS,StringFormat:NT,Storage:jS,Reference:zS};e.INTERNAL.registerComponent(new st("storage-compat",HS,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.3")}(bn),bn.initializeApp({apiKey:"AIzaSyDn2nInaVmc560sPZjeMzfi_4jJx4tSO6U",authDomain:"myblogsite-9930a.firebaseapp.com",projectId:"myblogsite-9930a",storageBucket:"myblogsite-9930a.appspot.com",messagingSenderId:"63925416917",appId:"1:63925416917:web:41f3e1fdc021b3388b835c",measurementId:"G-BX98BQH225",storageBucket:"myblogsite-9930a.appspot.com"});const WS=bn;var GS=n(7),KS=function(){return KS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},KS.apply(this,arguments)},QS={onActivate:GS.func,onAddUndo:GS.func,onBeforeAddUndo:GS.func,onBeforeExecCommand:GS.func,onBeforeGetContent:GS.func,onBeforeRenderUI:GS.func,onBeforeSetContent:GS.func,onBeforePaste:GS.func,onBlur:GS.func,onChange:GS.func,onClearUndos:GS.func,onClick:GS.func,onContextMenu:GS.func,onCommentChange:GS.func,onCopy:GS.func,onCut:GS.func,onDblclick:GS.func,onDeactivate:GS.func,onDirty:GS.func,onDrag:GS.func,onDragDrop:GS.func,onDragEnd:GS.func,onDragGesture:GS.func,onDragOver:GS.func,onDrop:GS.func,onExecCommand:GS.func,onFocus:GS.func,onFocusIn:GS.func,onFocusOut:GS.func,onGetContent:GS.func,onHide:GS.func,onInit:GS.func,onKeyDown:GS.func,onKeyPress:GS.func,onKeyUp:GS.func,onLoadContent:GS.func,onMouseDown:GS.func,onMouseEnter:GS.func,onMouseLeave:GS.func,onMouseMove:GS.func,onMouseOut:GS.func,onMouseOver:GS.func,onMouseUp:GS.func,onNodeChange:GS.func,onObjectResizeStart:GS.func,onObjectResized:GS.func,onObjectSelected:GS.func,onPaste:GS.func,onPostProcess:GS.func,onPostRender:GS.func,onPreProcess:GS.func,onProgressState:GS.func,onRedo:GS.func,onRemove:GS.func,onReset:GS.func,onSaveContent:GS.func,onSelectionChange:GS.func,onSetAttrib:GS.func,onSetContent:GS.func,onShow:GS.func,onSubmit:GS.func,onUndo:GS.func,onVisualAid:GS.func,onSkinLoadError:GS.func,onThemeLoadError:GS.func,onModelLoadError:GS.func,onPluginLoadError:GS.func,onIconsLoadError:GS.func,onLanguageLoadError:GS.func,onScriptsLoad:GS.func,onScriptsLoadError:GS.func},YS=KS({apiKey:GS.string,id:GS.string,inline:GS.bool,init:GS.object,initialValue:GS.string,onEditorChange:GS.func,value:GS.string,tagName:GS.string,cloudChannel:GS.string,plugins:GS.oneOfType([GS.string,GS.array]),toolbar:GS.oneOfType([GS.string,GS.array]),disabled:GS.bool,textareaName:GS.string,tinymceScriptSrc:GS.oneOfType([GS.string,GS.arrayOf(GS.string),GS.arrayOf(GS.shape({src:GS.string,async:GS.bool,defer:GS.bool}))]),rollback:GS.oneOfType([GS.number,GS.oneOf([!1])]),scriptLoading:GS.shape({async:GS.bool,defer:GS.bool,delay:GS.number})},QS),XS=function(e){return"function"===typeof e},$S=function(e){return e in QS},JS=function(e){return e.substr(2)},ZS=function(e,t,n,r,i){return function(e,t,n,r,i,s,o){var a=Object.keys(i).filter($S),l=Object.keys(s).filter($S),c=a.filter((function(e){return void 0===s[e]})),u=l.filter((function(e){return void 0===i[e]}));c.forEach((function(e){var t=JS(e),r=o[t];n(t,r),delete o[t]})),u.forEach((function(n){var i=r(e,n),s=JS(n);o[s]=i,t(s,i)}))}(i,e.on.bind(e),e.off.bind(e),(function(t,n){return function(r){var i;return null===(i=t(n))||void 0===i?void 0:i(r,e)}}),t,n,r)},ek=0,tk=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++ek+String(t)},nk=function(e){return null!==e&&("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase())},rk=function(e){return"undefined"===typeof e||""===e?[]:Array.isArray(e)?e:e.split(" ")},ik=function(e,t){void 0!==e&&(null!=e.mode&&"object"===typeof e.mode&&"function"===typeof e.mode.set?e.mode.set(t):e.setMode(t))},sk=function(){return sk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},sk.apply(this,arguments)},ok=function(e,t,n){var r,i,s=e.createElement("script");s.referrerPolicy="origin",s.type="application/javascript",s.id=t.id,s.src=t.src,s.async=null!==(r=t.async)&&void 0!==r&&r,s.defer=null!==(i=t.defer)&&void 0!==i&&i;var o=function(){s.removeEventListener("load",o),s.removeEventListener("error",a),n(t.src)},a=function(e){s.removeEventListener("load",o),s.removeEventListener("error",a),n(t.src,e)};s.addEventListener("load",o),s.addEventListener("error",a),e.head&&e.head.appendChild(s)},ak=function(){var e=[],t=function(t){var n=e.find((function(e){return e.getDocument()===t}));return void 0===n&&(n=function(e){var t={},n=function(e,n){var r=t[e];r.done=!0,r.error=n;for(var i=0,s=r.handlers;i<s.length;i++)(0,s[i])(e,n);r.handlers=[]};return{loadScripts:function(r,i,s){var o=function(e){return void 0!==s?s(e):console.error(e)};if(0!==r.length)for(var a=0,l=!1,c=function(e,t){l||(t?(l=!0,o(t)):++a===r.length&&i())},u=0,h=r;u<h.length;u++){var d=h[u],f=t[d.src];if(f)f.done?c(d.src,f.error):f.handlers.push(c);else{var p=tk("tiny-");t[d.src]={id:p,src:d.src,done:!1,error:null,handlers:[c]},ok(e,sk({id:p},d),n)}}else o(new Error("At least one script must be provided"))},deleteScripts:function(){for(var n,r=0,i=Object.values(t);r<i.length;r++){var s=i[r],o=e.getElementById(s.id);null!=o&&"SCRIPT"===o.tagName&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))}t={}},getDocument:function(){return e}}}(t),e.push(n)),n};return{loadList:function(e,n,r,i,s){var o=function(){return t(e).loadScripts(n,i,s)};r>0?setTimeout(o,r):o()},reinitialize:function(){for(var t=e.pop();null!=t;t=e.pop())t.deleteScripts()}}}(),lk=function(e){var t=e;return t&&t.tinymce?t.tinymce:null},ck=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uk=function(){return uk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},uk.apply(this,arguments)},hk=function(e){function t(t){var n,i,s,o=e.call(this,t)||this;return o.rollbackTimer=void 0,o.valueCursor=void 0,o.rollbackChange=function(){var e=o.editor,t=o.props.value;e&&t&&t!==o.currentContent&&e.undoManager.ignore((function(){if(e.setContent(t),o.valueCursor&&(!o.inline||e.hasFocus()))try{e.selection.moveToBookmark(o.valueCursor)}catch(n){}})),o.rollbackTimer=void 0},o.handleBeforeInput=function(e){if(void 0!==o.props.value&&o.props.value===o.currentContent&&o.editor&&(!o.inline||o.editor.hasFocus()))try{o.valueCursor=o.editor.selection.getBookmark(3)}catch(t){}},o.handleBeforeInputSpecial=function(e){"Enter"!==e.key&&"Backspace"!==e.key&&"Delete"!==e.key||o.handleBeforeInput(e)},o.handleEditorChange=function(e){var t=o.editor;if(t&&t.initialized){var n=t.getContent();void 0!==o.props.value&&o.props.value!==n&&!1!==o.props.rollback&&(o.rollbackTimer||(o.rollbackTimer=window.setTimeout(o.rollbackChange,"number"===typeof o.props.rollback?o.props.rollback:200))),n!==o.currentContent&&(o.currentContent=n,XS(o.props.onEditorChange)&&o.props.onEditorChange(n,t))}},o.handleEditorChangeSpecial=function(e){"Backspace"!==e.key&&"Delete"!==e.key||o.handleEditorChange(e)},o.initialise=function(e){var t,n,r;void 0===e&&(e=0);var i=o.elementRef.current;if(i)if(function(e){if(!("isConnected"in Node.prototype)){for(var t=e,n=e.parentNode;null!=n;)n=(t=n).parentNode;return t===e.ownerDocument}return e.isConnected}(i)){var s=lk(o.view);if(!s)throw new Error("tinymce should have been loaded into global scope");var a,l,c=uk(uk({},o.props.init),{selector:void 0,target:i,readonly:o.props.disabled,inline:o.inline,plugins:(a=null===(t=o.props.init)||void 0===t?void 0:t.plugins,l=o.props.plugins,rk(a).concat(rk(l))),toolbar:null!==(n=o.props.toolbar)&&void 0!==n?n:null===(r=o.props.init)||void 0===r?void 0:r.toolbar,setup:function(e){o.editor=e,o.bindHandlers({}),o.inline&&!nk(i)&&e.once("PostRender",(function(t){e.setContent(o.getInitialValue(),{no_events:!0})})),o.props.init&&XS(o.props.init.setup)&&o.props.init.setup(e)},init_instance_callback:function(e){var t,n,r=o.getInitialValue();o.currentContent=null!==(t=o.currentContent)&&void 0!==t?t:e.getContent(),o.currentContent!==r&&(o.currentContent=r,e.setContent(r),e.undoManager.clear(),e.undoManager.add(),e.setDirty(!1));var i=null!==(n=o.props.disabled)&&void 0!==n&&n;ik(o.editor,i?"readonly":"design"),o.props.init&&XS(o.props.init.init_instance_callback)&&o.props.init.init_instance_callback(e)}});o.inline||(i.style.visibility=""),nk(i)&&(i.value=o.getInitialValue()),s.init(c)}else if(0===e)setTimeout((function(){return o.initialise(1)}),1);else{if(!(e<100))throw new Error("tinymce can only be initialised when in a document");setTimeout((function(){return o.initialise(e+1)}),100)}},o.id=o.props.id||tk("tiny-react"),o.elementRef=r.createRef(),o.inline=null!==(s=null!==(n=o.props.inline)&&void 0!==n?n:null===(i=o.props.init)||void 0===i?void 0:i.inline)&&void 0!==s&&s,o.boundHandlers={},o}return ck(t,e),Object.defineProperty(t.prototype,"view",{get:function(){var e,t;return null!==(t=null===(e=this.elementRef.current)||void 0===e?void 0:e.ownerDocument.defaultView)&&void 0!==t?t:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(e){var t,n,r=this;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(e),this.editor.initialized)){if(this.currentContent=null!==(t=this.currentContent)&&void 0!==t?t:this.editor.getContent(),"string"===typeof this.props.initialValue&&this.props.initialValue!==e.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if("string"===typeof this.props.value&&this.props.value!==this.currentContent){var i=this.editor;i.undoManager.transact((function(){var e;if(!r.inline||i.hasFocus())try{e=i.selection.getBookmark(3)}catch(a){}var t=r.valueCursor;if(i.setContent(r.props.value),!r.inline||i.hasFocus())for(var n=0,s=[e,t];n<s.length;n++){var o=s[n];if(o)try{i.selection.moveToBookmark(o),r.valueCursor=o;break}catch(a){}}}))}if(this.props.disabled!==e.disabled){var s=null!==(n=this.props.disabled)&&void 0!==n&&n;ik(this.editor,s?"readonly":"design")}}},t.prototype.componentDidMount=function(){var e,t,n,r,i,s=this;if(null!==lk(this.view))this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&0===this.props.tinymceScriptSrc.length)null===(t=(e=this.props).onScriptsLoadError)||void 0===t||t.call(e,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(null===(n=this.elementRef.current)||void 0===n?void 0:n.ownerDocument){ak.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),null!==(i=null===(r=this.props.scriptLoading)||void 0===r?void 0:r.delay)&&void 0!==i?i:0,(function(){var e,t;null===(t=(e=s.props).onScriptsLoad)||void 0===t||t.call(e),s.initialise()}),(function(e){var t,n;null===(n=(t=s.props).onScriptsLoadError)||void 0===n||n.call(t,e)}))}},t.prototype.componentWillUnmount=function(){var e=this,t=this.editor;t&&(t.off(this.changeEvents(),this.handleEditorChange),t.off(this.beforeInputEvent(),this.handleBeforeInput),t.off("keypress",this.handleEditorChangeSpecial),t.off("keydown",this.handleBeforeInputSpecial),t.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach((function(n){t.off(n,e.boundHandlers[n])})),this.boundHandlers={},t.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.changeEvents=function(){var e,t,n;return(null===(n=null===(t=null===(e=lk(this.view))||void 0===e?void 0:e.Env)||void 0===t?void 0:t.browser)||void 0===n?void 0:n.isIE())?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},t.prototype.beforeInputEvent=function(){return window.InputEvent&&"function"===typeof InputEvent.prototype.getTargetRanges?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var e=this.props.tagName,t=void 0===e?"div":e;return r.createElement(t,{ref:this.elementRef,id:this.id})},t.prototype.renderIframe=function(){return r.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},t.prototype.getScriptSources=function(){var e,t,n=null===(e=this.props.scriptLoading)||void 0===e?void 0:e.async,r=null===(t=this.props.scriptLoading)||void 0===t?void 0:t.defer;if(void 0!==this.props.tinymceScriptSrc)return"string"===typeof this.props.tinymceScriptSrc?[{src:this.props.tinymceScriptSrc,async:n,defer:r}]:this.props.tinymceScriptSrc.map((function(e){return"string"===typeof e?{src:e,async:n,defer:r}:e}));var i=this.props.cloudChannel,s=this.props.apiKey?this.props.apiKey:"no-api-key";return[{src:"https://cdn.tiny.cloud/1/".concat(s,"/tinymce/").concat(i,"/tinymce.min.js"),async:n,defer:r}]},t.prototype.getInitialValue=function(){return"string"===typeof this.props.initialValue?this.props.initialValue:"string"===typeof this.props.value?this.props.value:""},t.prototype.bindHandlers=function(e){var t=this;if(void 0!==this.editor){ZS(this.editor,e,this.props,this.boundHandlers,(function(e){return t.props[e]}));var n=function(e){return void 0!==e.onEditorChange||void 0!==e.value},r=n(e),i=n(this.props);!r&&i?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):r&&!i&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=YS,t.defaultProps={cloudChannel:"6"},t}(r.Component),dk=n(184);const fk=WS.firestore().collection("blogs"),pk=WS.storage().ref(),mk=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(null);return(0,dk.jsx)("div",{children:(0,dk.jsxs)("form",{onSubmit:t=>{t.preventDefault(),pk.child("images/"+s.name).put(s).on("state change",(e=>{}),(e=>{console.log(e)}),(()=>{pk.child("images/"+s.name).getDownloadURL().then((t=>{console.log("img url",t),fk.add({Title:e,Body:n,CoverImg:t}).then((e=>{alert("Data Successfully Submitted")})).catch((e=>{console.error("Error adding document: ",e)}))}))}))},children:[(0,dk.jsx)("input",{type:"text",placeholder:"Title",onChange:e=>{t(e.target.value)},required:!0}),(0,dk.jsx)("input",{type:"file",name:"covering",accept:"image/*",onChange:e=>(e=>{e.target.files[0]&&o(e.target.files[0])})(e)}),(0,dk.jsx)(hk,{textareaName:"content",initialValue:"Write your content here",onEditorChange:e=>{i(e)},init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}),(0,dk.jsx)("button",{type:"submit",children:"Submit"})]})})},gk=WS.firestore().collection("blogs"),yk=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)("");(0,r.useEffect)((()=>{const e=gk.limit(100).onSnapshot((e=>{const n=e.docs.map((e=>({...e.data(),id:e.id})));t(n)}));return()=>e()}),[]);return(0,dk.jsxs)("div",{children:[(0,dk.jsxs)("form",{onSubmit:r=>{(r=>{r.preventDefault(),t(e.filter((e=>e.Title.toLowerCase().includes(n.toLowerCase())||e.Body.toLowerCase().includes(n.toLowerCase()))))})(r)},children:[(0,dk.jsx)("input",{onChange:e=>i(e.target.value)}),(0,dk.jsx)("button",{type:"submit",children:"Search"})]}),e.map((e=>(0,dk.jsxs)("div",{children:[(0,dk.jsxs)("p",{children:["Title: ",e.Title]}),(0,dk.jsxs)("p",{children:["Body: ",e.Body]}),e.CoverImg?(0,dk.jsx)(dk.Fragment,{children:(0,dk.jsx)("img",{src:e.CoverImg,alt:"cover"})}):null," ",(0,dk.jsx)(ke,{to:"/show/"+e.id,children:"View"}),(0,dk.jsx)(ke,{to:"/EditBlog/"+e.id,children:"Edit"}),(0,dk.jsx)("button",{onClick:()=>{(e=>{gk.doc(e).delete().then((()=>{alert("Document successfully deleted!")})).catch((e=>{console.error("Error removing document: ",e)}))})(e.id)},children:"delete"})]},e.id)))]})};var vk=n(703),wk=n.n(vk);const bk=WS.firestore().collection("blogs"),_k=()=>{const{id:e}=te(),[t,n]=(0,r.useState)({Title:"",Body:""});return(0,r.useEffect)((()=>{(async()=>{try{const t=await bk.doc(e).get();if(t.exists){const e=t.data();n(e)}else console.log("No such document!")}catch(t){console.error("Error fetching document:",t)}})()}),[e]),(0,r.useEffect)((()=>{if(t.Body){const e=wk().sanitize(t.Body);n((t=>({...t,Body:e})))}}),[t.Body]),(0,dk.jsxs)("div",{children:[(0,dk.jsxs)("p",{children:["Title : ",t.Title]}),(0,dk.jsx)("div",{dangerouslySetInnerHTML:{__html:t.Body}})]})},Ek=WS.firestore().collection("blogs"),Ik=()=>{const{id:e}=te(),[t,n]=(0,r.useState)(""),[i,s]=(0,r.useState)("");(0,r.useEffect)((()=>{(async()=>{try{const t=await Ek.doc(e).get();if(t.exists){const e=t.data();n(e.Title),s(e.Body)}else console.log("No such document!")}catch(t){console.error("Error fetching document:",t)}})()}),[e]);return(0,dk.jsx)("div",{children:(0,dk.jsxs)("form",{onSubmit:n=>{n.preventDefault(),Ek.doc(e).update({Title:t,Body:i}).then((e=>{alert("Data Successfully Submitted")})).catch((e=>{console.error("Error adding document: ",e)}))},children:[(0,dk.jsx)("input",{type:"text",placeholder:"Title",value:t,onChange:e=>{n(e.target.value)},required:!0}),(0,dk.jsx)("textarea",{name:"content",type:"text",placeholder:"write your content here",value:i,rows:"10",cols:"150",onChange:e=>{s(e.target.value)},required:!0}),(0,dk.jsx)("button",{type:"submit",children:"Submit"})]})})};function Tk(){const{user:e,initializing:t}=function(e){const[t,n]=(0,r.useState)((()=>e.Currentuser)),[i,s]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{const t=e.onAuthStateChanged((e=>{n(e||!1),i&&s(!1)}));return t}),[e,i]),{user:t,initializing:i}}(WS.auth());return(0,dk.jsx)("div",{className:"mt-20 text-center",onClick:async()=>{const e=new WS.auth.GoogleAuthProvider;WS.auth().useDeviceLanguage();try{await WS.auth().signInWithRedirect(e)}catch(n){console.log(n.message)}if(t)return"Loading...."},children:(0,dk.jsx)("button",{className:"border-2 border-black",children:"Sign In With Google"})})}const Sk=function(){return(0,dk.jsx)("div",{children:(0,dk.jsx)(Ie,{children:(0,dk.jsxs)(ye,{children:[(0,dk.jsx)(me,{exact:!0,path:"/",element:(0,dk.jsx)(yk,{})}),(0,dk.jsx)(me,{path:"/signin/",element:(0,dk.jsx)(Tk,{})}),(0,dk.jsx)(me,{path:"/Create",element:(0,dk.jsx)(mk,{})}),(0,dk.jsx)(me,{path:"/show/:id",element:(0,dk.jsx)(_k,{})}),(0,dk.jsx)(me,{path:"/EditBlog/:id",element:(0,dk.jsx)(Ik,{})})]})})})};s.createRoot(document.getElementById("root")).render((0,dk.jsx)(r.StrictMode,{children:(0,dk.jsx)(Sk,{})}))})()})();
//# sourceMappingURL=main.d606c848.js.map